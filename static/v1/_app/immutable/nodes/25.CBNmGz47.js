import"../chunks/disclose-version.BDr9Qe-U.js";import"../chunks/legacy.CNpbjrm0.js";import{p as d,o as m,a as f,$ as l}from"../chunks/index-client.wsxBsMrC.js";import{h as _}from"../chunks/svelte-head.2q0gYbHo.js";import{i as u}from"../chunks/lifecycle.BqqCO0-d.js";import{C as w,g,a as h,s as k,b as v,c as R,d as j,e as y,R as L,f as S}from"../chunks/dataFetching.BTF7Y2Cd.js";import{u as r}from"../chunks/param.svelte.cJM6dcHK.js";function $(b,n){d(n,!1);let c=r("code"),p=r("state");m(async()=>{const a=new URLSearchParams;let t=L,o=p.get();o&&(o==="account"?t=S:o.startsWith("device")&&(t=`/auth/v1/${o}`));let i=c.get();if(!i){console.error("no `code` given");return}a.append("grant_type","authorization_code"),a.append("code",i),a.append("redirect_uri",t),a.append("client_id",w),a.append("code_verifier",g());let s=await h(a),e=await s.json();k(e.access_token),v(e.id_token),s=await R(e.access_token),e=await s.json(),j(e.csrf_token),y(),window.location.replace(t)}),u(),_(a=>{l.title="Login"}),f()}export{$ as component};
