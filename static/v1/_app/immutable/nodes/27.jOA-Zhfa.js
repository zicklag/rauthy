import"../chunks/disclose-version.BDr9Qe-U.js";import{p as S,o as T,a5 as z,a4 as f,a as A,j as t,g as c,a3 as $,n as P,$ as X,a7 as B,a8 as Y,a9 as F,a6 as q}from"../chunks/index-client.wsxBsMrC.js";import{s as D}from"../chunks/render.CGk_31K2.js";import{i as g}from"../chunks/if.CdP3FEr9.js";import{a as s,t as b,c as j,b as J}from"../chunks/template.CyQ6qVeq.js";import{h as K}from"../chunks/svelte-head.2q0gYbHo.js";import{p as u}from"../chunks/proxy.MUfQDWlv.js";import{W as Q,X as U,Y as V}from"../chunks/dataFetching.BTF7Y2Cd.js";import{W as Z}from"../chunks/WebauthnRequest.CJdyVez7.js";import{s as aa}from"../chunks/snippet.CWtw0GJr.js";import{L as ea}from"../chunks/LangSelector.Q_ihhFqZ.js";import{B as ta}from"../chunks/Button.BsAE8GCO.js";import{u as oa}from"../chunks/i18n.svelte.B_PCuqyN.js";import{u as y}from"../chunks/param.svelte.cJM6dcHK.js";var ra=b("<div><h2>Cookies disabled</h2> <p>You need to enable Cookies.<br> Without them, a safe login cannot be executed.</p></div>"),sa=b("<noscript></noscript> <!>",1);function ia(O,k){S(k,!0);let x=$(!1),d=$(!1);T(()=>{t(d,u(navigator.cookieEnabled)),t(x,!0)});var o=sa(),n=z(f(o),2);{var W=h=>{var e=j(),C=f(e);{var a=i=>{var l=j(),E=f(l);aa(E,()=>k.children??P),s(i,l)},r=i=>{var l=ra();s(i,l)};g(C,i=>{c(d)?i(a):i(r,!1)})}s(h,e)};g(n,h=>{c(x)&&h(W)})}s(O,o),A()}var na=b('<div class="btn flex-col svelte-1dkpwyo"><!></div>'),ca=b('<div class="error svelte-1dkpwyo"> </div>'),la=b("<!> <!>",1);function va(O,k){S(k,!0);let x=oa(),d=$(!1),o=$(""),n=$(void 0);T(async()=>{let e=y("error").get();if(e){let r=y("error_description").get();t(o,`${e}: ${r}`);return}let C={state:y("state").get(),code:y("code").get(),pkce_verifier:Q(),xsrf_token:U()},a=await V(C);if(a.status===202)window.location.replace(a.headers.get("location")||"/auth/v1/account");else if(a.status===200)t(o,""),t(n,u(await a.json()));else if(a.status===204)window.location.replace("/auth/v1/account");else if(a.status===403){let r=await a.json();console.error(r),t(o,u(r.message))}else if(a.status===406)t(o,u(x.authorize.clientForceMfa)),t(d,!0);else{let r=await a.text();t(o,`HTTP ${a.status}: ${r}`)}});function W(e){t(o,u(e||"ERROR")),t(n,void 0)}function h(e){e&&window.location.replace(e.loc)}K(e=>{X.title="Callback"}),ia(O,{children:(e,C)=>{var a=la(),r=f(a);{var i=v=>{Z(v,{onSuccess:h,onError:W,get data(){return c(n)},set data(R){t(n,u(R))}})},l=v=>{var R=j(),G=f(R);{var H=m=>{var p=na(),L=B(p);ta(L,{$$events:{click:()=>window.location.href="/auth/v1/account"},children:(N,_)=>{Y();var w=J("ACCOUNT LOGIN");s(N,w)},$$slots:{default:!0}}),F(p),s(m,p)},I=m=>{var p=j(),L=f(p);{var N=_=>{var w=ca(),M=B(w,!0);F(w),q(()=>D(M,c(o))),s(_,w)};g(L,_=>{c(o)&&_(N)},!0)}s(m,p)};g(G,m=>{c(d)?m(H):m(I,!1)},!0)}s(v,R)};g(r,v=>{c(n)?v(i):v(l,!1)})}var E=z(r,2);ea(E,{absolute:!0}),s(e,a)},$$slots:{default:!0}}),A()}export{va as component};
