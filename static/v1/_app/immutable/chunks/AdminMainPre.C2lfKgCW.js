import"./disclose-version.BDr9Qe-U.js";import{a6 as K,p as le,o as Ne,a7 as c,a5 as l,n as Ct,a9 as v,a as ne,a4 as ee,j as a,g as e,a3 as C,aa as Bt,d as ys,a8 as q,h as Ke,aP as na,aZ as Ca,b as ws,$ as Aa}from"./index-client.wsxBsMrC.js";import{h as Ta}from"./svelte-head.2q0gYbHo.js";import{a as r,n as Xe,t as A,c as me,b as B}from"./template.CyQ6qVeq.js";import{i as P}from"./if.CdP3FEr9.js";import{p as n}from"./proxy.MUfQDWlv.js";import{p as G,s as bs,a as $s,c as La,r as Jt}from"./props.byAfpN0R.js";import{aq as oa,ar as _s,O as ut,u as va,v as ks,ab as xs,ac as Es,ad as Is,ae as Na,L as Ra,as as Ot,n as Ye,at as Da,ak as ja,A as Ss,ag as Cs,aj as As,ao as Ts,au as qt,av as Pa,aw as Ls,ax as Ns,a6 as Xt,l as tt,ay as Rs,az as Ds,aA as za,aB as ft,aC as js,a1 as Oa,aD as Ma,aE as Ua,aF as Gt,aG as da,aH as Ps,aI as zs,aJ as Os,aK as qa,aL as Ga,aM as ca,an as Ms,a0 as Us,aN as qs}from"./dataFetching.BTF7Y2Cd.js";import{s as ue,t as ce,f as ht,d as nt,a as _e,B as Se,L as ua,e as ha,c as Gs,g as Nt}from"./Button.BsAE8GCO.js";import{s as oe,t as Et,c as Ws,g as Mt,b as Rt}from"./helpers.DikdX20z.js";import{b as dt,a as Ze,S as Be,D as Ks,E as ot,T as Dt,I as Zt,d as Fs,h as Wa,e as Vs,c as Bs}from"./Devices.DsmKo-R7.js";import{r as Te}from"./legacy-client.Dm1n63jC.js";import{d as pt,e as Me,s as Y,r as pa}from"./render.CGk_31K2.js";import{s as At}from"./snippet.CWtw0GJr.js";import{w as Tt}from"./index.CaPZMw1_.js";import{a as Qt,C as ea}from"./CheckIcon.D_wF-Arv.js";import{t as Js,c as Ys}from"./tweened.as6jNqQ5.js";import{A as Hs}from"./AppVersion.NfbS7z7r.js";import{e as We,i as yt,b as Ka,O as kt}from"./OptionSelect.ZTdPq3oL.js";import{c as He,a as he,b as wt,I as ie}from"./Input.CbYO_vsg.js";import{P as Wt,I as Fa,a as Va,b as Xs}from"./PasswordInput.CYtyiDqV.js";import{P as Zs}from"./PasswordPolicy.DFXAbMJT.js";import{b as Qs}from"./this.2HyDd4fA.js";import"./legacy.CNpbjrm0.js";const er=Tt(),tr=Tt(),Yt=Tt(""),ta=Tt(!0);var ar=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg>');function sr(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=ar();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var rr=A('<div role="button" tabindex="0" class="close svelte-1qa3cal"><!></div> <div class="logo svelte-1qa3cal"><!></div>',1),ir=A('<div role="button" tabindex="0" class="burger svelte-1qa3cal"><!></div> <div></div> <div class="logo svelte-1qa3cal"><!></div>',1),lr=A('<div class="version svelte-1qa3cal"><!></div>'),nr=A('<nav class="nav svelte-1qa3cal"><div><!> <div class="menu svelte-1qa3cal"><div class="links svelte-1qa3cal"><!></div></div></div> <!></nav>');function or(_,s){le(s,!0);const t=bs(),d=()=>$s(I,"$width",t);let i=G(s,"selected",15,""),g=G(s,"widthExpanded",3,185),f=G(s,"widthCollapsed",3,60),u=G(s,"isExpanded",15,!0);const I=Js(u()?g():f(),{duration:200,easing:Ys});ta.subscribe(p=>u(p)),Yt.subscribe(p=>{p&&i(p)}),Te(()=>{u()?(ta.set(!0),I.set(g())):(ta.set(!1),setTimeout(()=>{I.set(f())},200))}),Te(()=>{i()&&Yt.set(i())}),Ne(()=>{er.set(g()),tr.set(f()),Yt.set(i())});function E(){u(!u())}var o=nr(),$=c(o),m=c($);{var T=p=>{var S=rr(),L=ee(S);L.__click=E;var D=c(L);Qt(D,{}),v(L);var j=l(L,2),N=c(j);At(N,()=>s.logo??Ct),v(j),K(()=>oe(L,"left",`calc(${d()??""}px - 22px)`)),Me("keypress",L,E),ce(1,L,()=>ht,()=>({delay:500,duration:200})),ce(2,L,()=>ht,()=>({duration:100})),ce(1,j,()=>ht,()=>({delay:250,duration:100})),ce(2,j,()=>ht,()=>({duration:20})),r(p,S)},k=p=>{var S=ir(),L=ee(S);L.__click=E,oe(L,"left","3px");var D=c(L);sr(D,{width:24}),v(L);var j=l(L,2);oe(j,"height","10px");var N=l(j,2),V=c(N);At(V,()=>s.logo??Ct),v(N),Me("keypress",L,E),ce(1,L,()=>ht,()=>({delay:500,duration:200})),ce(2,L,()=>ht,()=>({duration:100})),ce(1,N,()=>ht,()=>({delay:250,duration:100})),ce(2,N,()=>ht,()=>({duration:20})),r(p,S)};P(m,p=>{u()?p(T):p(k,!1)})}var h=l(m,2),y=c(h),w=c(y);At(w,()=>s.entries??Ct),v(y),v(h),v($);var b=l($,2);{var x=p=>{var S=lr(),L=c(S);Hs(L,{}),v(S),ce(1,S,()=>ht,()=>({delay:500,duration:200})),ce(2,S,()=>ht,()=>({duration:100})),r(p,S)};P(b,p=>{u()&&p(x)})}v(o),K(()=>{oe(o,"min-width",`${d()??""}px`),oe(o,"width",`${d()??""}px`),oe(o,"padding",u()?"20px 10px":"10px 3px")}),r(_,o),ne()}pt(["click"]);var vr=A('<div role="menuitem" tabindex="0" class="entry noselect font-label svelte-ueauq5"><!> <span class="label svelte-ueauq5"> </span></div>'),dr=A('<div role="menuitem" tabindex="0" class="entryCollapsed noselect font-label svelte-ueauq5"><!> <span class="labelCollapsed svelte-ueauq5"> </span></div>');function mt(_,s){le(s,!0);let t=G(s,"label",3,""),d=G(s,"slotCollapsed",3,!0),i=C(!0),g=C("var(--col-text)"),f=C("");Yt.subscribe(k=>a(f,n(k))),ta.subscribe(k=>a(i,n(k)));let u=C(!1);function I(){e(u)?a(g,"var(--col-err)"):e(f)===t()?a(g,"var(--col-ok)"):a(g,"var(--col-text)")}function E(){Yt.set(t())}Te(()=>{e(f)&&I()}),Te(()=>{e(u)?a(g,"var(--col-err)"):I()});var o=me(),$=ee(o);{var m=k=>{var h=vr();h.__click=E;var y=c(h);At(y,()=>s.children??Ct);var w=l(y,2),b=c(w,!0);v(w),v(h),K(()=>{Et(h,"selected",e(f)===t()),Y(b,t())}),Me("keypress",h,E),Me("mouseenter",h,()=>a(u,!0)),Me("mouseleave",h,()=>a(u,!1)),ce(7,h,()=>ht,()=>({duration:100})),r(k,h)},T=k=>{var h=dr();h.__click=E;var y=c(h);{var w=p=>{var S=me(),L=ee(S);At(L,()=>s.children??Ct),r(p,S)};P(y,p=>{d()&&p(w)})}var b=l(y,2),x=c(b,!0);v(b),v(h),K(()=>{Et(h,"selectedCollapsed",e(f)===t()),Y(x,t())}),Me("keypress",h,E),Me("mouseenter",h,()=>a(u,!0)),Me("mouseleave",h,()=>a(u,!1)),ce(5,h,()=>ht,()=>({delay:200,duration:100})),r(k,h)};P($,k=>{e(i)?k(m):k(T,!1)})}r(_,o),ne()}pt(["click"]);const it={"Content-Type":"application/json",Accept:"application/json"};function De(){return{"csrf-token":oa(),"Content-Type":"application/json",Accept:"application/json"}}async function ke(_){return _.status===403&&(await _.json()).error==="MfaRequired"&&(console.error("MFA is required for a rauthy admin account"),await Ws(3e3),window.location.reload()),(_.status===401||_.status===403)&&window.location.reload(),_}async function cr(){return await fetch("/auth/v1/oidc/certs",{method:"GET",headers:it})}async function ur(){const _=await fetch("/auth/v1/clients",{method:"GET",headers:it});return await ke(_)}async function hr(_){const s=await fetch("/auth/v1/clients",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function pr(_){const s=await fetch(`/auth/v1/clients/${_.id}`,{method:"PUT",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function mr(_){const s=await fetch(`/auth/v1/clients/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function gr(_){const s=await fetch(`/auth/v1/clients/${_}/colors`,{method:"GET",headers:it});return await ke(s)}async function fr(_,s){const t=await fetch(`/auth/v1/clients/${_}/colors`,{method:"PUT",headers:De(),body:JSON.stringify(s)});return await ke(t)}async function yr(_){const s=await fetch(`/auth/v1/clients/${_}/colors`,{method:"DELETE",headers:De()});return await ke(s)}async function wr(_,s){const t=new FormData;t.append("logo",s);const d=await fetch(`/auth/v1/clients/${_}/logo`,{method:"PUT",headers:{"csrf-token":oa()},body:t});return await ke(d)}async function br(_){const s=await fetch(`/auth/v1/clients/${_}/logo`,{method:"DELETE",headers:De()});return await ke(s)}async function $r(_){const s=await fetch(`/auth/v1/clients/${_}/secret`,{method:"POST",headers:De()});return await ke(s)}async function _r(_){const s=await fetch(`/auth/v1/clients/${_}/secret`,{method:"PUT",headers:De()});return await ke(s)}async function kr(){const _=await fetch("/auth/v1/encryption/keys",{method:"GET",headers:it});return await ke(_)}async function xr(_){const s=await fetch("/auth/v1/encryption/migrate",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function Er(_){const s=await fetch("/auth/v1/events",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function Ba(){const _=await fetch("/auth/v1/groups",{method:"GET",headers:it});return await ke(_)}async function Ir(_){const s=await fetch("/auth/v1/groups",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function Sr(_,s){const t=await fetch(`/auth/v1/groups/${_}`,{method:"PUT",headers:De(),body:JSON.stringify(s)});return await ke(t)}async function Cr(_){const s=await fetch(`/auth/v1/groups/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function Ar(){const _=await fetch("/auth/v1/login_time",{method:"GET",headers:it});return await ke(_)}async function Tr(_){const s=await fetch("/auth/v1/password_hash_times",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function Lr(_){const s=await fetch("/auth/v1/password_policy",{method:"PUT",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function Nr(_){const s=await fetch("/auth/v1/users/request_reset",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function Rr(){return await fetch("/auth/v1/providers",{method:"POST",headers:De()})}async function Dr(_){return await fetch("/auth/v1/providers/create",{method:"POST",headers:De(),body:JSON.stringify(_)})}async function jr(_,s){return await fetch(`/auth/v1/providers/${_}`,{method:"PUT",headers:De(),body:JSON.stringify(s)})}async function Pr(_){return await fetch(`/auth/v1/providers/${_}`,{method:"DELETE",headers:De()})}async function zr(_){return await fetch(`/auth/v1/providers/${_}/delete_safe`,{method:"GET",headers:De()})}async function Or(_,s){const t=new FormData;t.append("logo",s);const d=await fetch(`/auth/v1/providers/${_}/img`,{method:"PUT",headers:{"csrf-token":oa()},body:t});return await ke(d)}async function Mr(_){return await fetch("/auth/v1/providers/lookup",{method:"POST",headers:De(),body:JSON.stringify(_)})}async function Ur(){const _=await fetch("/auth/v1/oidc/rotate_jwk",{method:"POST",headers:De()});return await ke(_)}async function qr(){const _=await fetch("/auth/v1/sessions",{method:"GET",headers:it});return await ke(_)}async function Ja(_,s,t,d){let i=`/auth/v1/sessions?page_size=${_}`;s&&(i=`${i}&offset=${s}`),d&&(i=`${i}&backwards=${d}`),t&&(i=`${i}&continuation_token=${t}`);const g=await fetch(i,{method:"GET",headers:it});return await ke(g)}async function Gr(){const _=await fetch("/auth/v1/sessions",{method:"DELETE",headers:De()});return await ke(_)}async function Wr(_){const s=await fetch(`/auth/v1/sessions/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function Kr(){const _=await fetch("/auth/v1/users",{method:"GET",headers:it});return await ke(_)}async function Ya(_,s,t,d){let i=`/auth/v1/users?page_size=${_}`;s&&(i=`${i}&offset=${s}`),d&&(i=`${i}&backwards=${d}`),t&&(i=`${i}&continuation_token=${t}`);const g=await fetch(i,{method:"GET",headers:it});return await ke(g)}async function Fr(_){const s=await fetch("/auth/v1/users",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function Ha(_,s){const t=await fetch(`/auth/v1/users/${_}`,{method:"PUT",headers:De(),body:JSON.stringify(s)});return await ke(t)}async function Vr(_){const s=await fetch(`/auth/v1/users/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function ma(){const _=await fetch("/auth/v1/users/attr",{method:"GET",headers:it});return await ke(_)}async function Br(_){const s=await fetch("/auth/v1/users/attr",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function Jr(_,s){const t=await fetch(`/auth/v1/users/attr/${_}`,{method:"PUT",headers:De(),body:JSON.stringify(s)});return await ke(t)}async function Yr(_){const s=await fetch(`/auth/v1/users/attr/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function Hr(_){const s=await fetch(`/auth/v1/users/${_}/attr`,{method:"GET",headers:it});return await ke(s)}async function Xr(_,s){const t=await fetch(`/auth/v1/users/${_}/attr`,{method:"PUT",headers:De(),body:JSON.stringify(s)});return await ke(t)}async function Zr(){const _=await fetch("/auth/v1/api_keys",{method:"GET",headers:it});return await ke(_)}async function Qr(_){const s=await fetch("/auth/v1/api_keys",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function ei(_){const s=await fetch(`/auth/v1/api_keys/${_.name}`,{method:"PUT",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function ti(_){const s=await fetch(`/auth/v1/api_keys/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function ai(_){const s=await fetch(`/auth/v1/api_keys/${_}/secret`,{method:"PUT",headers:De()});return await ke(s)}async function si(){const _=await fetch("/auth/v1/blacklist",{method:"GET",headers:it});return await ke(_)}async function ri(_){const s=await fetch("/auth/v1/blacklist",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function ii(_){const s=await fetch(`/auth/v1/blacklist/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function Xa(){const _=await fetch("/auth/v1/roles",{method:"GET",headers:it});return await ke(_)}async function li(_){const s=await fetch("/auth/v1/roles",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function ni(_,s){const t=await fetch(`/auth/v1/roles/${_}`,{method:"PUT",headers:De(),body:JSON.stringify(s)});return await ke(t)}async function oi(_){const s=await fetch(`/auth/v1/roles/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function Za(){const _=await fetch("/auth/v1/scopes",{method:"GET",headers:it});return await ke(_)}async function vi(_){const s=await fetch("/auth/v1/scopes",{method:"POST",headers:De(),body:JSON.stringify(_)});return await ke(s)}async function di(_,s){const t=await fetch(`/auth/v1/scopes/${_}`,{method:"PUT",headers:De(),body:JSON.stringify(s)});return await ke(t)}async function ci(_){const s=await fetch(`/auth/v1/scopes/${_}`,{method:"DELETE",headers:De()});return await ke(s)}async function ui(_,s,t){const d=await fetch(`/auth/v1/search?ty=${_}&idx=${s}&q=${t}`,{method:"GET",headers:it});return await ke(d)}const hi=Tt([]),ga=Tt([]),pi=Tt([]),fa=Tt([]),mi=Tt([]),Qa=Tt([]);var gi=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>');function fi(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=gi();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var yi=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg>');function wi(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=yi();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var bi=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z"></path></svg>');function $i(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=bi();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var _i=A("<option> </option>"),ki=A('<select class="opts font-label svelte-1yhbvsw"></select>'),xi=A('<div class="container svelte-1yhbvsw"><!> <div class="inputBar svelte-1yhbvsw"><input class="input svelte-1yhbvsw" type="text" placeholder="Search" autocomplete="off"> <div class="magnify svelte-1yhbvsw"><!></div></div> <div class="backWrap svelte-1yhbvsw"><div role="button" tabindex="0" class="back svelte-1yhbvsw"><!></div></div></div>');function es(_,s){le(s,!0);let t=G(s,"items",27,()=>n([])),d=G(s,"resItems",15),i=G(s,"options",19,()=>[]),g=G(s,"useServerSideIdx",11,""),f=G(s,"isSearchFiltered",15,!1),u=G(s,"search",15,""),I=C(""),E;Ne(()=>{i().length>0&&(a(I,n(i()[0].label)),o())});function o(){for(let j of i())if(j.label===e(I)){E=j.callback;break}E||console.error("Could not find a valid callback function in search options for label "+e(I))}function $(){u("")}function m(){if(u().length<2){d(t()),f(!1);return}d([...t().filter(j=>i().length>0?E(j,u()):j.toLowerCase().includes(u())||j===u())]),f(!0)}async function T(){if(u().length<_s){d(t()),f(!1);return}f(!0);const j=e(I).replaceAll("-","").replaceAll(" ","").toLowerCase();let N=await ui(g(),j,u());N.ok?d(await N.json()):console.error(N)}Te(()=>{e(I)&&o()}),Te(()=>{u()?g()?T():m():(d(t()),f(!1))});var k=xi(),h=c(k);{var y=j=>{Ze(j,{text:"Search by",yOffset:-30,children:(N,V)=>{var R=ki();We(R,21,i,yt,(F,z)=>{var O=_i(),U={},Q=c(O,!0);v(O),K(()=>{U!==(U=e(z).label)&&(O.value=(O.__value=e(z).label)==null?"":e(z).label),Y(Q,e(z).label)}),r(F,O)}),v(R),Ka(R,()=>e(I),F=>a(I,F)),r(N,R)},$$slots:{default:!0}})};P(h,j=>{i().length>1&&j(y)})}var w=l(h,2),b=c(w);nt(b),K(()=>ue(b,"name",Mt()));var x=l(b,2),p=c(x);wi(p,{width:20}),v(x),v(w);var S=l(w,2),L=c(S);L.__click=$;var D=c(L);$i(D,{}),v(L),v(S),v(k),dt(b,u),Me("keypress",L,$),r(_,k),ne()}pt(["click"]);var Ei=(_,s)=>a(s,!e(s)),Ii=A('<div class="search svelte-spg3op"><!></div>'),Si=(_,s,t)=>s(e(t)),Ci=A('<div role="button" tabindex="0" class="item svelte-spg3op"> </div>'),Ai=A('<div class="itemsContainer svelte-spg3op"><!> <div class="items noselect font-label svelte-spg3op"></div></div>'),Ti=A('<div class="wrapper svelte-spg3op"><div role="button" tabindex="0" class="icon svelte-spg3op"><!></div> <!></div>');function Li(_,s){le(s,!0);let t=G(s,"items",31,()=>n([])),d=G(s,"onSelect",3,h=>{}),i=G(s,"mindWidth",3,130),g=G(s,"maxHeight",19,()=>t().length>4?175:120),f=G(s,"searchThreshold",11,5),u=C(n([])),I=C(!1);Te(()=>{t().length<=f()&&a(u,n(t()))});function E(h){a(I,!1),a(u,n(t())),d()(h)}var o=Ti(),$=c(o);$.__click=[Ei,I];var m=c($);fi(m,{}),v($);var T=l($,2);{var k=h=>{var y=Ai(),w=c(y);{var b=p=>{var S=Ii(),L=c(S);es(L,{get items(){return t()},set items(D){t(D)},get resItems(){return e(u)},set resItems(D){a(u,n(D))}}),v(S),K(()=>oe(S,"max-width",`${i()}px`)),r(p,S)};P(w,p=>{t().length>f()&&p(b)})}var x=l(w,2);We(x,21,()=>e(u),yt,(p,S)=>{var L=Ci();L.__click=[Si,E,S];var D=c(L,!0);v(L),K(()=>Y(D,e(S))),Me("keypress",L,()=>E(e(S))),r(p,L)}),v(x),v(y),K(()=>{ue(y,"style",`min-width: ${i()??""}px; max-height: ${g()??""}px`),ue(x,"style",`width: ${i()??""}; max-height: ${(t().length>f()?g()-29:g())??""}px`)}),ce(7,y,()=>_e,()=>({duration:200})),r(h,y)};P(T,h=>{e(I)&&h(k)})}v(o),Me("keypress",$,()=>a(I,!e(I))),r(_,o),ne()}pt(["click"]);var Ni=(_,s,t)=>s()(t.label),Ri=A('<div class="label font-label svelte-jphwq"> <div role="button" tabindex="0" class="icon svelte-jphwq"><!></div></div>');function Di(_,s){le(s,!0);let t=G(s,"onDelete",3,()=>{});var d=Ri(),i=c(d),g=l(i);g.__click=[Ni,t,s];var f=c(g);Qt(f,{color:"--var(--col-bg)",width:14}),v(g),v(d),K(()=>Y(i,`${s.label??""} `)),Me("keypress",g,()=>t()(s.label)),r(_,d),ne()}pt(["click"]);var ji=A('<div class="container svelte-1iraqg1"><!> <!></div>');function zt(_,s){le(s,!0);let t=G(s,"items",15),d=G(s,"options",19,()=>[]),i=G(s,"searchThreshold",15,4),g=C(n([]));Ne(()=>{I()});async function f(k){t()||t([]),t().push(k),t([...t()]),await I()}async function u(k){t([...t().filter(h=>h!==k)]),await I()}async function I(){await Bt(),t()||t([]),a(g,n([...d().filter(k=>!t().includes(k))]))}var E=ji(),o=c(E);{var $=k=>{var h=me(),y=ee(h);We(y,17,t,yt,(w,b,x)=>{Di(w,{onDelete:u,get label(){return t()[x]},set label(p){t(t()[x]=p,!0)}})}),r(k,h)};P(o,k=>{var h;((h=t())==null?void 0:h.length)>0&&k($)})}var m=l(o,2);{var T=k=>{Li(k,{onSelect:f,get items(){return e(g)},set items(h){a(g,n(h))},get searchThreshold(){return i()},set searchThreshold(h){i(h)}})};P(m,k=>{e(g)&&e(g).length>0&&k(T)})}v(E),r(_,E),ne()}var Pi=A('<div class="success svelte-tl4x7h">Success</div>'),zi=A('<div class="err svelte-tl4x7h"> </div>'),Oi=A('<div class="container svelte-tl4x7h"><div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">USER ID</div> <div class="value font-mono svelte-tl4x7h"> </div></div> <div class="row svelte-tl4x7h"><div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">ENABLED</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">E-MAIL VERIFIED</div> <div class="value svelte-tl4x7h"><!></div></div></div> <!> <!> <!> <div class="unit language svelte-tl4x7h"><div class="label svelte-tl4x7h">LANGUAGE</div> <div style="margin-top: .085rem"><!></div></div> <!> <!> <!> <!> <!> <!> <div class="unit svelte-tl4x7h"><div class="label svelte-tl4x7h">ROLES</div> <!></div> <div class="unit svelte-tl4x7h"><div class="label svelte-tl4x7h">GROUPS</div> <!></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">LIMIT LIFETIME</div> <div class="value svelte-tl4x7h"><!></div></div> <!> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">CREATED</div> <div class="value svelte-tl4x7h"> </div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">LAST LOGIN</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">PASSWORD EXPIRES</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><div class="label font-label svelte-tl4x7h">MFA ACTIVE</div> <div class="value svelte-tl4x7h"><!></div></div> <div class="unit svelte-tl4x7h"><!> <!> <!></div></div>');function Mi(_,s){le(s,!0);let t=G(s,"user",31,()=>n({}));t().roles===void 0&&t(t().roles=[],!0),t().groups===void 0&&t(t().groups=[],!0);let d=C(""),i=C(!1),g=C(void 0),f=C(n(t().language.toUpperCase())),u=C(!!t().user_expires),I=C(n(ys(()=>e(u))?ut(t().user_expires,!0):void 0)),E=C(n([]));ga.subscribe(X=>{a(E,n(X))});let o=C(n([]));fa.subscribe(X=>{a(o,n(X))}),Te(()=>{e(i)&&a(g,n(setTimeout(()=>{a(i,!1),s.onSave()},3e3)))});let $=C(n({}));const m=He().shape({email:he().required("E-Mail is required").email("Bad E-Mail format"),given_name:he().trim().required("Given Name is required").matches(va,"Invalid characters"),family_name:he().nullable().trim().matches(ks,"Invalid characters")});let T=C(n({}));const k=He().shape({birthdate:he().nullable().trim().matches(xs,"Invalid characters"),phone:he().nullable().trim().matches(Es,"Format: +..."),street:he().nullable().trim().matches(Is,"Invalid characters"),zip:wt().nullable().min(1e3).max(999999),city:he().nullable().trim().matches(Na,"Invalid characters"),country:he().nullable().trim().matches(Na,"Invalid characters")});Ne(()=>()=>clearTimeout(e(g)));function h(X){X.code==="Enter"&&y()}async function y(){if(!await w())return;a(d,""),console.log(t().user_values);const X={email:t().email,given_name:t().given_name,family_name:t().family_name||null,language:e(f).toLowerCase(),roles:t().roles,groups:t().groups,enabled:t().enabled,email_verified:t().email_verified,user_expires:null,user_values:t().user_values};if(X.user_values.phone&&(X.user_values.phone=X.user_values.phone.replaceAll(" ","")),X.user_values.zip&&(X.user_values.zip=Number.parseInt(X.user_values.zip)),e(u)){let Le=Ot(e(I));if(!Le){a(d,"Invalid Date Input: User Expires");return}X.user_expires=Le}let Ee=await Ha(t().id,X);if(Ee.ok)a(i,!0);else{let Le=await Ee.json();a(d,n(Le.message))}}async function w(){let X=!0;try{await m.validate(t(),{abortEarly:!1}),a($,n({}))}catch(Ee){a($,n(Ye(Ee))),X=!1}try{await k.validate(t().user_values,{abortEarly:!1}),a(T,n({}))}catch(Ee){a(T,n(Ye(Ee))),X=!1}return X}var b=Oi(),x=c(b),p=l(c(x),2),S=c(p,!0);v(p),v(x);var L=l(x,2);oe(L,"margin-top","-5px");var D=c(L);oe(D,"width","107px");var j=l(c(D),2),N=c(j);Be(N,{get selected(){return t().enabled},set selected(X){t(t().enabled=X,!0)}}),v(j),v(D);var V=l(D,2);oe(V,"width","135px");var R=l(c(V),2),F=c(R);Be(F,{get selected(){return t().email_verified},set selected(X){t(t().email_verified=X,!0)}}),v(R),v(V),v(L);var z=l(L,2);ie(z,{type:"email",autocomplete:"off",placeholder:"E-Mail",get value(){return t().email},set value(X){t(t().email=X,!0)},get error(){return e($).email},set error(X){e($).email=X},$$events:{keypress:h,input:w},children:(X,Ee)=>{q();var Le=B("E-MAIL");r(X,Le)},$$slots:{default:!0}});var O=l(z,2);ie(O,{autocomplete:"off",placeholder:"Given Name",get value(){return t().given_name},set value(X){t(t().given_name=X,!0)},get error(){return e($).given_name},set error(X){e($).given_name=X},$$events:{keypress:h,input:w},children:(X,Ee)=>{q();var Le=B("GIVEN NAME");r(X,Le)},$$slots:{default:!0}});var U=l(O,2);ie(U,{autocomplete:"off",placeholder:"Family Name",get value(){return t().family_name},set value(X){t(t().family_name=X,!0)},get error(){return e($).family_name},set error(X){e($).family_name=X},$$events:{keypress:h,input:w},children:(X,Ee)=>{q();var Le=B("FAMILY NAME");r(X,Le)},$$slots:{default:!0}});var Q=l(U,2),M=l(c(Q),2),W=c(M);kt(W,{options:Ra,get value(){return e(f)},set value(X){a(f,n(X))}}),v(M),v(Q);var J=l(Q,2);ie(J,{autocomplete:"off",placeholder:"Street",get value(){return t().user_values.street},set value(X){t(t().user_values.street=X,!0)},get error(){return e(T).street},set error(X){e(T).street=X},$$events:{keypress:h,input:w},children:(X,Ee)=>{q();var Le=B("STREET");r(X,Le)},$$slots:{default:!0}});var Z=l(J,2);ie(Z,{type:"number",autocomplete:"off",placeholder:"ZIP",min:1e3,max:999999,get value(){return t().user_values.zip},set value(X){t(t().user_values.zip=X,!0)},get error(){return e(T).zip},set error(X){e(T).zip=X},$$events:{keypress:h,input:w},children:(X,Ee)=>{q();var Le=B("ZIP");r(X,Le)},$$slots:{default:!0}});var re=l(Z,2);ie(re,{autocomplete:"off",placeholder:"City",get value(){return t().user_values.city},set value(X){t(t().user_values.city=X,!0)},get error(){return e(T).city},set error(X){e(T).city=X},$$events:{keypress:h,input:w},children:(X,Ee)=>{q();var Le=B("CITY");r(X,Le)},$$slots:{default:!0}});var ve=l(re,2);ie(ve,{autocomplete:"off",placeholder:"Country",get value(){return t().user_values.country},set value(X){t(t().user_values.country=X,!0)},get error(){return e(T).country},set error(X){e(T).country=X},$$events:{keypress:h,input:w},children:(X,Ee)=>{q();var Le=B("COUNTRY");r(X,Le)},$$slots:{default:!0}});var be=l(ve,2);ie(be,{autocomplete:"off",placeholder:"Phone",get value(){return t().user_values.phone},set value(X){t(t().user_values.phone=X,!0)},get error(){return e(T).phone},set error(X){e(T).phone=X},$$events:{keypress:h,input:w},children:(X,Ee)=>{q();var Le=B("PHONE");r(X,Le)},$$slots:{default:!0}});var $e=l(be,2);ie($e,{type:"date",autocomplete:"off",placeholder:"Birthdate",get value(){return t().user_values.birthdate},set value(X){t(t().user_values.birthdate=X,!0)},get error(){return e(T).birthdate},set error(X){e(T).birthdate=X},$$events:{keypress:h,input:w},children:(X,Ee)=>{q();var Le=B("BIRTHDATE");r(X,Le)},$$slots:{default:!0}});var pe=l($e,2);oe(pe,"margin-top","-3px");var je=l(c(pe),2);zt(je,{get options(){return e(E)},searchThreshold:4,get items(){return t().roles},set items(X){t(t().roles=X,!0)}}),v(pe);var fe=l(pe,2),de=l(c(fe),2);zt(de,{get options(){return e(o)},searchThreshold:4,get items(){return t().groups},set items(X){t(t().groups=X,!0)}}),v(fe);var ye=l(fe,2);oe(ye,"margin-top","12px");var we=l(c(ye),2),Pe=c(we);Be(Pe,{get selected(){return e(u)},set selected(X){a(u,n(X))}}),v(we),v(ye);var Ce=l(ye,2);{var xe=X=>{var Ee=Ke(()=>Da(new Date));ie(X,{type:"datetime-local",step:"60",width:"16rem",get min(){return e(Ee)},max:"2099-01-01T00:00",get value(){return e(I)},set value(Le){a(I,n(Le))},$$events:{input:w},children:(Le,St)=>{q();var ae=B("USER EXPIRES");r(Le,ae)},$$slots:{default:!0}})};P(Ce,X=>{e(u)&&X(xe)})}var Re=l(Ce,2);oe(Re,"margin-top","12px");var H=l(c(Re),2),Ie=c(H,!0);K(()=>Y(Ie,ut(t().created_at))),v(H),v(Re);var ge=l(Re,2),Ue=l(c(ge),2),Je=c(Ue);{var rt=X=>{var Ee=B();K(()=>Y(Ee,ut(t().last_login))),r(X,Ee)},vt=X=>{var Ee=B("Never");r(X,Ee)};P(Je,X=>{t().last_login?X(rt):X(vt,!1)})}v(Ue),v(ge);var qe=l(ge,2),Fe=l(c(qe),2),lt=c(Fe);{var xt=X=>{var Ee=B();K(()=>Y(Ee,ut(t().password_expires))),r(X,Ee)},$t=X=>{var Ee=B("Never");r(X,Ee)};P(lt,X=>{t().password_expires?X(xt):X($t,!1)})}v(Fe),v(qe);var Qe=l(qe,2),et=l(c(Qe),2),gt=c(et),ct=Ke(()=>!!t().webauthn_user_id);ea(gt,{get check(){return e(ct)}}),v(et),v(Qe);var It=l(Qe,2),at=c(It);Se(at,{level:1,width:"4rem",$$events:{click:y},children:(X,Ee)=>{q();var Le=B("SAVE");r(X,Le)},$$slots:{default:!0}});var st=l(at,2);{var se=X=>{var Ee=Pi();r(X,Ee)};P(st,X=>{e(i)&&X(se)})}var Ae=l(st,2);{var ze=X=>{var Ee=zi(),Le=c(Ee,!0);v(Ee),K(()=>Y(Le,e(d))),r(X,Ee)};P(Ae,X=>{e(d)&&X(ze)})}v(It),v(b),K(()=>Y(S,t().id)),r(_,b),ne()}var Ui=A('<div class="desc svelte-8ppjyk"><p><b>The user has not initialized this account yet.</b></p> <p>You may send out a new Reset E-Mail, if the user has not received one.</p></div> <!>',1),qi=A(`<div class="desc svelte-8ppjyk"><p><b>This is a passkey only account type.</b></p> <p>This means, that this user is using the passwordless login flow only and does not have any password.</p> <p>If the user has lost all his keys and you have verified everything, you may reset his account type and
                send out a new reset E-Mail, so the user can get access again.</p> <p>To reset the account, navigate to 'MFA' and delete all registered keys for this user.</p></div>`),Gi=A(`<!> <!> <!> <!> <div class="desc svelte-8ppjyk">You can either set and reset a user's password<br> or send out a new reset E-Mail for self-service.</div> <!> <!>`,1),Wi=A('<div class="success svelte-8ppjyk">Success</div>'),Ki=A('<div class="err svelte-8ppjyk"> </div>'),Fi=A('<div class="err svelte-8ppjyk"> </div>'),Vi=A('<div class="container svelte-8ppjyk"><!> <!> <!> <!></div>');function Bi(_,s){le(s,!0);let t=G(s,"user",27,()=>n({}));const d="inherit";let i=C(!1),g=C(""),f=C(""),u=C(!1),I=C(!1),E=C(void 0),o="330px",$=C(void 0),m=C(!1),T=n({new:"",verify:""});Te(()=>{e(I)&&a(E,n(setTimeout(()=>{a(I,!1),s.onSave()},3e3)))}),Ne(async()=>{if(!e($)){let z=await ja(),O=await z.json();z.ok?a($,n(O)):a(f,n(O.message))}});async function k(){return a(f,""),await h()?e(m)?!0:(a(f,"You must follow the password policy"),!1):!1}async function h(){return a(f,""),T.new.length>256?(a(f,"max 256 characters"),!1):T.new!==T.verify?(a(f,"New passwords do not match"),!1):!0}async function y(){let z={email:t().email};a(g,""),a(i,!0);let O=await Nr(z);if(O.ok)a(u,!0);else{let U=await O.json();a(g,n(U.message))}a(i,!1)}async function w(){let z={email:t().email,given_name:t().given_name,family_name:t().family_name,roles:t().roles,groups:t().groups,enabled:t().enabled,email_verified:t().email_verified};if(T.new.length>0){if(!(await h()&&await k()))return;z.password=T.new}a(f,""),a(i,!0);let O=await Ha(t().id,z);if(O.ok)a(I,!0);else{let U=await O.json();a(f,n(U.message))}a(i,!1)}function b(){const z=e($).length_min>24?e($).length_min:24;let O=Ss(z,e($).include_lower_case,e($).include_upper_case,e($).include_digits,e($).include_special);T.new=O,T.verify=O}var x=Vi(),p=c(x);{var S=z=>{var O=Ui(),U=l(ee(O),2);Se(U,{width:d,level:2,get isLoading(){return e(i)},set isLoading(Q){a(i,n(Q))},$$events:{click:y},children:(Q,M)=>{q();var W=B("SEND RESET E-MAIL");r(Q,W)},$$slots:{default:!0}}),r(z,O)},L=z=>{var O=me(),U=ee(O);{var Q=W=>{var J=qi();r(W,J)},M=W=>{var J=Gi(),Z=ee(J);{var re=de=>{Zs(de,{get password(){return T.new},get policy(){return e($)},get accepted(){return e(m)},set accepted(ye){a(m,n(ye))}})};P(Z,de=>{e($)&&de(re)})}var ve=l(Z,2),be=Ke(()=>T.new.length>0&&T.new===T.verify);Wt(ve,{type:"password",get width(){return o},autocomplete:"off",get showCopy(){return e(be)},get value(){return T.new},set value(de){T.new=de},$$events:{blur:h},children:(de,ye)=>{q();var we=B("New Password");r(de,we)},$$slots:{default:!0}});var $e=l(ve,2);Wt($e,{type:"password",get width(){return o},autocomplete:"off",get value(){return T.verify},set value(de){T.verify=de},$$events:{blur:h},children:(de,ye)=>{q();var we=B("New Password");r(de,we)},$$slots:{default:!0}});var pe=l($e,2);Se(pe,{width:d,level:3,$$events:{click:b},children:(de,ye)=>{q();var we=B("GENERATE RANDOM");r(de,we)},$$slots:{default:!0}});var je=l(pe,4);Se(je,{width:d,level:1,get isLoading(){return e(i)},set isLoading(de){a(i,n(de))},$$events:{click:y},children:(de,ye)=>{q();var we=B("SEND RESET E-MAIL");r(de,we)},$$slots:{default:!0}});var fe=l(je,2);Se(fe,{width:d,get isLoading(){return e(i)},set isLoading(de){a(i,n(de))},$$events:{click:w},children:(de,ye)=>{q();var we=B("SAVE PASSWORD");r(de,we)},$$slots:{default:!0}}),r(W,J)};P(U,W=>{t().account_type==="passkey"?W(Q):W(M,!1)},!0)}r(z,O)};P(p,z=>{t().account_type==="new"?z(S):z(L,!1)})}var D=l(p,2);{var j=z=>{var O=Wi();r(z,O)};P(D,z=>{(e(I)||e(u))&&z(j)})}var N=l(D,2);{var V=z=>{var O=Ki(),U=c(O,!0);v(O),K(()=>Y(U,e(f))),r(z,O)};P(N,z=>{e(f)&&z(V)})}var R=l(N,2);{var F=z=>{var O=Fi(),U=c(O,!0);v(O),K(()=>Y(U,e(g))),r(z,O)};P(R,z=>{e(g)&&z(F)})}v(x),r(_,x),ne()}var Ji=A('<div class="err svelte-1jljqe9"> </div>'),Yi=A('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this user?</div> <!> <!></div>');function Hi(_,s){le(s,!0);let t=G(s,"user",27,()=>n({})),d=C(!1),i=C("");async function g(){a(i,""),a(d,!0);let o=await Vr(t().id);if(o.ok)s.onSave();else{let $=await o.json();a(i,n($.message))}a(d,!1)}var f=Yi(),u=l(c(f),2);Se(u,{level:1,width:"5rem",get isLoading(){return e(d)},set isLoading(o){a(d,n(o))},$$events:{click:g},children:(o,$)=>{q();var m=B("DELETE");r(o,m)},$$slots:{default:!0}});var I=l(u,2);{var E=o=>{var $=Ji(),m=c($,!0);v($),K(()=>Y(m,e(i))),r(o,$)};P(I,o=>{e(i)&&o(E)})}v(f),r(_,f),ne()}var Xi=A('<div class="err svelte-1ofwsjt"> </div>'),Zi=A('<div class="success svelte-1ofwsjt">Success</div>'),Qi=A('<div class="container svelte-1ofwsjt"><div class="label svelte-1ofwsjt">Invalidate all existing sessions and refresh tokens for this user?</div> <!> <!></div>');function el(_,s){le(s,!0);let t=G(s,"user",27,()=>n({})),d=C(!1),i=C(""),g=C(!1);async function f(){a(i,""),a(d,!0);let m=await Wr(t().id);if(m.ok)a(g,!0);else{let T=await m.json();a(i,n(T.message))}a(d,!1)}var u=Qi(),I=l(c(u),2);Se(I,{level:1,get isLoading(){return e(d)},set isLoading(m){a(d,n(m))},$$events:{click:f},children:(m,T)=>{q();var k=B("LOGOUT");r(m,k)},$$slots:{default:!0}});var E=l(I,2);{var o=m=>{var T=Xi(),k=c(T,!0);v(T),K(()=>Y(k,e(i))),r(m,T)},$=m=>{var T=me(),k=ee(T);{var h=y=>{var w=Zi();r(y,w)};P(k,y=>{e(g)&&y(h)},!0)}r(m,T)};P(E,m=>{e(i)?m(o):m($,!1)})}v(u),r(_,u),ne()}var tl=A('<div class="success svelte-iv4fzr">Success</div>'),al=A('<div class="err svelte-iv4fzr"> </div>'),sl=A('<div class="container svelte-iv4fzr"><div class="desc svelte-iv4fzr">Set custom user attributes.<br> All Key / Value pairs will be handled as String / String.</div> <!> <!> <!> <!></div>');function rl(_,s){le(s,!0);let t=C(""),d=C(n([])),i=C(!1),g=C(!1);Ne(()=>{I()});async function f(){let w=await ma();if(!w.ok)a(t,"Error fetching attr: "+w.body.message);else return await w.json()}async function u(){let w=await Hr(s.user.id);if(!w.ok)a(t,"Error fetching user attr: "+w.body.message);else return await w.json()}async function I(){let w=await f(),b=w.values;if(w){let x=await u();if(x){let p=new Map;for(let S of x.values)p.set(S.key,S.value||"");for(let S of b){let L=p.get(S.name);L?S.value=L:S.value=""}a(d,n([...b]))}}}async function E(){a(t,""),a(g,!0);let w=[];for(let S of e(d)){let L={key:S.name,value:S.value};w.push(L)}let b={values:w},x=await Xr(s.user.id,b),p=await x.json();x.ok?a(i,!0):a(t,n(p.message)),s.onSave(),a(g,!1)}var o=sl(),$=l(c(o),2);We($,17,()=>e(d),yt,(w,b,x)=>{var p=Ke(()=>e(b).desc||"JSON Value");ie(w,{style:"width: 350px",autocomplete:"off",get placeholder(){return e(p)},get value(){return e(b).value},set value(S){e(b).value=S},children:(S,L)=>{q();var D=B();K(()=>Y(D,e(b).name)),r(S,D)},$$slots:{default:!0}})});var m=l($,2);Se(m,{get isLoading(){return e(g)},level:1,width:"4rem",$$events:{click:E},children:(w,b)=>{q();var x=B("SAVE");r(w,x)},$$slots:{default:!0}});var T=l(m,2);{var k=w=>{var b=tl();r(w,b)};P(T,w=>{e(i)&&w(k)})}var h=l(T,2);{var y=w=>{var b=al(),x=c(b,!0);v(b),K(()=>Y(x,e(t))),r(w,b)};P(h,w=>{e(t)&&w(y)})}v(o),r(_,o),ne()}var il=A('<div class="desc svelte-1a9qw6n">This user does not have any active MFA keys.</div>'),ll=A('<div class="keyContainer svelte-1a9qw6n"><div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Passkey Name:</div> <b> </b></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Key Registered:</div> <span class="font-mono"> </span></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n">Last Usage:</div> <span class="font-mono"> </span></div> <div class="row svelte-1a9qw6n"><div class="label svelte-1a9qw6n"></div> <div class="deleteBtn svelte-1a9qw6n"><!></div></div></div>'),nl=A('<div class="desc svelte-1a9qw6n">You can delete the users MFA / Security Keys.<br> Be careful though, since this <b>cannot be reverted</b> without user interaction.<br> This is useful, if a user lost his keys and he is not able to log in any more.</div> <div class="keysContainer svelte-1a9qw6n"></div>',1),ol=A('<div class="err svelte-1a9qw6n"> </div>'),vl=A('<div class="container svelte-1a9qw6n"><!> <!></div>');function dl(_,s){le(s,!0);let t=G(s,"user",27,()=>n({})),d=C(""),i=C(n([]));Ne(async()=>{await g()});async function g(){let T=await Cs(t().id),k=await T.json();T.ok?a(i,n(k)):console.error("error fetching passkeys: "+k.message)}async function f(T){let k=e(i).length===1,h=await As(t().id,T);if(h.status===200)return await g(),k&&s.onSave(),!0;{let y=await h.json();return a(d,n(y.message)),!1}}var u=vl(),I=c(u);{var E=T=>{var k=il();r(T,k)},o=T=>{var k=nl(),h=l(ee(k),2);We(h,21,()=>e(i),y=>y.name,(y,w)=>{var b=ll(),x=c(b),p=l(c(x),2),S=c(p,!0);v(p),v(x);var L=l(x,2),D=l(c(L),2),j=c(D,!0);K(()=>Y(j,ut(e(w).registered))),v(D),v(L);var N=l(L,2),V=l(c(N),2),R=c(V,!0);K(()=>Y(R,ut(e(w).last_used))),v(V),v(N);var F=l(N,2),z=l(c(F),2),O=c(z);Se(O,{level:4,$$events:{click:()=>f(e(w).name)},children:(U,Q)=>{q();var M=B("DELETE");r(U,M)},$$slots:{default:!0}}),v(z),v(F),v(b),K(()=>Y(S,e(w).name)),r(y,b)}),v(h),r(T,k)};P(I,T=>{e(i).length<1?T(E):T(o,!1)})}var $=l(I,2);{var m=T=>{var k=ol(),h=c(k,!0);v(k),K(()=>Y(h,e(d))),r(T,k)};P($,T=>{e(d)&&T(m)})}v(u),r(_,u),ne()}var cl=A('<div class="container svelte-nw2ucx"><!></div>');function ul(_,s){le(s,!0);var t=cl(),d=c(t);Ks(d,{get userId(){return s.user.id}}),v(t),r(_,t),ne()}var hl=A('<div class="data font-mono svelte-115hohv"> </div>'),pl=A('<div class="data svelte-115hohv"> </div>'),ml=A('<div class="header svelte-115hohv"><!> <!></div>'),gl=A("<div><!></div>"),fl=A("<div><!></div>"),yl=A("<div><!></div>"),wl=A("<div><!></div>"),bl=A("<div><!></div>"),$l=A("<div><!></div>"),_l=A("<div><!></div>"),kl=A("<!> <!>",1),xl=A("<div><!></div>");function ts(_,s){le(s,!0);let t=G(s,"userEmail",3,""),d=G(s,"userId",3,""),i=G(s,"onSave",15),g=C(void 0),f=C(!0),u=C(void 0);const I=["Info","Attributes","Password","MFA","Devices","Logout","Delete"];let E=C(n(I[0]));const o=200,$=o/2;async function m(){const k=await Ts(d());if(k.ok)a(g,n(await k.json()));else{let h=await k.json();console.error(h)}a(f,!1)}function T(){a(u,!1),i()()}Te(()=>{e(u)&&m()}),ot(_,{get show(){return e(u)},set show(k){a(u,n(k))},header:k=>{var h=ml(),y=c(h);Ze(y,{text:"User ID",children:(b,x)=>{var p=hl(),S=c(p,!0);v(p),K(()=>Y(S,d())),r(b,p)},$$slots:{default:!0}});var w=l(y,2);Ze(w,{text:"E-Mail",children:(b,x)=>{var p=pl(),S=c(p,!0);v(p),K(()=>Y(S,t())),r(b,p)},$$slots:{default:!0}}),v(h),r(k,h)},body:k=>{var h=xl(),y=c(h);{var w=x=>{ua(x,{})},b=x=>{var p=kl(),S=ee(p);Dt(S,{labels:I,get selected(){return e(E)},set selected(N){a(E,n(N))}});var L=l(S,2);{var D=N=>{var V=gl(),R=c(V);Mi(R,{get user(){return e(g)},set user(F){a(g,n(F))},get onSave(){return i()},set onSave(F){i(F)}}),v(V),ce(5,V,()=>_e,()=>({delay:$,duration:o})),ce(6,V,()=>_e,()=>({duration:o})),r(N,V)},j=N=>{var V=me(),R=ee(V);{var F=O=>{var U=fl(),Q=c(U);rl(Q,{get user(){return e(g)},set user(M){a(g,n(M))},get onSave(){return i()},set onSave(M){i(M)}}),v(U),ce(5,U,()=>_e,()=>({delay:$,duration:o})),ce(6,U,()=>_e,()=>({duration:o})),r(O,U)},z=O=>{var U=me(),Q=ee(U);{var M=J=>{var Z=yl(),re=c(Z);Bi(re,{get user(){return e(g)},set user(ve){a(g,n(ve))},get onSave(){return i()},set onSave(ve){i(ve)}}),v(Z),ce(5,Z,()=>_e,()=>({delay:$,duration:o})),ce(6,Z,()=>_e,()=>({duration:o})),r(J,Z)},W=J=>{var Z=me(),re=ee(Z);{var ve=$e=>{var pe=wl(),je=c(pe);dl(je,{get user(){return e(g)},set user(fe){a(g,n(fe))},get onSave(){return i()},set onSave(fe){i(fe)}}),v(pe),ce(5,pe,()=>_e,()=>({delay:$,duration:o})),ce(6,pe,()=>_e,()=>({duration:o})),r($e,pe)},be=$e=>{var pe=me(),je=ee(pe);{var fe=ye=>{var we=bl(),Pe=c(we);ul(Pe,{get user(){return e(g)},set user(Ce){a(g,n(Ce))}}),v(we),ce(5,we,()=>_e,()=>({delay:$,duration:o})),ce(6,we,()=>_e,()=>({duration:o})),r(ye,we)},de=ye=>{var we=me(),Pe=ee(we);{var Ce=Re=>{var H=$l(),Ie=c(H);el(Ie,{get user(){return e(g)},set user(ge){a(g,n(ge))}}),v(H),ce(5,H,()=>_e,()=>({delay:$,duration:o})),ce(6,H,()=>_e,()=>({duration:o})),r(Re,H)},xe=Re=>{var H=me(),Ie=ee(H);{var ge=Ue=>{var Je=_l(),rt=c(Je);Hi(rt,{onSave:T,get user(){return e(g)},set user(vt){a(g,n(vt))}}),v(Je),ce(5,Je,()=>_e,()=>({delay:$,duration:o})),ce(6,Je,()=>_e,()=>({duration:o})),r(Ue,Je)};P(Ie,Ue=>{e(E)==="Delete"&&Ue(ge)},!0)}r(Re,H)};P(Pe,Re=>{e(E)==="Logout"?Re(Ce):Re(xe,!1)},!0)}r(ye,we)};P(je,ye=>{e(E)==="Devices"?ye(fe):ye(de,!1)},!0)}r($e,pe)};P(re,$e=>{e(E)==="MFA"?$e(ve):$e(be,!1)},!0)}r(J,Z)};P(Q,J=>{e(E)==="Password"?J(M):J(W,!1)},!0)}r(O,U)};P(R,O=>{e(E)==="Attributes"?O(F):O(z,!1)},!0)}r(N,V)};P(L,N=>{e(E)==="Info"?N(D):N(j,!1)})}r(x,p)};P(y,x=>{e(f)?x(w):x(b,!1)})}v(h),r(k,h)},$$slots:{header:!0,body:!0}}),ne()}var El=A('<div class="header font-label svelte-1y7ceqm">ADD NEW USER</div>'),Il=A('<div class="err svelte-1y7ceqm"> </div>'),Sl=A('<div class="container svelte-1y7ceqm"><!> <!> <!> <div class="language svelte-1y7ceqm"><div class="label svelte-1y7ceqm">LANGUAGE</div> <div style="margin-top: .4rem"><!></div></div> <div class="tiles svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">ROLES</div> <!></div> <div class="tiles svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">GROUPS</div> <!></div> <div class="unit svelte-1y7ceqm"><div class="label font-label svelte-1y7ceqm">LIMIT LIFETIME</div> <div class="value"><!></div></div> <!> <div class="btn svelte-1y7ceqm"><!> <!></div></div>');function Cl(_,s){le(s,!0);let t=G(s,"idx",31,()=>-1),d=C(""),i=C(void 0),g=C("EN"),f=C(!1),u=C(void 0),I=C(n({email:"",family_name:"",given_name:"",roles:[],groups:[]})),E=C(n({}));const o=He().shape({email:he().required("E-Mail is required").email("Bad E-Mail format"),given_name:he().trim().required("Given Name is required").matches(va,"Invalid characters"),family_name:he().trim().required("Family Name is required").matches(va,"Invalid characters")});let $=C(void 0);ga.subscribe(h=>{a($,n(h))});let m=C(void 0);fa.subscribe(h=>{a(m,n(h))});async function T(){if(!await k())return;a(d,"");let h=e(I);if(h.language=e(g).toLowerCase(),e(f)){let w=Ot(e(u));if(!w){a(d,"Invalid Date Input: User Expires");return}h.user_expires=w}let y=await Fr(e(I));if(y.ok)a(I,n({})),a(i,!1),a(I,n({email:"",family_name:"",given_name:"",roles:[],groups:[]})),s.onSave();else{let w=await y.json();a(d,n(w.message))}}async function k(){try{return await o.validate(e(I),{abortEarly:!1}),a(E,n({})),!0}catch(h){return a(E,n(Ye(h))),!1}}ot(_,{get idx(){return t()},set idx(h){t(h)},get show(){return e(i)},set show(h){a(i,n(h))},header:h=>{var y=El();r(h,y)},body:h=>{var y=Sl(),w=c(y);ie(w,{type:"email",autocomplete:"off",placeholder:"E-Mail",get value(){return e(I).email},set value(Z){e(I).email=Z},get error(){return e(E).email},set error(Z){e(E).email=Z},$$events:{input:k},children:(Z,re)=>{q();var ve=B("E-MAIL");r(Z,ve)},$$slots:{default:!0}});var b=l(w,2);ie(b,{autocomplete:"off",placeholder:"Given Name",get value(){return e(I).given_name},set value(Z){e(I).given_name=Z},get error(){return e(E).given_name},set error(Z){e(E).given_name=Z},$$events:{input:k},children:(Z,re)=>{q();var ve=B("GIVEN NAME");r(Z,ve)},$$slots:{default:!0}});var x=l(b,2);ie(x,{autocomplete:"off",placeholder:"Family Name",get value(){return e(I).family_name},set value(Z){e(I).family_name=Z},get error(){return e(E).family_name},set error(Z){e(E).family_name=Z},$$events:{input:k},children:(Z,re)=>{q();var ve=B("FAMILY NAME");r(Z,ve)},$$slots:{default:!0}});var p=l(x,2),S=l(c(p),2),L=c(S);kt(L,{options:Ra,get value(){return e(g)},set value(Z){a(g,n(Z))}}),v(S),v(p);var D=l(p,2),j=l(c(D),2);zt(j,{get options(){return e($)},searchThreshold:4,get items(){return e(I).roles},set items(Z){e(I).roles=Z}}),v(D);var N=l(D,2),V=l(c(N),2);zt(V,{get options(){return e(m)},searchThreshold:4,get items(){return e(I).groups},set items(Z){e(I).groups=Z}}),v(N);var R=l(N,2);oe(R,"margin-top","12px");var F=l(c(R),2),z=c(F);Be(z,{get selected(){return e(f)},set selected(Z){a(f,n(Z))}}),v(F),v(R);var O=l(R,2);{var U=Z=>{ie(Z,{type:"datetime-local",step:"60",width:"18rem",get min(){return new Date().toISOString().split(".")[0]},max:"2099-01-01T00:00",get value(){return e(u)},set value(re){a(u,n(re))},$$events:{input:k},children:(re,ve)=>{q();var be=B("USER EXPIRES");r(re,be)},$$slots:{default:!0}})};P(O,Z=>{e(f)&&Z(U)})}var Q=l(O,2),M=c(Q);Se(M,{level:1,$$events:{click:T},children:(Z,re)=>{q();var ve=B("SAVE");r(Z,ve)},$$slots:{default:!0}});var W=l(M,2);{var J=Z=>{var re=Il(),ve=c(re,!0);v(re),K(()=>Y(ve,e(d))),r(Z,re)};P(W,Z=>{e(d)&&Z(J)})}v(Q),v(y),r(h,y)},$$slots:{header:!0,body:!0}}),ne()}var Al=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0l-3.75-3.75M17.25 21L21 17.25"></path></svg>');function Tl(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=Al();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var Ll=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"></path></svg>');function Nl(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=Ll();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var Rl=A("<option> </option>"),Dl=A('<select class="opts font-label svelte-1ojt600"></select>'),jl=A('<div role="button" tabindex="0" class="icon svelte-1ojt600"><!></div>'),Pl=A('<div class="container svelte-1ojt600"><!> <!></div>');function zl(_,s){le(s,!0);let t=G(s,"items",19,()=>[]),d=G(s,"resItems",15),i=G(s,"options",19,()=>[]),g=G(s,"firstDirReverse",3,!1),f=C(""),u=C(1),I;Ne(()=>{i().length>0&&(a(f,n(i()[0].label)),E()),g()&&$(),o()});function E(){for(let w of i())if(w.label===e(f)){I=w.callback;break}I||console.error("Could not find a valid callback function in order options for label "+e(f))}function o(){if(I){let w=[...t()];w.sort((b,x)=>I(b,x)*e(u)),d([...w])}}function $(){a(u,e(u)*-1),o()}Te(()=>{t()&&o()}),Te(()=>{e(f)&&(E(),o())});var m=Pl(),T=c(m);{var k=w=>{Ze(w,{text:"Order by",yOffset:-30,children:(b,x)=>{var p=Dl();We(p,21,i,yt,(S,L)=>{var D=Rl(),j={},N=c(D,!0);v(D),K(()=>{j!==(j=e(L).label)&&(D.value=(D.__value=e(L).label)==null?"":e(L).label),Y(N,e(L).label)}),r(S,D)}),v(p),Ka(p,()=>e(f),S=>a(f,S)),r(b,p)},$$slots:{default:!0}})};P(T,w=>{i().length>1&&w(k)})}var h=l(T,2);{var y=w=>{var b=jl();b.__click=$;var x=c(b);{var p=L=>{Nl(L,{})},S=L=>{Tl(L,{})};P(x,L=>{e(u)===1?L(p):L(S,!1)})}v(b),Me("keypress",b,$),r(w,b)};P(h,w=>{i().length>0&&w(y)})}v(m),r(_,m),ne()}pt(["click"]);var Ol=A('<div class="divider svelte-16rtgja"></div>'),Ml=A('<div class="container svelte-16rtgja"><div><!></div> <!> <div><!></div></div>');function Lt(_,s){le(s,!0);let t=G(s,"items",31,()=>n([])),d=G(s,"resItems",15),i=G(s,"searchOptions",27,()=>n([])),g=G(s,"orderOptions",27,()=>n([])),f=G(s,"firstDirReverse",3,!1),u=G(s,"useServerSideIdx",15,""),I=G(s,"isSearchFiltered",15,!1),E=G(s,"search",15,""),o=C(n([]));var $=Ml(),m=c($),T=c(m);zl(T,{get items(){return e(o)},get options(){return g()},get firstDirReverse(){return f()},get resItems(){return d()},set resItems(b){d(b)}}),v(m);var k=l(m,2);{var h=b=>{var x=Ol();r(b,x)};P(k,b=>{g().length>0&&b(h)})}var y=l(k,2),w=c(y);es(w,{get options(){return i()},get items(){return t()},set items(b){t(b)},get resItems(){return e(o)},set resItems(b){a(o,n(b))},get useServerSideIdx(){return u()},set useServerSideIdx(b){u(b)},get isSearchFiltered(){return I()},set isSearchFiltered(b){I(b)},get search(){return E()},set search(b){E(b)}}),v(y),v($),r(_,$),ne()}var Ul=(_,s)=>a(s,e(s)-1),ql=A('<div role="button" tabindex="0" class="icon iconLeft svelte-9iw34a"><!></div>'),Gl=(_,s,t)=>a(s,n(e(t))),Wl=A('<div role="button" tabindex="0" class="link noselect svelte-9iw34a"> </div>'),Kl=(_,s)=>a(s,e(s)+1),Fl=A('<div role="button" tabindex="0" class="icon iconRight svelte-9iw34a"><!></div>'),Vl=A('<div class="container svelte-9iw34a"><!> <div class="links svelte-9iw34a"></div> <!> <div class="chunkSize noselect svelte-9iw34a">Entries <!></div> <div class="font-label total svelte-9iw34a"> </div></div>');function jt(_,s){le(s,!0);let t=G(s,"items",27,()=>n([])),d=G(s,"resItems",31,()=>n([]));const i=[5,7,10,15,20,30,50,100],g=16;let f=C(n([])),u=C(1),I=5,E=C(15),o=C(!1),$=C(!1),m=C(n([]));Te(()=>{e(E)&&a(u,1)}),Te(()=>{if(e(E)&&t().length>0){let D=[];for(let j=0;j<t().length;j+=e(E)){const N=t().slice(j,j+e(E));D.push(N)}a(f,n(D)),d(e(f)[e(u)-1])}}),Te(()=>{if(e(u)){let D=[],j=Math.floor(I/2);if(e(f).length<=I){for(let N=1;N<=e(f).length;N++)D.push(N);a(o,!1),a($,!1)}else if(e(u)<=j){for(let N=1;N<=I;N++)D.push(N);a(o,!1),a($,!0)}else if(e(u)>e(f).length-j-1){for(let N=e(f).length-I;N<=e(f).length-1;N++)D.push(N+1);a(o,!0),a($,!1)}else{for(let N=e(u)-j;N<e(u)-j+I;N++)D.push(N);a(o,!0),a($,!0)}a(m,n(D))}});var T=Vl(),k=c(T);{var h=D=>{var j=ql();j.__click=[Ul,u];var N=c(j);Zt(N,{width:g}),v(j),Me("keypress",j,()=>a(u,e(u)-1)),r(D,j)};P(k,D=>{e(o)&&D(h)})}var y=l(k,2);We(y,21,()=>e(m),yt,(D,j)=>{var N=Wl();N.__click=[Gl,u,j];var V=c(N,!0);v(N),K(()=>{Et(N,"selected",e(u)===e(j)),Y(V,e(j))}),Me("keypress",N,()=>a(u,n(e(j)))),r(D,N)}),v(y);var w=l(y,2);{var b=D=>{var j=Fl();j.__click=[Kl,u];var N=c(j);Zt(N,{width:g}),v(j),Me("keypress",j,()=>a(u,e(u)+1)),r(D,j)};P(w,D=>{e($)&&D(b)})}var x=l(w,2),p=l(c(x));kt(p,{options:i,width:"50px",get value(){return e(E)},set value(D){a(E,n(D))}}),v(x);var S=l(x,2),L=c(S);v(S),v(T),K(()=>Y(L,`Total: ${t().length??""}`)),r(_,T),ne()}pt(["click"]);var Bl=(_,s)=>s()(0,!0),Jl=A('<div role="button" tabindex="0" class="icon iconLeft svelte-1jvef4m"><!></div>'),Yl=(_,s)=>s()(0,!1),Hl=A('<div role="button" tabindex="0" class="icon iconRight svelte-1jvef4m"><!></div>'),Xl=A('<div class="font-label total svelte-1jvef4m"> </div>'),Zl=A('<div class="container svelte-1jvef4m"><!> <div class="links svelte-1jvef4m"><div class="pageNo noselect svelte-1jvef4m"> </div></div> <!> <div class="chunkSize noselect svelte-1jvef4m">Entries <!></div> <!></div>');function as(_,s){le(s,!0);let t=G(s,"itemsTotal",3,0),d=G(s,"sspPage",11,1),i=G(s,"sspPageSize",11,15),g=G(s,"sspContinuationToken",11,""),f=G(s,"fetchPageCallback",3,(D,j)=>{}),u=G(s,"sspPageSizeChange",3,D=>{});const I=[2,3,5,7,10,15,20,30,50,100],E=16;let o=C(n(i()));Te(()=>{e(o)&&(console.log("page size change in pagination server"),u()(e(o)))});var $=Zl(),m=c($);{var T=D=>{var j=Jl();j.__click=[Bl,f];var N=c(j);Zt(N,{width:E}),v(j),Me("keypress",j,()=>f()(0,!0)),r(D,j)};P(m,D=>{d()!==1&&D(T)})}var k=l(m,2),h=c(k),y=c(h,!0);v(h),v(k);var w=l(k,2);{var b=D=>{var j=Hl();j.__click=[Yl,f];var N=c(j);Zt(N,{width:E}),v(j),Me("keypress",j,()=>f()(0,!1)),r(D,j)};P(w,D=>{g()&&D(b)})}var x=l(w,2),p=l(c(x));kt(p,{options:I,width:"50px",get value(){return e(o)},set value(D){a(o,n(D))}}),v(x);var S=l(x,2);{var L=D=>{var j=Xl(),N=c(j);v(j),K(()=>Y(N,`Total: ${t()??""}`)),r(D,j)};P(S,D=>{t()&&t()>0&&D(L)})}v($),K(()=>Y(y,d())),r(_,$),ne()}pt(["click"]);var Ql=A('<div class="svelte-1gwjtx9"><!></div>'),en=A('<div class="svelte-1gwjtx9"><!></div>'),tn=A(' <div class="content"><!> <!> <div id="users" class="svelte-1gwjtx9"><!></div> <!></div>',1);function an(_,s){le(s,!0);let t=C(""),d=C(n([])),i=C(n([])),g=C(n([])),f=C(""),u=C(!1),I=C(""),E=C(0),o=C(15),$=C(""),m=C(1),T=C(n([{label:"E-Mail",callback:(M,W)=>M.email.toLowerCase().includes(W.toLowerCase())},{label:"ID",callback:(M,W)=>M.id.toLowerCase().includes(W.toLowerCase())}])),k=C(n([{label:"E-Mail",callback:(M,W)=>M.email.localeCompare(W.email)},{label:"ID",callback:(M,W)=>M.id.localeCompare(W.id)},{label:"Created",callback:(M,W)=>M.created_at<W.created_at},{label:"Last Login",callback:(M,W)=>{let J=M.last_login||9999999999,Z=W.last_login||9999999999;return J<Z}}]));Ne(async()=>{h(),b(),x()});async function h(M,W,J,Z){let re;if(M===!0?J&&e(m)===2?re=await Ya(Z||e(o),W,void 0,!1):re=await Ya(Z||e(o),W,e($),J):re=await Kr(),!re.ok)a(t,"Error fetching users: "+re.body.message);else{re.status===206?(a(o,n(Number.parseInt(re.headers.get("x-page-size"),10))),a(f,"user"),re.headers.get("x-continuation-token"),a($,n(re.headers.get("x-continuation-token")))):a(f,""),a(E,n(re.headers.get("x-user-count")));let ve=await re.json();a(d,n([...ve])),a(i,n([...ve]))}}async function y(M,W){await h(!0,M,W),W?a(m,e(m)-1):a(m,e(m)+1)}async function w(M){a($,""),await h(!0,0,!1,M),a(m,1)}async function b(){let M=await Xa();if(!M.ok)a(t,"Error fetching roles: "+M.body.message);else{let W=await M.json();hi.set(W),ga.set(W.map(J=>J.name))}}async function x(){let M=await Ba();if(!M.ok)a(t,"Error fetching groups: "+M.body.message);else{let W=await M.json();pi.set(W),fa.set(W.map(J=>J.name))}}function p(){h(),b(),x(),a(I,"")}q();var S=tn(),L=ee(S),D=l(L),j=c(D);Lt(j,{get items(){return e(d)},get resItems(){return e(i)},set resItems(M){a(i,n(M))},get searchOptions(){return e(T)},set searchOptions(M){a(T,n(M))},get orderOptions(){return e(k)},set orderOptions(M){a(k,n(M))},get useServerSideIdx(){return e(f)},set useServerSideIdx(M){a(f,n(M))},get isSearchFiltered(){return e(u)},set isSearchFiltered(M){a(u,n(M))},get search(){return e(I)},set search(M){a(I,n(M))}});var N=l(j,2);Cl(N,{onSave:p});var V=l(N,2),R=c(V);{var F=M=>{var W=me(),J=ee(W);We(J,17,()=>e(i),Z=>Z.id,(Z,re)=>{var ve=Ql(),be=c(ve);ts(be,{get userId(){return e(re).id},get userEmail(){return e(re).email},onSave:p}),v(ve),r(Z,ve)}),r(M,W)},z=M=>{var W=me(),J=ee(W);We(J,17,()=>e(g),Z=>Z.id,(Z,re)=>{var ve=en(),be=c(ve);ts(be,{get userId(){return e(re).id},get userEmail(){return e(re).email},onSave:p}),v(ve),r(Z,ve)}),r(M,W)};P(R,M=>{e(f)&&!e(u)?M(F):M(z,!1)})}v(V);var O=l(V,2);{var U=M=>{as(M,{get itemsTotal(){return e(E)},fetchPageCallback:y,sspPageSizeChange:w,get sspPage(){return e(m)},set sspPage(W){a(m,n(W))},get sspPageSize(){return e(o)},set sspPageSize(W){a(o,n(W))},get sspContinuationToken(){return e($)},set sspContinuationToken(W){a($,n(W))}})},Q=M=>{jt(M,{get items(){return e(i)},set items(W){a(i,n(W))},get resItems(){return e(g)},set resItems(W){a(g,n(W))}})};P(O,M=>{e(f)&&!e(u)?M(U):M(Q,!1)})}v(D),K(()=>Y(L,`${e(t)??""} `)),r(_,S),ne()}var sn=A('<div class="content svelte-1mqfi4i"><!></div>');function bt(_,s){le(s,!0);let t=G(s,"eventsCollapsed",11,!0),d=G(s,"eventsWide",11,!1);var i=sn(),g=c(i);At(g,()=>s.children??Ct),v(i),K(()=>{Et(i,"mr",!t()&&!d()),Et(i,"mrCollapsed",t()&&!d()),Et(i,"mrWide",!t()&&d())}),r(_,i),ne()}var rn=A('<div class="success svelte-17in7jd">Success</div>'),ln=A('<div class="mainErr err svelte-17in7jd"> </div>'),nn=A('<div class="container svelte-17in7jd"><div class="unit svelte-17in7jd"><div class="label font-label svelte-17in7jd">ID</div> <div class="value font-mono svelte-17in7jd"> </div></div> <!> <!> <!> <!></div>');function on(_,s){le(s,!0);let t=G(s,"role",31,()=>n({})),d=C(""),i=C(!1),g=C(void 0);Te(()=>{e(i)&&a(g,n(setTimeout(()=>{a(i,!1),s.onSave()},2e3)))}),Ne(()=>()=>clearTimeout(e(g)));let f=C(n({}));const u=He().shape({name:he().trim().matches(qt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});async function I(){if(a(d,""),!await E()){a(d,"Invalid input");return}let S={role:t().name.trim()},L=await ni(t().id,S);if(L.ok)a(i,!0);else{let D=await L.json();a(d,n(D.message))}}async function E(){try{return await u.validate(t(),{abortEarly:!1}),a(f,n({})),!0}catch(S){return a(f,n(Ye(S))),!1}}var o=nn(),$=c(o),m=l(c($),2),T=c(m,!0);v(m),v($);var k=l($,2),h=Ke(()=>t().name==="rauthy_admin");ie(k,{autocomplete:"off",placeholder:"Role Name",get disabled(){return e(h)},get value(){return t().name},set value(S){t(t().name=S,!0)},get error(){return e(f).name},set error(S){e(f).name=S},$$events:{input:E},children:(S,L)=>{q();var D=B("ROLE NAME");r(S,D)},$$slots:{default:!0}});var y=l(k,2);Se(y,{level:1,width:"4rem",$$events:{click:I},children:(S,L)=>{q();var D=B("SAVE");r(S,D)},$$slots:{default:!0}});var w=l(y,2);{var b=S=>{var L=rn();r(S,L)};P(w,S=>{e(i)&&S(b)})}var x=l(w,2);{var p=S=>{var L=ln(),D=c(L,!0);v(L),K(()=>Y(D,e(d))),r(S,L)};P(x,S=>{e(d)&&S(p)})}v(o),K(()=>Y(T,t().id)),r(_,o),ne()}var vn=A('<div class="label svelte-1jljqe9">Anti-Lockout Rule: The rauthy_admin role cannot be deleted.</div>'),dn=A('<div class="err svelte-1jljqe9"> </div>'),cn=A('<div class="label svelte-1jljqe9">Are you sure, you want to delete this role?</div> <!> <!>',1),un=A('<div class="container svelte-1jljqe9"><!></div>');function hn(_,s){le(s,!0);let t=G(s,"role",19,()=>({})),d=C(!1),i=C("");async function g(){a(i,""),a(d,!0);let o=await oi(t().id);if(o.ok)s.onSave();else{let $=await o.json();a(i,n($.message))}a(d,!1)}var f=un(),u=c(f);{var I=o=>{var $=vn();r(o,$)},E=o=>{var $=cn(),m=l(ee($),2);Se(m,{level:1,get isLoading(){return e(d)},set isLoading(h){a(d,n(h))},$$events:{click:g},children:(h,y)=>{q();var w=B("DELETE");r(h,w)},$$slots:{default:!0}});var T=l(m,2);{var k=h=>{var y=dn(),w=c(y,!0);v(y),K(()=>Y(w,e(i))),r(h,y)};P(T,h=>{e(i)&&h(k)})}r(o,$)};P(u,o=>{t().name==="rauthy_admin"?o(I):o(E,!1)})}v(f),r(_,f),ne()}var pn=A('<div class="data font-mono svelte-115hohv"> </div>'),mn=A('<div class="data svelte-115hohv"> </div>'),gn=A('<div class="header svelte-115hohv"><!> <!></div>'),fn=A("<div><!></div>"),yn=A("<div><!></div>"),wn=A("<div><!> <!></div>");function bn(_,s){le(s,!0);let t=G(s,"role",31,()=>n({})),d=G(s,"onSave",15),i=C(void 0);const g=["Config","Delete"];let f=C(n(g[0]));const u=200,I=u/2;function E(){a(i,!1),d()()}ot(_,{get show(){return e(i)},set show(o){a(i,n(o))},header:o=>{var $=gn(),m=c($);Ze(m,{text:"Role ID",children:(k,h)=>{var y=pn(),w=c(y,!0);v(y),K(()=>Y(w,t().id)),r(k,y)},$$slots:{default:!0}});var T=l(m,2);Ze(T,{text:"Role Name",children:(k,h)=>{var y=mn(),w=c(y,!0);v(y),K(()=>Y(w,t().name)),r(k,y)},$$slots:{default:!0}}),v($),r(o,$)},body:o=>{var $=wn(),m=c($);Dt(m,{labels:g,get selected(){return e(f)},set selected(y){a(f,n(y))}});var T=l(m,2);{var k=y=>{var w=fn(),b=c(w);on(b,{get role(){return t()},set role(x){t(x)},get onSave(){return d()},set onSave(x){d(x)}}),v(w),ce(5,w,()=>_e,()=>({delay:I,duration:u})),ce(6,w,()=>_e,()=>({duration:u})),r(y,w)},h=y=>{var w=me(),b=ee(w);{var x=p=>{var S=yn(),L=c(S);hn(L,{get role(){return t()},onSave:E}),v(S),ce(5,S,()=>_e,()=>({delay:I,duration:u})),ce(6,S,()=>_e,()=>({duration:u})),r(p,S)};P(b,p=>{e(f)==="Delete"&&p(x)},!0)}r(y,w)};P(T,y=>{e(f)==="Config"?y(k):y(h,!1)})}v($),r(o,$)},$$slots:{header:!0,body:!0}}),ne()}var $n=A('<div class="header font-label svelte-r30xs6">ADD NEW ROLE</div>'),_n=A('<div class="success svelte-r30xs6">Success</div>'),kn=A('<div class="err svelte-r30xs6"> </div>'),xn=A('<div class="container svelte-r30xs6"><!> <!> <!> <!></div>');function En(_,s){le(s,!0);let t=G(s,"idx",31,()=>-1),d=C(void 0),i=C(n({role:""})),g=C(""),f=C(!1),u=C(void 0),I=C(n({}));const E=He().shape({role:he().trim().matches(qt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});Te(()=>{e(f)&&a(u,n(setTimeout(()=>{a(f,!1),a(i,n({role:""})),a(d,!1),s.onSave()},1500)))}),Ne(()=>()=>clearTimeout(e(u)));async function o(){if(a(g,""),!await $()){a(g,"Invalid input");return}e(i).role=e(i).role.trim();let m=await li(e(i));if(m.ok)a(f,!0);else{let T=await m.json();a(g,n(T.message))}}async function $(){try{return await E.validate(e(i),{abortEarly:!1}),a(I,n({})),!0}catch(m){return a(I,n(Ye(m))),!1}}ot(_,{get idx(){return t()},set idx(m){t(m)},get show(){return e(d)},set show(m){a(d,n(m))},header:m=>{var T=$n();r(m,T)},body:m=>{var T=xn(),k=c(T);ie(k,{autocomplete:"off",placeholder:"Role Name",get value(){return e(i).role},set value(p){e(i).role=p},get error(){return e(I).role},set error(p){e(I).role=p},$$events:{input:$},children:(p,S)=>{q();var L=B("ROLE NAME");r(p,L)},$$slots:{default:!0}});var h=l(k,2);Se(h,{level:1,width:"4rem",$$events:{click:o},children:(p,S)=>{q();var L=B("SAVE");r(p,L)},$$slots:{default:!0}});var y=l(h,2);{var w=p=>{var S=_n();r(p,S)};P(y,p=>{e(f)&&p(w)})}var b=l(y,2);{var x=p=>{var S=kn(),L=c(S,!0);v(S),K(()=>Y(L,e(g))),r(p,S)};P(b,p=>{e(g)&&p(x)})}v(T),r(m,T)},$$slots:{header:!0,body:!0}}),ne()}var In=A('<div class="svelte-161tj4u"><!></div>'),Sn=A(' <div class="content"><!> <!> <div id="roles" class="svelte-161tj4u"></div> <!> <div style="height: 20px"></div></div>',1);function Cn(_,s){le(s,!0);let t=C(""),d=C(n([])),i=C(n([])),g=C(n([])),f=C(""),u=[{label:"Name",callback:(b,x)=>b.name.toLowerCase().includes(x.toLowerCase())},{label:"ID",callback:(b,x)=>b.id.toLowerCase().includes(x.toLowerCase())}],I=[{label:"Name",callback:(b,x)=>b.name.localeCompare(x.name)},{label:"ID",callback:(b,x)=>b.id.localeCompare(x.id)}];Ne(async()=>{E()});async function E(){let b=await Xa(),x=await b.json();b.ok?a(d,n([...x])):a(t,n(x.message))}function o(){E(),a(f,"")}q();var $=Sn(),m=ee($),T=l(m),k=c(T);Lt(k,{get items(){return e(d)},searchOptions:u,orderOptions:I,get resItems(){return e(i)},set resItems(b){a(i,n(b))},get search(){return e(f)},set search(b){a(f,n(b))}});var h=l(k,2);En(h,{onSave:o});var y=l(h,2);We(y,23,()=>e(g),b=>b.id,(b,x,p)=>{var S=In(),L=c(S);bn(L,{onSave:o,get role(){return e(d)[e(p)]},set role(D){e(d)[e(p)]=D}}),v(S),r(b,S)}),v(y);var w=l(y,2);jt(w,{get items(){return e(i)},set items(b){a(i,n(b))},get resItems(){return e(g)},set resItems(b){a(g,n(b))}}),q(2),v(T),K(()=>Y(m,`${e(t)??""} `)),r(_,$),ne()}var An=A('<div class="header font-label svelte-r30xs6">ADD NEW GROUP</div>'),Tn=A('<div class="success svelte-r30xs6">Success</div>'),Ln=A('<div class="err svelte-r30xs6"> </div>'),Nn=A('<div class="container svelte-r30xs6"><!> <!> <!> <!></div>');function Rn(_,s){le(s,!0);let t=G(s,"idx",31,()=>-1),d=C(void 0),i=C(n({group:""})),g=C(""),f=C(!1),u=C(void 0),I=C(n({}));const E=He().shape({group:he().trim().matches(qt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});Te(()=>{e(f)&&a(u,n(setTimeout(()=>{s.onSave(),a(f,!1),a(i,n({group:""})),a(d,!1)},1500)))}),Ne(()=>()=>clearTimeout(e(u)));async function o(){if(a(g,""),!await $()){a(g,"Invalid input");return}e(i).group=e(i).group.trim();let m=await Ir(e(i));if(m.ok)a(f,!0);else{let T=await m.json();a(g,n(T.message))}}async function $(){try{return await E.validate(e(i),{abortEarly:!1}),a(I,n({})),!0}catch(m){return a(I,n(Ye(m))),!1}}ot(_,{get idx(){return t()},set idx(m){t(m)},get show(){return e(d)},set show(m){a(d,n(m))},header:m=>{var T=An();r(m,T)},body:m=>{var T=Nn(),k=c(T);ie(k,{autocomplete:"off",placeholder:"Group Name",get value(){return e(i).group},set value(p){e(i).group=p},get error(){return e(I).group},set error(p){e(I).group=p},$$events:{input:$},children:(p,S)=>{q();var L=B("GROUP NAME");r(p,L)},$$slots:{default:!0}});var h=l(k,2);Se(h,{level:1,width:"4rem",$$events:{click:o},children:(p,S)=>{q();var L=B("SAVE");r(p,L)},$$slots:{default:!0}});var y=l(h,2);{var w=p=>{var S=Tn();r(p,S)};P(y,p=>{e(f)&&p(w)})}var b=l(y,2);{var x=p=>{var S=Ln(),L=c(S,!0);v(S),K(()=>Y(L,e(g))),r(p,S)};P(b,p=>{e(g)&&p(x)})}v(T),r(m,T)},$$slots:{header:!0,body:!0}}),ne()}var Dn=A('<div class="success svelte-17in7jd">Success</div>'),jn=A('<div class="mainErr err svelte-17in7jd"> </div>'),Pn=A('<div class="container svelte-17in7jd"><div class="unit svelte-17in7jd"><div class="label font-label svelte-17in7jd">ID</div> <div class="value font-mono svelte-17in7jd"> </div></div> <!> <!> <!> <!></div>');function zn(_,s){le(s,!0);let t=G(s,"group",31,()=>n({})),d=C(""),i=C(!1),g=C(void 0);Te(()=>{e(i)&&a(g,n(setTimeout(()=>{a(i,!1),s.onSave()},2e3)))}),Ne(()=>()=>clearTimeout(e(g)));let f=C(n({}));const u=He().shape({name:he().trim().matches(qt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});async function I(){if(a(d,""),!await E()){a(d,"Invalid input");return}let p={group:t().name.trim()},S=await Sr(t().id,p);if(S.ok)a(i,!0);else{let L=await S.json();a(d,n(L.message))}}async function E(){try{return await u.validate(t(),{abortEarly:!1}),a(f,n({})),!0}catch(p){return a(f,n(Ye(p))),!1}}var o=Pn(),$=c(o),m=l(c($),2),T=c(m,!0);v(m),v($);var k=l($,2);ie(k,{autocomplete:"off",placeholder:"Group Name",get value(){return t().name},set value(p){t(t().name=p,!0)},get error(){return e(f).name},set error(p){e(f).name=p},$$events:{input:E},children:(p,S)=>{q();var L=B("GROUP NAME");r(p,L)},$$slots:{default:!0}});var h=l(k,2);Se(h,{level:1,width:"4rem",$$events:{click:I},children:(p,S)=>{q();var L=B("SAVE");r(p,L)},$$slots:{default:!0}});var y=l(h,2);{var w=p=>{var S=Dn();r(p,S)};P(y,p=>{e(i)&&p(w)})}var b=l(y,2);{var x=p=>{var S=jn(),L=c(S,!0);v(S),K(()=>Y(L,e(d))),r(p,S)};P(b,p=>{e(d)&&p(x)})}v(o),K(()=>Y(T,t().id)),r(_,o),ne()}var On=A('<div class="err svelte-1jljqe9"> </div>'),Mn=A('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this group?</div> <!> <!></div>');function Un(_,s){le(s,!0);let t=G(s,"group",19,()=>({})),d=C(!1),i=C("");async function g(){a(i,""),a(d,!0);let o=await Cr(t().id);if(o.ok)s.onSave();else{let $=await o.json();a(i,n($.message))}a(d,!1)}var f=Mn(),u=l(c(f),2);Se(u,{level:1,get isLoading(){return e(d)},set isLoading(o){a(d,n(o))},$$events:{click:g},children:(o,$)=>{q();var m=B("DELETE");r(o,m)},$$slots:{default:!0}});var I=l(u,2);{var E=o=>{var $=On(),m=c($,!0);v($),K(()=>Y(m,e(i))),r(o,$)};P(I,o=>{e(i)&&o(E)})}v(f),r(_,f),ne()}var qn=A('<div class="data font-mono svelte-115hohv"> </div>'),Gn=A('<div class="data svelte-115hohv"> </div>'),Wn=A('<div class="header svelte-115hohv"><!> <!></div>'),Kn=A("<div><!></div>"),Fn=A("<div><!></div>"),Vn=A("<div><!> <!></div>");function Bn(_,s){le(s,!0);let t=G(s,"group",31,()=>n({})),d=C(void 0);const i=["Config","Delete"];let g=C(n(i[0]));const f=200,u=f/2;function I(){a(d,!1),s.onSave()}ot(_,{get show(){return e(d)},set show(E){a(d,n(E))},header:E=>{var o=Wn(),$=c(o);Ze($,{text:"Group ID",children:(T,k)=>{var h=qn(),y=c(h,!0);v(h),K(()=>Y(y,t().id)),r(T,h)},$$slots:{default:!0}});var m=l($,2);Ze(m,{text:"Group Name",children:(T,k)=>{var h=Gn(),y=c(h,!0);v(h),K(()=>Y(y,t().name)),r(T,h)},$$slots:{default:!0}}),v(o),r(E,o)},body:E=>{var o=Vn(),$=c(o);Dt($,{labels:i,get selected(){return e(g)},set selected(h){a(g,n(h))}});var m=l($,2);{var T=h=>{var y=Kn(),w=c(y);zn(w,{get onSave(){return s.onSave},get group(){return t()},set group(b){t(b)}}),v(y),ce(5,y,()=>_e,()=>({delay:u,duration:f})),ce(6,y,()=>_e,()=>({duration:f})),r(h,y)},k=h=>{var y=me(),w=ee(y);{var b=x=>{var p=Fn(),S=c(p);Un(S,{get group(){return t()},onSave:I}),v(p),ce(5,p,()=>_e,()=>({delay:u,duration:f})),ce(6,p,()=>_e,()=>({duration:f})),r(x,p)};P(w,x=>{e(g)==="Delete"&&x(b)},!0)}r(h,y)};P(m,h=>{e(g)==="Config"?h(T):h(k,!1)})}v(o),r(E,o)},$$slots:{header:!0,body:!0}}),ne()}var Jn=A('<div class="svelte-106k2r5"><!></div>'),Yn=A(' <div class="content"><!> <!> <div id="groups" class="svelte-106k2r5"></div> <!> <div style="height: 20px"></div></div>',1);function Hn(_,s){le(s,!0);let t=C(""),d=C(n([])),i=C(n([])),g=C(n([])),f=[{label:"Name",callback:(w,b)=>w.name.toLowerCase().includes(b.toLowerCase())},{label:"ID",callback:(w,b)=>w.id.toLowerCase().includes(b.toLowerCase())}],u=[{label:"Name",callback:(w,b)=>w.name.localeCompare(b.name)},{label:"ID",callback:(w,b)=>w.id.localeCompare(b.id)}];Ne(async()=>{I()});async function I(){let w=await Ba(),b=await w.json();w.ok?a(d,n([...b])):a(t,n(b.message))}function E(){I()}q();var o=Yn(),$=ee(o),m=l($),T=c(m);Lt(T,{get items(){return e(d)},searchOptions:f,orderOptions:u,get resItems(){return e(i)},set resItems(w){a(i,n(w))}});var k=l(T,2);Rn(k,{onSave:E});var h=l(k,2);We(h,23,()=>e(g),w=>w.id,(w,b,x)=>{let p=x;var S=Jn(),L=c(S);Bn(L,{onSave:E,get group(){return e(g)[e(p)]},set group(D){e(g)[e(p)]=D}}),v(S),r(w,S)}),v(h);var y=l(h,2);jt(y,{get items(){return e(i)},set items(w){a(i,n(w))},get resItems(){return e(g)},set resItems(w){a(g,n(w))}}),q(2),v(m),K(()=>Y($,`${e(t)??""} `)),r(_,o),ne()}var Xn=A('<div class="header font-label svelte-r30xs6">ADD NEW SCOPE</div>'),Zn=A('<div class="success svelte-r30xs6">Success</div>'),Qn=A('<div class="err svelte-r30xs6"> </div>'),eo=A('<div class="container svelte-r30xs6"><!> <!> <!> <!></div>');function to(_,s){le(s,!0);let t=G(s,"idx",31,()=>-1),d=C(void 0),i=C(n({scope:""})),g=C(""),f=C(!1),u=C(void 0),I=C(n({}));const E=He().shape({scope:he().trim().matches(qt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});Te(()=>{e(f)&&a(u,n(setTimeout(()=>{s.onSave(),a(f,!1),a(i,n({scope:""})),a(d,!1)},1500)))}),Ne(()=>()=>clearTimeout(e(u)));async function o(){if(a(g,""),!await $()){a(g,"Invalid input");return}e(i).scope=e(i).scope.trim();let m=await vi(e(i));if(m.ok)a(f,!0);else{let T=await m.json();a(g,n(T.message))}}async function $(){try{return await E.validate(e(i),{abortEarly:!1}),a(I,n({})),!0}catch(m){return a(I,n(Ye(m))),!1}}ot(_,{get idx(){return t()},set idx(m){t(m)},get show(){return e(d)},set show(m){a(d,n(m))},header:m=>{var T=Xn();r(m,T)},body:m=>{var T=eo(),k=c(T);ie(k,{autocomplete:"off",placeholder:"Scope Name",get value(){return e(i).scope},set value(p){e(i).scope=p},get error(){return e(I).scope},set error(p){e(I).scope=p},$$events:{input:$},children:(p,S)=>{q();var L=B("SCOPE NAME");r(p,L)},$$slots:{default:!0}});var h=l(k,2);Se(h,{level:1,width:"4rem",$$events:{click:o},children:(p,S)=>{q();var L=B("SAVE");r(p,L)},$$slots:{default:!0}});var y=l(h,2);{var w=p=>{var S=Zn();r(p,S)};P(y,p=>{e(f)&&p(w)})}var b=l(y,2);{var x=p=>{var S=Qn(),L=c(S,!0);v(S),K(()=>Y(L,e(g))),r(p,S)};P(b,p=>{e(g)&&p(x)})}v(T),r(m,T)},$$slots:{header:!0,body:!0}}),ne()}var ao=A('<div class="desc svelte-guvobw"><p>Custom mappings cannot be done for OpenID default scopes and their names cannot be changed.</p></div>'),so=A('<div class="desc svelte-guvobw"><p>You can map custom scopes to attributes.<br> All additional attributes, that were configured, can have a custom value for each user.<br> When they are mapped to a scope, they can be included in the Access and / or ID Tokens.</p></div> <div class="unit svelte-guvobw"><div class="label svelte-guvobw">ACCESS TOKEN MAPPINGS</div> <!></div> <div class="unit svelte-guvobw"><div class="label svelte-guvobw">ID TOKEN MAPPINGS</div> <!></div>',1),ro=A('<div class="success svelte-guvobw">Success</div>'),io=A('<div class="mainErr err svelte-guvobw"> </div>'),lo=A("<!> <!> <!>",1),no=A('<div class="container svelte-guvobw"><div class="unit svelte-guvobw"><div class="label font-label svelte-guvobw">ID</div> <div class="value font-mono svelte-guvobw"> </div></div> <!> <div class="separator"></div> <!> <!></div>');function oo(_,s){le(s,!0);let t=G(s,"attrs",27,()=>n([])),d=G(s,"scope",31,()=>n({})),i=C(""),g=C(!1),f=C(void 0),u=C(!1),I=C(n([]));Te(()=>{e(g)&&a(f,n(setTimeout(()=>{a(g,!1),s.onSave()},2e3)))}),Te(()=>{t()&&a(I,n(t().map(D=>D.name)))}),Ne(()=>(a(u,n(Pa(d().name))),()=>clearTimeout(e(f))));let E=C(n({}));const o=He().shape({name:he().trim().matches(qt,"Can only contain: 'a-z0-9-_/:*', length: 2-64")});async function $(){if(a(i,""),!await m()){a(i,"Invalid input");return}let D={scope:d().name.trim()};d().attr_include_access.length>0&&(D.attr_include_access=d().attr_include_access),d().attr_include_id.length>0&&(D.attr_include_id=d().attr_include_id);let j=await di(d().id,D);if(j.ok)a(g,!0);else{let N=await j.json();a(i,n(N.message))}}async function m(){try{return await o.validate(d(),{abortEarly:!1}),a(E,n({})),!0}catch(D){return a(E,n(Ye(D))),!1}}var T=no(),k=c(T),h=l(c(k),2),y=c(h,!0);v(h),v(k);var w=l(k,2);ie(w,{autocomplete:"off",placeholder:"Scope Name",get disabled(){return e(u)},get value(){return d().name},set value(D){d(d().name=D,!0)},get error(){return e(E).name},set error(D){e(E).name=D},$$events:{input:m},children:(D,j)=>{q();var N=B("SCOPE NAME");r(D,N)},$$slots:{default:!0}});var b=l(w,4);{var x=D=>{var j=ao();r(D,j)},p=D=>{var j=so(),N=l(ee(j),2);oe(N,"margin-top","-3px");var V=l(c(N),2);zt(V,{get options(){return e(I)},searchThreshold:4,get items(){return d().attr_include_access},set items(z){d(d().attr_include_access=z,!0)}}),v(N);var R=l(N,2);oe(R,"margin-top","-3px");var F=l(c(R),2);zt(F,{get options(){return e(I)},searchThreshold:4,get items(){return d().attr_include_id},set items(z){d(d().attr_include_id=z,!0)}}),v(R),r(D,j)};P(b,D=>{e(u)?D(x):D(p,!1)})}var S=l(b,2);{var L=D=>{var j=lo(),N=ee(j);Se(N,{level:1,width:"4rem",$$events:{click:$},children:(O,U)=>{q();var Q=B("SAVE");r(O,Q)},$$slots:{default:!0}});var V=l(N,2);{var R=O=>{var U=ro();r(O,U)};P(V,O=>{e(g)&&O(R)})}var F=l(V,2);{var z=O=>{var U=io(),Q=c(U,!0);v(U),K(()=>Y(Q,e(i))),r(O,U)};P(F,O=>{e(i)&&O(z)})}r(D,j)};P(S,D=>{e(u)||D(L)})}v(T),K(()=>Y(y,d().id)),r(_,T),ne()}var vo=A('<div class="label svelte-1jljqe9">OpenID default scopes cannot be deleted</div>'),co=A('<div class="err svelte-1jljqe9"> </div>'),uo=A('<div class="label svelte-1jljqe9">Are you sure, you want to delete this scope?</div> <!> <!>',1),ho=A('<div class="container svelte-1jljqe9"><!></div>');function po(_,s){le(s,!0);let t=G(s,"scope",19,()=>({})),d=C(!1),i=C("");async function g(){a(i,""),a(d,!0);let o=await ci(t().id);if(o.ok)s.onSave();else{let $=await o.json();a(i,n($.message))}a(d,!1)}var f=ho(),u=c(f);{var I=o=>{var $=vo();r(o,$)},E=o=>{var $=uo(),m=l(ee($),2);Se(m,{level:1,get isLoading(){return e(d)},set isLoading(h){a(d,n(h))},$$events:{click:g},children:(h,y)=>{q();var w=B("DELETE");r(h,w)},$$slots:{default:!0}});var T=l(m,2);{var k=h=>{var y=co(),w=c(y,!0);v(y),K(()=>Y(w,e(i))),r(h,y)};P(T,h=>{e(i)&&h(k)})}r(o,$)};P(u,o=>{Pa(t().name)?o(I):o(E,!1)})}v(f),r(_,f),ne()}var mo=A('<div class="data font-mono svelte-115hohv"> </div>'),go=A('<div class="data svelte-115hohv"> </div>'),fo=A('<div class="header svelte-115hohv"><!> <!></div>'),yo=A("<div><!></div>"),wo=A("<div><!></div>"),bo=A("<div><!> <!></div>");function $o(_,s){le(s,!0);let t=G(s,"attrs",15),d=G(s,"scope",31,()=>n({})),i=G(s,"onSave",15),g=C(void 0);const f=["Config","Delete"];let u=C(n(f[0]));const I=200,E=I/2;function o(){a(g,!1),i()()}ot(_,{get show(){return e(g)},set show($){a(g,n($))},header:$=>{var m=fo(),T=c(m);Ze(T,{text:"Scope ID",children:(h,y)=>{var w=mo(),b=c(w,!0);v(w),K(()=>Y(b,d().id)),r(h,w)},$$slots:{default:!0}});var k=l(T,2);Ze(k,{text:"Scope Name",children:(h,y)=>{var w=go(),b=c(w,!0);v(w),K(()=>Y(b,d().name)),r(h,w)},$$slots:{default:!0}}),v(m),r($,m)},body:$=>{var m=bo(),T=c(m);Dt(T,{labels:f,get selected(){return e(u)},set selected(w){a(u,n(w))}});var k=l(T,2);{var h=w=>{var b=yo(),x=c(b);oo(x,{get attrs(){return t()},set attrs(p){t(p)},get scope(){return d()},set scope(p){d(p)},get onSave(){return i()},set onSave(p){i(p)}}),v(b),ce(5,b,()=>_e,()=>({delay:E,duration:I})),ce(6,b,()=>_e,()=>({duration:I})),r(w,b)},y=w=>{var b=me(),x=ee(b);{var p=S=>{var L=wo(),D=c(L);po(D,{get scope(){return d()},onSave:o}),v(L),ce(5,L,()=>_e,()=>({delay:E,duration:I})),ce(6,L,()=>_e,()=>({duration:I})),r(S,L)};P(x,S=>{e(u)==="Delete"&&S(p)},!0)}r(w,b)};P(k,w=>{e(u)==="Config"?w(h):w(y,!1)})}v(m),r($,m)},$$slots:{header:!0,body:!0}}),ne()}var _o=A('<div class="svelte-1tlglcs"><!></div>'),ko=A(' <div class="content"><!> <!> <div id="scopes" class="svelte-1tlglcs"></div> <!> <div style="height: 20px"></div></div>',1);function xo(_,s){le(s,!0);let t=C(n([])),d=C(""),i=C(n([])),g=C(n([])),f=C(n([])),u=C(""),I=[{label:"Name",callback:(p,S)=>p.name.toLowerCase().includes(S.toLowerCase())},{label:"ID",callback:(p,S)=>p.id.toLowerCase().includes(S.toLowerCase())}],E=[{label:"Name",callback:(p,S)=>p.name.localeCompare(S.name)},{label:"ID",callback:(p,S)=>p.id.localeCompare(S.id)}];Ne(()=>{$(),o(),a(u,"")});async function o(){let p=await ma();if(!p.ok)a(d,"Error fetching attributes: "+p.body.message);else{let S=await p.json();a(t,n([...S.values]))}}async function $(){let p=await Za(),S=await p.json();p.ok?a(i,n([...S])):a(d,n(S.message))}function m(){$()}q();var T=ko(),k=ee(T),h=l(k),y=c(h);Lt(y,{get items(){return e(i)},searchOptions:I,orderOptions:E,get resItems(){return e(g)},set resItems(p){a(g,n(p))},get search(){return e(u)},set search(p){a(u,n(p))}});var w=l(y,2);to(w,{onSave:m});var b=l(w,2);We(b,23,()=>e(f),p=>p.id,(p,S,L)=>{var D=_o(),j=c(D);$o(j,{onSave:m,get attrs(){return e(t)},set attrs(N){a(t,n(N))},get scope(){return e(f)[e(L)]},set scope(N){e(f)[e(L)]=N}}),v(D),r(p,D)}),v(b);var x=l(b,2);jt(x,{get items(){return e(g)},set items(p){a(g,n(p))},get resItems(){return e(f)},set resItems(p){a(f,n(p))}}),q(2),v(h),K(()=>Y(k,`${e(d)??""} `)),r(_,T),ne()}var Eo=A('<div class="entry svelte-f2hz2l"><div class="label svelte-f2hz2l"> </div> <!></div>'),Io=A('<div class="list svelte-f2hz2l"></div>');function ss(_,s){let t=G(s,"options",19,()=>[{label:"password",value:!1},{label:"refresh_token",value:!1}]);var d=Io();We(d,21,t,yt,(i,g,f)=>{var u=Eo(),I=c(u),E=c(I,!0);v(I);var o=l(I,2);Be(o,{get selected(){return e(g).value},set selected($){e(g).value=$}}),v(u),K(()=>Y(E,e(g).label)),r(i,u)}),v(d),r(_,d)}var So=A("<div><!></div>");function Co(_,s){le(s,!0);let t=G(s,"validation",19,()=>({})),d=G(s,"value",15),i=G(s,"autocomplete",11,"on"),g=G(s,"validate",15),f=Jt(s,["$$slots","$$events","$$legacy","validation","name","value","width","autocomplete","children","validate"]);g($);let u=C("");const I=na();async function E(){await Bt(),I("input",!0),$()}async function o(){I("blur",!0),$()}function $(){var k;return a(u,""),d()&&((k=t())!=null&&k.regex)&&!d().match(t().regex)?(a(u,n(t().errMsg||"Invalid input")),!1):!0}var m=So(),T=c(m);return ie(T,La({get width(){return s.width},get name(){return s.name},get autocomplete(){return i()}},()=>f,{get value(){return d()},set value(k){d(k)},get error(){return e(u)},set error(k){a(u,n(k))},$$events:{input:E,blur:o},children:(k,h)=>{var y=me(),w=ee(y);At(w,()=>s.children??Ct),r(k,y)},$$slots:{default:!0}})),v(m),ce(7,m,()=>ht,()=>({duration:200})),r(_,m),ne({validateValue:$})}var Ao=A('<div class="err svelte-nzivgu"> </div>'),To=A('<div class="container svelte-nzivgu"><!> <!></div>');function Kt(_,s){le(s,!0);let t=G(s,"validation",27,()=>n({required:!1,regex:void 0,errMsg:""})),d=G(s,"values",15),i=G(s,"validate",15),g=G(s,"width",3,"260px"),f=G(s,"optional",3,!1),u=G(s,"autocomplete",15,"on"),I=Jt(s,["$$slots","$$events","$$legacy","validation","values","validate","width","optional","autocomplete","children"]);i(k);let E=C(""),o=C(n([]));const $=na();Ne(()=>{d()||d([]);for(let x of d())e(o).push({name:Mt(),value:x});e(o).push({name:Mt(),value:""})});async function m(){await Bt(),e(o)[e(o).length-1].value?e(o).push({name:Mt(),value:""}):e(o).length>1&&!e(o)[e(o).length-2].value&&a(o,n([...e(o).slice(0,e(o).length-1)])),$("input",!0),k(),d(T())}function T(){k();let x=[];for(let p=0;p<e(o).length-1;p++)x.push(e(o)[p].value);return x}function k(){if(t().required&&e(o).length===1&&!e(o)[0].value)return f()?!0:(a(E,"Required"),!1);let x=!0;for(let p of e(o))p.value&&!p.validate()&&(x=!1);return x}var h=To(),y=c(h);We(y,17,()=>e(o),yt,(x,p,S)=>{Co(x,La({width:"calc({width} - 20px)",get validation(){return t()},get name(){return e(p).name}},()=>I,{get value(){return e(p).value},set value(L){e(p).value=L},get validate(){return e(p).validate},set validate(L){e(p).validate=L},get autocomplete(){return u()},set autocomplete(L){u(L)},$$events:{input:m,blur:m},children:(L,D)=>{var j=me(),N=ee(j);At(N,()=>s.children??Ct),r(L,j)},$$slots:{default:!0}}))});var w=l(y,2);{var b=x=>{var p=Ao(),S=c(p,!0);v(p),K(()=>Y(S,e(E))),r(x,p)};P(w,x=>{e(E)&&x(b)})}return v(h),K(()=>oe(h,"width",g())),r(_,h),ne({getValues:T,validateValues:k})}var Lo=A('<div class="desc svelte-1pba61y"><p><span><b>CAUTION:</b></span> The <code class="svelte-1pba61y">FORCE MFA</code> option for <code class="svelte-1pba61y">rauthy</code> itself is managed statically via the <code class="svelte-1pba61y">ADMIN_FORCE_MFA</code> config variable and will be overridden with each restart.</p></div>'),No=A(`<div class="desc svelte-1pba61y"><p><span><b>CAUTION:</b></span> If you <code class="svelte-1pba61y">FORCE MFA</code> for this client here, this will only apply to the <code class="svelte-1pba61y">authorization_code</code> flow! If you use other flows,
                MFA cannot be forced for them!</p></div>`),Ro=A('<div class="separator svelte-1pba61y"></div> <b>CAUTION:</b> <p><code class="svelte-1pba61y">rauthy</code> is the default client which is needed for logging into this Admin UI.<br> Be VERY careful when you change values here, since you could end up locking yourself out of the UI.</p>',1),Do=A('<div class="success svelte-1pba61y">Success</div>'),jo=A('<div class="mainErr err svelte-1pba61y"> </div>'),Po=A(`<div class="container svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">CLIENT ID</div> <div class="value font-mono svelte-1pba61y"> </div></div> <div class="desc svelte-1pba61y"><p>The Name can be changed without any impact on the configuration.<br> It will just show up on the Login / Logout screens.</p></div> <!> <div class="desc svelte-1pba61y"><p>Information about this client's URI and some contacts.
            Client URI and Contacts might be shown to users on the login page.</p></div> <!> <!> <div class="desc svelte-1pba61y"><p>Client configuration</p></div> <div class="row svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ENABLED</div> <div class="value svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">CONFIDENTIAL</div> <div class="value confidential svelte-1pba61y"><!></div></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">FLOWS ENABLED</div> <div class="flows svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">FORCE MFA</div> <div class="value svelte-1pba61y"><!></div></div> <!> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>Allowed Scopes will be applied, if the client asks for them during the login.<br> Default Scopes will always be applied.</p></div> <div class="unit svelte-1pba61y"><div class="label svelte-1pba61y">ALLOWED SCOPES</div> <!></div> <div class="unit svelte-1pba61y"><div class="label svelte-1pba61y">DEFAULT SCOPES</div> <!></div> <div class="separator svelte-1pba61y"></div> <!> <div class="desc svelte-1pba61y"><p>Redirect URIs may contain a <code class="svelte-1pba61y">*</code> wildcard only at the end.</p></div> <!> <div class="separator svelte-1pba61y"></div> <!> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>The Token Lifetime applies to the Access and ID tokens and is specified in seconds.</p> <p>If your client does support EdDSA / ed25519 token algorithms, you should always use it for better security
            and
            smaller tokens.<br> The RSA algorithms does exist for compatibility reasons only.</p> <p>The algorithm for the optional refresh token cannot be changed, since this should only be used by <i>rauthy</i> anyway.</p></div> <!> <div class="row svelte-1pba61y"><div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ACCESS ALGORITHM</div> <div class="value svelte-1pba61y"><!></div></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">ID ALGORITHM</div> <div class="value svelte-1pba61y"><!></div></div></div> <div class="separator svelte-1pba61y"></div> <div class="desc svelte-1pba61y"><p>If your application does support it, you should always use S256 PKCE challenges.<br> If you login from a single page application directly without any backend and therefore have a
            non-confidential
            client, you must(!) use at least the plain PKCE challenge, to have a secure login flow.</p> <p>If any of these is set, <i>rauthy</i> will enforce the usage and deny any login, which does not provide a
            valid challenge.</p></div> <div class="unit svelte-1pba61y"><div class="label font-label svelte-1pba61y">PKCE CHALLENGES</div> <div class="challenges svelte-1pba61y"><!></div></div> <div class="desc err svelte-1pba61y"><!></div> <!> <!> <!></div>`);function zo(_,s){le(s,!0);let t=G(s,"client",31,()=>n({}));const d="350px";let i=C(""),g=C(!1),f=C(void 0),u=n(Ls.map(se=>{var Ae,ze;return se.label==="device_code"?se.value=(Ae=t().flows_enabled)==null?void 0:Ae.includes("urn:ietf:params:oauth:grant-type:device_code"):se.value=(ze=t().flows_enabled)==null?void 0:ze.includes(se.label),se})),I=C(void 0);Qa.subscribe(se=>{a(I,n(se))});let E=n(Ns.map(se=>{var Ae;return se.value=(Ae=t().challenges)==null?void 0:Ae.includes(se.label),se})),o=C(void 0),$=C(void 0),m=C(void 0),T=C(void 0);Ne(()=>()=>clearTimeout(e(f)));let k=C(n({}));const h=He().shape({name:he().trim().matches(Xt,"Can only contain characters, numbers and '-'"),client_uri:he().trim().nullable().matches(tt,"Invalid URI"),access_token_lifetime:wt().required("Token Lifetime is required").min(10,"Cannot be lower than 10").max(86400,"Cannot be higher than 86400")});function y(){t().redirect_uris[0]===""&&t(t().redirect_uris=[],!0),(!t().post_logout_redirect_uris||t().post_logout_redirect_uris[0]==="")&&t(t().post_logout_redirect_uris=[],!0),t().name||t(t().name="",!0),(!t().contacts||t().contacts[0]==="")&&t(t().contacts=[],!0),t().client_uri||t(t().client_uri=null,!0)}function w(se){se.code==="Enter"&&b()}async function b(){a(i,"");const se=await x();if(!e($)()){a(i,"Invalid Allowed Origin");return}if(!e(m)()){a(i,"Invalid Redirect URIs");return}if(!e(T)()){a(i,"Invalid Post Logout URIs");return}if(!e(o)()){a(i,"Invalid Contacts");return}if(!se){a(i,"Invalid input");return}if(t(t().access_token_lifetime=Number.parseInt(t().access_token_lifetime),!0),t(t().flows_enabled=u.filter(X=>X.value).map(X=>X.label==="device_code"?"urn:ietf:params:oauth:grant-type:device_code":X.label),!0),t().flows_enabled.includes("authorization_code")&&t().redirect_uris.length===0){a(i,"With 'authorization_code' flow enabled, you need to specify at least one redirect URI");return}if(t().flows_enabled.includes("client_credentials")&&!t().confidential){a(i,"'client_credentials' flow needs a 'confidential' client");return}if(t().flows_enabled.length===0){a(i,"At least one flow must be enabled");return}let Ae=t();t(t().challenges=E.filter(X=>X.value).map(X=>X.label),!0),t().challenges.length===0&&(Ae.challenges=null),Ae.name||(Ae.name=void 0),Ae.allowed_origins.length>0&&!Ae.allowed_origins[0]&&(Ae.allowed_origins=[]);let ze=await pr(Ae);if(ze.ok)a(g,!0);else{let X=await ze.json();a(i,n(X.message))}}async function x(){try{return await h.validate(t(),{abortEarly:!1}),a(k,n({})),!0}catch(se){return a(k,n(Ye(se))),!1}}Te(()=>{t().id&&y()}),Te(()=>{e(g)&&a(f,n(setTimeout(()=>{a(g,!1),s.onSave()},3e3)))});var p=Po(),S=c(p),L=l(c(S),2),D=c(L,!0);v(L),v(S);var j=l(S,4);ie(j,{autocomplete:"off",placeholder:"Client Name",width:d,get value(){return t().name},set value(se){t(t().name=se,!0)},get error(){return e(k).name},set error(se){e(k).name=se},$$events:{keypress:w,input:x},children:(se,Ae)=>{q();var ze=B("CLIENT NAME");r(se,ze)},$$slots:{default:!0}});var N=l(j,4);ie(N,{autocomplete:"off",placeholder:"Client URI",width:d,get value(){return t().client_uri},set value(se){t(t().client_uri=se,!0)},get error(){return e(k).client_uri},set error(se){e(k).client_uri=se},$$events:{keypress:w,input:x},children:(se,Ae)=>{q();var ze=B("CLIENT URI");r(se,ze)},$$slots:{default:!0}});var V=l(N,2);Kt(V,{style:`width: ${d}`,validation:{required:!1,regex:Rs,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Contact",optional:!0,get values(){return t().contacts},set values(se){t(t().contacts=se,!0)},get validate(){return e(o)},set validate(se){a(o,n(se))},children:(se,Ae)=>{q();var ze=B("CONTACT");r(se,ze)},$$slots:{default:!0}});var R=l(V,4);oe(R,"margin-top","-5px");var F=c(R);oe(F,"width","138px");var z=l(c(F),2),O=c(z);Be(O,{get selected(){return t().enabled},set selected(se){t(t().enabled=se,!0)}}),v(z),v(F);var U=l(F,2);oe(U,"width","110px");var Q=l(c(U),2),M=c(Q);Be(M,{get selected(){return t().confidential},set selected(se){t(t().confidential=se,!0)}}),v(Q),v(U),v(R);var W=l(R,2),J=l(c(W),2),Z=c(J);ss(Z,{get options(){return u}}),v(J),v(W);var re=l(W,2),ve=l(c(re),2),be=c(ve);Be(be,{get selected(){return t().force_mfa},set selected(se){t(t().force_mfa=se,!0)}}),v(ve),v(re);var $e=l(re,2);{var pe=se=>{var Ae=Lo();oe(Ae,"margin","-10px 0 -15px 5px");var ze=c(Ae),X=c(ze);oe(X,"color","var(--col-err)"),q(7),v(ze),v(Ae),r(se,Ae)},je=se=>{var Ae=me(),ze=ee(Ae);{var X=Ee=>{var Le=No();oe(Le,"margin","-10px 0 -15px 5px");var St=c(Le),ae=c(St);oe(ae,"color","var(--col-err)"),q(5),v(St),v(Le),ce(3,Le,()=>_e),r(Ee,Le)};P(ze,Ee=>{t().force_mfa&&Ee(X)},!0)}r(se,Ae)};P($e,se=>{t().id==="rauthy"?se(pe):se(je,!1)})}var fe=l($e,6);oe(fe,"margin-top","-10px");var de=l(c(fe),2);zt(de,{get options(){return e(I)},searchThreshold:4,get items(){return t().scopes},set items(se){t(t().scopes=se,!0)}}),v(fe);var ye=l(fe,2);oe(ye,"margin-top","-3px");var we=l(c(ye),2);zt(we,{get options(){return e(I)},searchThreshold:4,get items(){return t().default_scopes},set items(se){t(t().default_scopes=se,!0)}}),v(ye);var Pe=l(ye,4);Kt(Pe,{style:`width: ${d}`,validation:{required:!0,regex:Ds,errMsg:"Must be a valid origin"},autocomplete:"off",placeholder:"Allowed Origin",optional:!0,get values(){return t().allowed_origins},set values(se){t(t().allowed_origins=se,!0)},get validate(){return e($)},set validate(se){a($,n(se))},children:(se,Ae)=>{q();var ze=B("ALLOWED ORIGIN");r(se,ze)},$$slots:{default:!0}});var Ce=l(Pe,4);Kt(Ce,{style:`width: ${d}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Redirect URI",optional:!0,get values(){return t().redirect_uris},set values(se){t(t().redirect_uris=se,!0)},get validate(){return e(m)},set validate(se){a(m,n(se))},children:(se,Ae)=>{q();var ze=B("REDIRECT URI");r(se,ze)},$$slots:{default:!0}});var xe=l(Ce,4);Kt(xe,{style:`width: ${d}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",placeholder:"Post Logout Redirect URI",optional:!0,get values(){return t().post_logout_redirect_uris},set values(se){t(t().post_logout_redirect_uris=se,!0)},get validate(){return e(T)},set validate(se){a(T,n(se))},children:(se,Ae)=>{q();var ze=B("POST LOGOUT REDIRECT URI");r(se,ze)},$$slots:{default:!0}});var Re=l(xe,6);ie(Re,{type:"number",min:60,max:86400,autocomplete:"off",placeholder:"Client Name",width:d,get value(){return t().access_token_lifetime},set value(se){t(t().access_token_lifetime=se,!0)},get error(){return e(k).access_token_lifetime},set error(se){e(k).access_token_lifetime=se},$$events:{input:x},children:(se,Ae)=>{q();var ze=B("ACCESS TOKEN LIFETIME");r(se,ze)},$$slots:{default:!0}});var H=l(Re,2),Ie=c(H);oe(Ie,"width","220px");var ge=l(c(Ie),2),Ue=c(ge);kt(Ue,{options:za,get value(){return t().access_token_alg},set value(se){t(t().access_token_alg=se,!0)}}),v(ge),v(Ie);var Je=l(Ie,2),rt=c(Je);oe(rt,"text-align","right");var vt=l(rt,2),qe=c(vt);kt(qe,{options:za,get value(){return t().id_token_alg},set value(se){t(t().id_token_alg=se,!0)}}),v(vt),v(Je),v(H);var Fe=l(H,6),lt=l(c(Fe),2),xt=c(lt);ss(xt,{get options(){return E}}),v(lt),v(Fe);var $t=l(Fe,2),Qe=c($t);{var et=se=>{var Ae=Ro();q(4),r(se,Ae)};P(Qe,se=>{t().id==="rauthy"&&se(et)})}v($t);var gt=l($t,2);Se(gt,{level:1,width:"4rem",$$events:{click:b},children:(se,Ae)=>{q();var ze=B("SAVE");r(se,ze)},$$slots:{default:!0}});var ct=l(gt,2);{var It=se=>{var Ae=Do();r(se,Ae)};P(ct,se=>{e(g)&&se(It)})}var at=l(ct,2);{var st=se=>{var Ae=jo(),ze=c(Ae,!0);v(Ae),K(()=>Y(ze,e(i))),r(se,Ae)};P(at,se=>{e(i)&&se(st)})}v(p),K(()=>Y(D,t().id)),r(_,p),ne()}var Oo=A('<div class="container svelte-3m83zw"><div class="err svelte-3m83zw"> </div> <div class="value font-mono"><!></div> <!></div>');function Mo(_,s){le(s,!0);let t=C(""),d=C("");Ne(()=>{i()});async function i(){let T=await $r(s.client.id),k=await T.json();T.ok?a(d,n(k.secret)):a(t,n(k.message))}async function g(){let T=await _r(s.client.id),k=await T.json();T.ok?await i():a(t,n(k.message))}var f=Oo(),u=c(f),I=c(u,!0);v(u);var E=l(u,2),o=c(E);{var $=T=>{Wt(T,{autocomplete:"off",disabled:!0,showCopy:!0,width:"inherit",maxWidth:"800px",get value(){return e(d)},set value(k){a(d,n(k))},children:(k,h)=>{q();var y=B("CLIENT SECRET");r(k,y)},$$slots:{default:!0}})};P(o,T=>{e(d)&&T($)})}v(E);var m=l(E,2);Se(m,{level:1,$$events:{click:g},children:(T,k)=>{q();var h=B("GENERATE NEW");r(T,h)},$$slots:{default:!0}}),v(f),K(()=>Y(I,e(t))),r(_,f),ne()}var Uo=A('<div class="label svelte-1jljqe9">Anti-Lockout Rule: The rauthy default client cannot be deleted.</div>'),qo=A('<div class="err svelte-1jljqe9"> </div>'),Go=A('<div class="label svelte-1jljqe9">Are you sure, you want to delete this client?</div> <!> <!>',1),Wo=A('<div class="container svelte-1jljqe9"><!></div>');function Ko(_,s){le(s,!0);let t=G(s,"client",19,()=>({})),d=C(!1),i=C("");async function g(){a(i,""),a(d,!0);let o=await mr(t().id);if(o.ok)s.onSave();else{let $=await o.json();a(i,n($.message))}a(d,!1)}var f=Wo(),u=c(f);{var I=o=>{var $=Uo();r(o,$)},E=o=>{var $=Go(),m=l(ee($),2);Se(m,{level:1,get isLoading(){return e(d)},set isLoading(h){a(d,n(h))},$$events:{click:g},children:(h,y)=>{q();var w=B("DELETE");r(h,w)},$$slots:{default:!0}});var T=l(m,2);{var k=h=>{var y=qo(),w=c(y,!0);v(y),K(()=>Y(w,e(i))),r(h,y)};P(T,h=>{e(i)&&h(k)})}r(o,$)};P(u,o=>{t().id==="rauthy"?o(I):o(E,!1)})}v(f),r(_,f),ne()}var Fo=(_,s)=>a(s,!0),Vo=A('<div class="load svelte-icxpvn"><!></div>'),Bo=A('<div class="txt svelte-icxpvn">LOAD</div>'),Jo=A('<div class="wrap svelte-icxpvn"><button class="btn font-label svelte-icxpvn"><!></button></div>');function ya(_,s){le(s,!0);let t=C(!1),d=C(!1),i=C(void 0),g=C(void 0),f=C(void 0),u=C(void 0),I=C(void 0),E=C("white");Ca(()=>{clearTimeout(e(I))});function o(){switch(s.level){case 1:a(i,n(s.colors.act1)),a(g,n(s.colors.act1a)),a(f,"white"),a(u,`1px solid ${s.colors.gmid}`);break;case 2:a(i,n(s.colors.act2)),a(g,n(s.colors.act2a)),a(f,n(s.colors.ghigh)),a(u,`1px solid ${s.colors.gmid}`);break;default:a(i,n(s.colors.ghigh)),a(g,"white"),a(f,n(s.colors.act2a)),a(u,`1px solid ${s.colors.act2a}`),a(E,n(s.colors.acnt))}}Te(()=>{e(d)&&a(I,n(setTimeout(()=>{a(d,!1)},2e3)))}),Te(()=>{s.colors&&o()});var $=Jo(),m=c($);m.__click=[Fo,d],oe(m,"width","100px");var T=c(m);{var k=y=>{var w=Vo(),b=c(w);ua(b,{background:!1,get color(){return e(E)}}),v(w),r(y,w)},h=y=>{var w=Bo();r(y,w)};P(T,y=>{e(d)?y(k):y(h,!1)})}v(m),v($),K(()=>{oe(m,"border",e(u)),oe(m,"box-shadow",`1px 1px 2px ${s.colors.gmid??""}`),oe(m,"cursor",e(d)?"default":"pointer"),oe(m,"color",e(f)),oe(m,"background",e(t)?e(g):e(i))}),Me("focus",m,()=>a(t,!0)),Me("blur",m,()=>a(t,!1)),Me("keypress",m,()=>a(d,!0)),r(_,$),ne()}pt(["click"]);var Yo=A('<div class="rel svelte-115vejc"><div role="none" class="btn show svelte-115vejc"><!></div></div>'),Ho=A('<div class="err font-label svelte-115vejc"> </div>'),Xo=A('<div class="container svelte-115vejc"><div class="label svelte-115vejc"><div class="labelInner font-label noselect svelte-115vejc"><label><!></label></div></div> <input> <!> <!></div>');function rs(_,s){le(s,!0);let t=G(s,"colors",19,()=>({})),d=G(s,"error",3,""),i=G(s,"name",3,""),g=G(s,"password",3,!1),f=G(s,"value",3,""),u=G(s,"width",3,"250px"),I=Jt(s,["$$slots","$$events","$$legacy","colors","error","name","password","value","width","children"]),E=C(n(g()?"new-password":"text")),o=C(!1),$=C(!1);function m(){e(E)==="password"?a(E,"text"):a(E,"password")}var T=Xo(),k=c(T),h=c(k),y=c(h),w=c(y);At(w,()=>s.children??Ct),v(y),v(h),v(k);var b=l(k,2);nt(b);var x=()=>a(o,!0),p=()=>a(o,!1),S=()=>a($,!0),L=()=>a($,!1);let D;var j=l(b,2);{var N=F=>{var z=Yo(),O=c(z);O.__click=m;var U=c(O);{var Q=W=>{Fa(W,{width:22,get color(){return t().err}})},M=W=>{Va(W,{width:22,get color(){return t().ok}})};P(U,W=>{e(E)==="password"?W(Q):W(M,!1)})}v(O),v(z),Me("keypress",O,m),r(F,z)};P(j,F=>{g()&&F(N)})}var V=l(j,2);{var R=F=>{var z=Ho(),O=c(z,!0);v(z),K(()=>{oe(z,"width",u()),oe(z,"color",t().err),Y(O,d())}),ce(7,z,()=>_e,()=>({duration:250})),r(F,z)};P(V,F=>{d()&&F(R)})}v(T),K(()=>{oe(T,"width",`calc(${u()??""} + 12px)`),oe(h,"background",t().bg),ue(y,"for",i()),D=ha(b,D,{type:e(E),onmouseenter:x,onmouseleave:p,onfocus:S,onblur:L,autocomplete:"off",name:i(),value:f(),...I},"svelte-115vejc"),oe(b,"width",u()),oe(b,"background",(e(o)||e($),t().bg)),oe(b,"border",e($)?`1px solid ${t().acnt}`:`1px solid ${t().glow}`),oe(b,"color",t().text),oe(b,"box-shadow",`1px 1px 2px ${t().gmid??""}`)}),r(_,T),ne()}pt(["click"]);var Zo=A('<img alt="No Logo Available">');function is(_,s){le(s,!0);var t=Zo();K(()=>ue(t,"src",`/auth/v1/clients/${s.clientId}/logo?${Mt(6)}`)),r(_,t),ne()}var Qo=A('<div class="preview font-label svelte-rscdc0"><b>PREVIEW</b></div> <div class="container svelte-rscdc0"><div class="head svelte-rscdc0"><div class="logo svelte-rscdc0"><!></div></div> <div class="name svelte-rscdc0"><h2>Client Name</h2></div> <!> <!> <div class="btn svelte-rscdc0"><!> <!> <!></div></div>',1);function ev(_,s){le(s,!0);let t="This is an E-Mail error",d="This is a password error";var i=Qo(),g=l(ee(i),2),f=c(g),u=c(f),I=c(u);{var E=y=>{is(y,{get clientId(){return s.clientId}})};P(I,y=>{s.isLoading||y(E)})}v(u),v(f);var o=l(f,4);rs(o,{type:"email",name:"rauthyEmail",placeholder:"E-Mail",get error(){return t},get colors(){return s.colors},children:(y,w)=>{q();var b=B("E-MAIL");r(y,b)},$$slots:{default:!0}});var $=l(o,2);rs($,{password:!0,name:"rauthyPassword",placeholder:"Password",get error(){return d},get colors(){return s.colors},children:(y,w)=>{q();var b=B("E-MAIL");r(y,b)},$$slots:{default:!0}});var m=l($,2),T=c(m);ya(T,{get colors(){return s.colors},level:1});var k=l(T,2);ya(k,{get colors(){return s.colors},level:2});var h=l(k,2);ya(h,{get colors(){return s.colors},level:3}),v(m),v(g),K(()=>{oe(g,"color",s.colors.text),oe(g,"border",`1px solid ${s.colors.gmid??""}`),oe(g,"background",s.colors.bg)}),r(_,i),ne()}var tv=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"></path></svg>');function av(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=tv();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var sv=(_,s)=>e(s).click(),rv=(_,s)=>e(s).click(),iv=(_,s)=>s(_),lv=A('<div class="container svelte-jso5mh"><div role="button" tabindex="0" class="btn svelte-jso5mh"><!></div> <div role="button" tabindex="0" class="text noselect font-label svelte-jso5mh"> </div> <input class="imageInput svelte-jso5mh" type="file" accept=".jpg, .jpeg, .png, .svg"></div>');function ls(_,s){let t=G(s,"text",3,"UPLOAD LOGO"),d=G(s,"image",15),i=C(void 0);async function g(m){d(m.target.files[0])}var f=lv(),u=c(f);u.__click=[sv,i];var I=c(u);av(I,{width:22}),v(u);var E=l(u,2);E.__click=[rv,i];var o=c(E,!0);v(E);var $=l(E,2);$.__change=[iv,g],Qs($,m=>a(i,m),()=>e(i)),v(f),K(()=>Y(o,t())),Me("keypress",u,()=>e(i).click()),Me("keypress",E,()=>e(i).click()),r(_,f)}pt(["click","change"]);var nv=A('<div class="col1 colors svelte-11vvvzr"><div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div></div> <div class="col2 colors svelte-11vvvzr"><div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="row svelte-11vvvzr"><!> <div class="colInputWrap svelte-11vvvzr"><input type="color" class="colInput svelte-11vvvzr"> <div class="colorBlock svelte-11vvvzr"></div></div></div> <div class="logo svelte-11vvvzr"><!> <!></div></div>',1),ov=A('<div class="preview svelte-11vvvzr"><!></div>'),vv=A('<div class="success svelte-11vvvzr">Success</div>'),dv=A('<div class="err svelte-11vvvzr"> </div>'),cv=A(`<div class="container svelte-11vvvzr"><div class="label svelte-11vvvzr"><p>You can set client specific colors, which then will be used for the Login page.
            These colors must be valid CSS values. Either enter them directly or use the color picker.</p></div> <div class="inner svelte-11vvvzr"><!> <!></div> <div class="btns svelte-11vvvzr"><!> <!> <!> <!></div></div>`);function uv(_,s){le(s,!0);let t=G(s,"client",19,()=>({})),d=C(void 0),i=C(void 0),g=C(!1),f=C(""),u=C(!1),I=C(void 0),E=C(n({})),o=C(n({}));const $=He().shape({act1:he().trim().matches(ft,"only valid CSS color"),act1a:he().trim().matches(ft,"only valid CSS color"),act2:he().trim().matches(ft,"only valid CSS color"),act2a:he().trim().matches(ft,"only valid CSS color"),acnt:he().trim().matches(ft,"only valid CSS color"),acnta:he().trim().matches(ft,"only valid CSS color"),ok:he().trim().matches(ft,"only valid CSS color"),err:he().trim().matches(ft,"only valid CSS color"),glow:he().trim().matches(ft,"only valid CSS color"),gmid:he().trim().matches(ft,"only valid CSS color"),ghigh:he().trim().matches(ft,"only valid CSS color"),text:he().trim().matches(ft,"only valid CSS color"),bg:he().trim().matches(ft,"only valid CSS color")});Ne(async()=>{await m()}),Ca(()=>{e(I)&&clearTimeout(e(I))});async function m(){let O=await gr(t().id);if(O.ok){let U=await O.json();a(d,n(U)),a(o,n(U))}else{let U=await O.json();a(f,n(U.message))}}async function T(){if(a(f,""),a(g,!0),!await y())return;let O=await fr(t().id,e(o));if(O.ok)a(u,!0);else{let U=await O.json();a(f,n(U.message))}a(g,!1)}async function k(){a(f,""),a(g,!0);let O=await yr(t().id);if(O.ok)await br(t().id),await m(),a(u,!0);else{let U=await O.json();a(f,n(U.message))}a(g,!1)}async function h(O){a(g,!0),await Bt();let U=await wr(t().id,O);if(!U.ok){let Q=await U.json();console.error(Q.message)}a(g,!1)}async function y(){try{await $.validate(e(o),{abortEarly:!1}),a(E,n({}))}catch(O){return a(E,n(Ye(O))),!1}return a(d,n(e(o))),!0}Te(()=>{e(u)&&a(I,n(setTimeout(()=>{a(u,!1)},3e3)))}),Te(()=>{e(i)&&h(e(i))});var w=cv(),b=l(c(w),2),x=c(b);{var p=O=>{var U=nv(),Q=ee(U),M=c(Q),W=c(M);ie(W,{autocomplete:"off",placeholder:"act1",get value(){return e(o).act1},set value(te){e(o).act1=te},get error(){return e(E).act1},set error(te){e(E).act1=te},$$events:{input:y},children:(te,_t)=>{q();var Ve=B("act1");r(te,Ve)},$$slots:{default:!0}});var J=l(W,2),Z=c(J);nt(Z);var re=l(Z,2);v(J),v(M);var ve=l(M,2),be=c(ve);ie(be,{autocomplete:"off",placeholder:"act1a",get value(){return e(o).act1a},set value(te){e(o).act1a=te},get error(){return e(E).act1a},set error(te){e(E).act1a=te},$$events:{input:y},children:(te,_t)=>{q();var Ve=B("act1a");r(te,Ve)},$$slots:{default:!0}});var $e=l(be,2),pe=c($e);nt(pe);var je=l(pe,2);v($e),v(ve);var fe=l(ve,2),de=c(fe);ie(de,{autocomplete:"off",placeholder:"act2",get value(){return e(o).act2},set value(te){e(o).act2=te},get error(){return e(E).act2},set error(te){e(E).act2=te},$$events:{input:y},children:(te,_t)=>{q();var Ve=B("act2");r(te,Ve)},$$slots:{default:!0}});var ye=l(de,2),we=c(ye);nt(we);var Pe=l(we,2);v(ye),v(fe);var Ce=l(fe,2),xe=c(Ce);ie(xe,{autocomplete:"off",placeholder:"act2a",get value(){return e(o).act2a},set value(te){e(o).act2a=te},get error(){return e(E).act2a},set error(te){e(E).act2a=te},$$events:{input:y},children:(te,_t)=>{q();var Ve=B("act2a");r(te,Ve)},$$slots:{default:!0}});var Re=l(xe,2),H=c(Re);nt(H);var Ie=l(H,2);v(Re),v(Ce);var ge=l(Ce,2),Ue=c(ge);ie(Ue,{autocomplete:"off",placeholder:"acnt",get value(){return e(o).acnt},set value(te){e(o).acnt=te},get error(){return e(E).acnt},set error(te){e(E).acnt=te},$$events:{input:y},children:(te,_t)=>{q();var Ve=B("acnt");r(te,Ve)},$$slots:{default:!0}});var Je=l(Ue,2),rt=c(Je);nt(rt);var vt=l(rt,2);v(Je),v(ge);var qe=l(ge,2),Fe=c(qe);ie(Fe,{autocomplete:"off",placeholder:"acnta",get value(){return e(o).acnta},set value(te){e(o).acnta=te},get error(){return e(E).acnta},set error(te){e(E).acnta=te},$$events:{input:y},children:(te,_t)=>{q();var Ve=B("acnta");r(te,Ve)},$$slots:{default:!0}});var lt=l(Fe,2),xt=c(lt);nt(xt);var $t=l(xt,2);v(lt),v(qe);var Qe=l(qe,2),et=c(Qe);ie(et,{autocomplete:"off",placeholder:"ok",get value(){return e(o).ok},set value(te){e(o).ok=te},get error(){return e(E).ok},set error(te){e(E).ok=te},$$events:{input:y},children:(te,_t)=>{q();var Ve=B("ok");r(te,Ve)},$$slots:{default:!0}});var gt=l(et,2),ct=c(gt);nt(ct);var It=l(ct,2);v(gt),v(Qe);var at=l(Qe,2),st=c(at);ie(st,{autocomplete:"off",placeholder:"err",get value(){return e(o).err},set value(te){e(o).err=te},get error(){return e(E).err},set error(te){e(E).err=te},$$events:{input:y},children:(te,_t)=>{q();var Ve=B("err");r(te,Ve)},$$slots:{default:!0}});var se=l(st,2),Ae=c(se);nt(Ae);var ze=l(Ae,2);v(se),v(at),v(Q);var X=l(Q,2),Ee=c(X),Le=c(Ee);ie(Le,{autocomplete:"off",placeholder:"glow",get value(){return e(o).glow},set value(te){e(o).glow=te},get error(){return e(E).glow},set error(te){e(E).glow=te},$$events:{input:y},children:(te,_t)=>{q();var Ve=B("glow");r(te,Ve)},$$slots:{default:!0}});var St=l(Le,2),ae=c(St);nt(ae);var Ge=l(ae,2);v(St),v(Ee);var Oe=l(Ee,2),Ut=c(Oe);ie(Ut,{autocomplete:"off",placeholder:"gmid",get value(){return e(o).gmid},set value(te){e(o).gmid=te},get error(){return e(E).gmid},set error(te){e(E).gmid=te},$$events:{input:y},children:(te,_t)=>{q();var Ve=B("gmid");r(te,Ve)},$$slots:{default:!0}});var Ht=l(Ut,2),Ft=c(Ht);nt(Ft);var Pt=l(Ft,2);v(Ht),v(Oe);var Vt=l(Oe,2),ba=c(Vt);ie(ba,{autocomplete:"off",placeholder:"ghigh",get value(){return e(o).ghigh},set value(te){e(o).ghigh=te},get error(){return e(E).ghigh},set error(te){e(E).ghigh=te},$$events:{input:y},children:(te,_t)=>{q();var Ve=B("ghigh");r(te,Ve)},$$slots:{default:!0}});var $a=l(ba,2),aa=c($a);nt(aa);var hs=l(aa,2);v($a),v(Vt);var sa=l(Vt,2),_a=c(sa);ie(_a,{autocomplete:"off",placeholder:"text",get value(){return e(o).text},set value(te){e(o).text=te},get error(){return e(E).text},set error(te){e(E).text=te},$$events:{input:y},children:(te,_t)=>{q();var Ve=B("text");r(te,Ve)},$$slots:{default:!0}});var ka=l(_a,2),ra=c(ka);nt(ra);var ps=l(ra,2);v(ka),v(sa);var ia=l(sa,2),xa=c(ia);ie(xa,{autocomplete:"off",placeholder:"bg",get value(){return e(o).bg},set value(te){e(o).bg=te},get error(){return e(E).bg},set error(te){e(E).bg=te},$$events:{input:y},children:(te,_t)=>{q();var Ve=B("bg");r(te,Ve)},$$slots:{default:!0}});var Ea=l(xa,2),la=c(Ea);nt(la);var ms=l(la,2);v(Ea),v(ia);var Ia=l(ia,2),Sa=c(Ia);ls(Sa,{get image(){return e(i)},set image(te){a(i,n(te))}});var gs=l(Sa,2);{var fs=te=>{is(te,{get clientId(){return t().id}})};P(gs,te=>{e(g)||te(fs)})}v(Ia),v(X),K(()=>{oe(re,"background",e(o).act1),oe(je,"background",e(o).act1a),oe(Pe,"background",e(o).act2),oe(Ie,"background",e(o).act2a),oe(vt,"background",e(o).acnt),oe($t,"background",e(o).acnta),oe(It,"background",e(o).ok),oe(ze,"background",e(o).err),oe(Ge,"background",e(o).glow),oe(Pt,"background",e(o).gmid),oe(hs,"background",e(o).ghigh),oe(ps,"background",e(o).text),oe(ms,"background",e(o).bg)}),dt(Z,()=>e(o).act1,te=>e(o).act1=te),dt(pe,()=>e(o).act1a,te=>e(o).act1a=te),dt(we,()=>e(o).act2,te=>e(o).act2=te),dt(H,()=>e(o).act2a,te=>e(o).act2a=te),dt(rt,()=>e(o).acnt,te=>e(o).acnt=te),dt(xt,()=>e(o).acnta,te=>e(o).acnta=te),dt(ct,()=>e(o).ok,te=>e(o).ok=te),dt(Ae,()=>e(o).err,te=>e(o).err=te),dt(ae,()=>e(o).glow,te=>e(o).glow=te),dt(Ft,()=>e(o).gmid,te=>e(o).gmid=te),dt(aa,()=>e(o).ghigh,te=>e(o).ghigh=te),dt(ra,()=>e(o).text,te=>e(o).text=te),dt(la,()=>e(o).bg,te=>e(o).bg=te),r(O,U)};P(x,O=>{e(o)&&O(p)})}var S=l(x,2);{var L=O=>{var U=ov(),Q=c(U);ev(Q,{get clientId(){return t().id},get isLoading(){return e(g)},get colors(){return e(d)},set colors(M){a(d,n(M))}}),v(U),r(O,U)};P(S,O=>{e(d)&&O(L)})}v(b);var D=l(b,2),j=c(D);Se(j,{level:1,get isLoading(){return e(g)},set isLoading(O){a(g,n(O))},$$events:{click:T},children:(O,U)=>{q();var Q=B("SAVE");r(O,Q)},$$slots:{default:!0}});var N=l(j,2);Se(N,{level:3,get isLoading(){return e(g)},set isLoading(O){a(g,n(O))},$$events:{click:k},children:(O,U)=>{q();var Q=B("RESET");r(O,Q)},$$slots:{default:!0}});var V=l(N,2);{var R=O=>{var U=vv();r(O,U)};P(V,O=>{e(u)&&O(R)})}var F=l(V,2);{var z=O=>{var U=dv(),Q=c(U,!0);v(U),K(()=>Y(Q,e(f))),r(O,U)};P(F,O=>{e(f)&&O(z)})}v(D),v(w),r(_,w),ne()}var hv=A('<div class="data font-mono svelte-115hohv"> </div>'),pv=A('<div class="data svelte-115hohv"> </div>'),mv=A('<div class="header svelte-115hohv"><!> <!></div>'),gv=A("<div><!></div>"),fv=A("<div><!></div>"),yv=A("<div><!></div>"),wv=A("<div><!></div>"),bv=A("<div><!> <!></div>");function $v(_,s){le(s,!0);let t=G(s,"client",31,()=>n({})),d=G(s,"onSave",15),i=C(void 0);const g=["Config","Secret","Branding","Delete"];let f=C(n(g[0]));const u=200,I=u/2;function E(){a(i,!1),d()()}ot(_,{get show(){return e(i)},set show(o){a(i,n(o))},header:o=>{var $=mv(),m=c($);Ze(m,{text:"Client ID",children:(h,y)=>{var w=hv(),b=c(w,!0);v(w),K(()=>Y(b,t().id)),r(h,w)},$$slots:{default:!0}});var T=l(m,2);{var k=h=>{Ze(h,{text:"Client Name",children:(y,w)=>{var b=pv(),x=c(b,!0);v(b),K(()=>Y(x,t().name)),r(y,b)},$$slots:{default:!0}})};P(T,h=>{t().name&&h(k)})}v($),r(o,$)},body:o=>{var $=bv(),m=c($);Dt(m,{labels:g,get selected(){return e(f)},set selected(y){a(f,n(y))}});var T=l(m,2);{var k=y=>{var w=gv(),b=c(w);zo(b,{get client(){return t()},set client(x){t(x)},get onSave(){return d()},set onSave(x){d(x)}}),v(w),ce(5,w,()=>_e,()=>({delay:I,duration:u})),ce(6,w,()=>_e,()=>({duration:u})),r(y,w)},h=y=>{var w=me(),b=ee(w);{var x=S=>{var L=fv(),D=c(L);Mo(D,{get client(){return t()}}),v(L),ce(5,L,()=>_e,()=>({delay:I,duration:u})),ce(6,L,()=>_e,()=>({duration:u})),r(S,L)},p=S=>{var L=me(),D=ee(L);{var j=V=>{var R=yv(),F=c(R);uv(F,{get client(){return t()}}),v(R),ce(5,R,()=>_e,()=>({delay:I,duration:u})),ce(6,R,()=>_e,()=>({duration:u})),r(V,R)},N=V=>{var R=me(),F=ee(R);{var z=O=>{var U=wv(),Q=c(U);Ko(Q,{get client(){return t()},onSave:E}),v(U),ce(5,U,()=>_e,()=>({delay:I,duration:u})),ce(6,U,()=>_e,()=>({duration:u})),r(O,U)};P(F,O=>{e(f)==="Delete"&&O(z)},!0)}r(V,R)};P(D,V=>{e(f)==="Branding"?V(j):V(N,!1)},!0)}r(S,L)};P(b,S=>{e(f)==="Secret"?S(x):S(p,!1)},!0)}r(y,w)};P(T,y=>{e(f)==="Config"?y(k):y(h,!1)})}v($),r(o,$)},$$slots:{header:!0,body:!0}}),ne()}var _v=A('<div class="header font-label svelte-gbj18i">ADD NEW CLIENT</div>'),kv=A('<div class="success svelte-gbj18i">Success</div>'),xv=A('<div class="mainErr err svelte-gbj18i"> </div>'),Ev=A('<div class="container svelte-gbj18i"><!> <!> <!> <!> <div class="unit svelte-gbj18i"><div class="label font-label svelte-gbj18i">CONFIDENTIAL</div> <div class="value svelte-gbj18i"><!></div></div> <!> <!> <!></div>');function Iv(_,s){le(s,!0);let t=G(s,"idx",31,()=>-1),d=C(void 0),i=n({id:"",name:"",confidential:!0,redirect_uris:[]}),g=C(""),f=C(!1),u=C(void 0),I=C(n({}));const E=He().shape({id:he().required("Client ID is required").trim().matches(js,"Can only contain characters, numbers and '-'"),name:he().trim().nullable().matches(Xt,"Can only contain characters, numbers and '-'")});let o=C(void 0),$=C(void 0);const m="330px";Te(()=>{e(f)&&a(u,n(setTimeout(()=>{s.onSave(),a(f,!1),a(d,!1)},1500)))}),Ne(()=>()=>clearTimeout(e(u)));async function T(){if(a(g,""),!await k()||!e(o)()||!e($)()){a(g,"Invalid input");return}let h=i;h.name||(h.name=void 0);let y=await hr(h);if(y.ok)a(f,!0);else{let w=await y.json();a(g,n(w.message))}}async function k(){try{return await E.validate(i,{abortEarly:!1}),a(I,n({})),!0}catch(h){return a(I,n(Ye(h))),!1}}ot(_,{get idx(){return t()},set idx(h){t(h)},get show(){return e(d)},set show(h){a(d,n(h))},header:h=>{var y=_v();r(h,y)},body:h=>{var y=Ev(),w=c(y);ie(w,{autocomplete:"off",placeholder:"Client ID",width:m,get value(){return i.id},set value(z){i.id=z},get error(){return e(I).id},set error(z){e(I).id=z},$$events:{input:k},children:(z,O)=>{q();var U=B("CLIENT ID");r(z,U)},$$slots:{default:!0}});var b=l(w,2);ie(b,{autocomplete:"off",placeholder:"Client Name",width:m,get value(){return i.name},set value(z){i.name=z},get error(){return e(I).name},set error(z){e(I).name=z},$$events:{input:k},children:(z,O)=>{q();var U=B("NAME");r(z,U)},$$slots:{default:!0}});var x=l(b,2);Kt(x,{style:`width: ${m}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",optional:!0,placeholder:"Redirect URI",get values(){return i.redirect_uris},set values(z){i.redirect_uris=z},get validate(){return e(o)},set validate(z){a(o,n(z))},children:(z,O)=>{q();var U=B("REDIRECT URI");r(z,U)},$$slots:{default:!0}});var p=l(x,2);Kt(p,{style:`width: ${m}`,validation:{required:!0,regex:tt,errMsg:"Only URL safe values: a-zA-Z0-9,.:/_-&?=~#!$'()*+%"},autocomplete:"off",optional:!0,placeholder:"Post Logout Redirect URI",get values(){return i.post_logout_redirect_uris},set values(z){i.post_logout_redirect_uris=z},get validate(){return e($)},set validate(z){a($,n(z))},children:(z,O)=>{q();var U=B("POST LOGOUT REDIRECT URI");r(z,U)},$$slots:{default:!0}});var S=l(p,2),L=l(c(S),2),D=c(L);Be(D,{get selected(){return i.confidential},set selected(z){i.confidential=z}}),v(L),v(S);var j=l(S,2);Se(j,{level:1,width:"4rem",$$events:{click:T},children:(z,O)=>{q();var U=B("SAVE");r(z,U)},$$slots:{default:!0}});var N=l(j,2);{var V=z=>{var O=kv();r(z,O)};P(N,z=>{e(f)&&z(V)})}var R=l(N,2);{var F=z=>{var O=xv(),U=c(O,!0);v(O),K(()=>Y(U,e(g))),r(z,O)};P(R,z=>{e(g)&&z(F)})}v(y),r(h,y)},$$slots:{header:!0,body:!0}}),ne()}var Sv=A('<div class="svelte-z13sh"><!></div>'),Cv=A(' <div class="content"><!> <!> <div id="clients" class="svelte-z13sh"></div> <!> <div style="height: 20px"></div></div>',1);function Av(_,s){le(s,!0);let t=C(""),d=C(n([])),i=C(n([])),g=C(n([])),f=C(""),u=[{label:"ID",callback:(x,p)=>x.id.toLowerCase().includes(p.toLowerCase())}],I=[{label:"ID",callback:(x,p)=>x.id.localeCompare(p.id)}];Ne(()=>{E(),o()});async function E(){let x=await ur();if(!x.ok)a(t,"Error fetching clients: "+x.body.message);else{let p=await x.json();a(d,n([...p]))}}async function o(){let x=await Za();if(!x.ok)a(t,"Error fetching scopes: "+x.body.message);else{let p=await x.json();mi.set(p),Qa.set(p.map(S=>S.name))}}function $(){E(),o(),a(f,"")}q();var m=Cv(),T=ee(m),k=l(T),h=c(k);Lt(h,{get items(){return e(d)},searchOptions:u,orderOptions:I,get resItems(){return e(i)},set resItems(x){a(i,n(x))},get search(){return e(f)},set search(x){a(f,n(x))}});var y=l(h,2);Iv(y,{onSave:$});var w=l(y,2);We(w,23,()=>e(g),x=>x.id,(x,p,S)=>{var L=Sv(),D=c(L);$v(D,{onSave:$,get client(){return e(g)[e(S)]},set client(j){e(g)[e(S)]=j}}),v(L),r(x,L)}),v(w);var b=l(w,2);jt(b,{get items(){return e(i)},set items(x){a(i,n(x))},get resItems(){return e(g)},set resItems(x){a(g,n(x))}}),q(2),v(k),K(()=>Y(T,`${e(t)??""} `)),r(_,m),ne()}var Tv=A('<div class="uid svelte-yz275t"> </div>'),Lv=A('<div class="ip svelte-yz275t"> </div>'),Nv=A('<div class="date svelte-yz275t"> </div>'),Rv=A('<div class="header svelte-yz275t"><!> <div class="header svelte-yz275t"><!> <!></div></div>'),Dv=A('<div class="details svelte-yz275t"><div class="flex svelte-yz275t"><div class="label svelte-yz275t">Session ID:</div> </div> <div class="flex svelte-yz275t"><div class="label svelte-yz275t">User ID:</div> </div> <div class="flex svelte-yz275t"><div class="label svelte-yz275t">Expires:</div> </div> <div class="flex svelte-yz275t"><div class="label svelte-yz275t">Last Seen:</div> </div> <div class="flex svelte-yz275t"><div class="label svelte-yz275t">State:</div> </div> <div class="flex svelte-yz275t"><div class="label svelte-yz275t">IP:</div> </div> <div class="flex svelte-yz275t"><div class="label svelte-yz275t">MFA:</div> <!></div></div>'),jv=A('<div class="container svelte-yz275t"><!></div>');function ns(_,s){le(s,!0);let t=G(s,"session",27,()=>n({})),d=G(s,"now",11,0);var i=jv(),g=c(i);ot(g,{header:f=>{var u=Rv(),I=c(u);Ze(I,{text:"User ID",children:(m,T)=>{var k=Tv(),h=c(k,!0);v(k),K(()=>Y(h,t().user_id)),r(m,k)},$$slots:{default:!0}});var E=l(I,2),o=c(E);Ze(o,{text:"Peer IP",children:(m,T)=>{var k=Lv(),h=c(k,!0);v(k),K(()=>Y(h,t().remote_ip)),r(m,k)},$$slots:{default:!0}});var $=l(o,2);Ze($,{text:"Last Seen",children:(m,T)=>{var k=Nv(),h=c(k,!0);K(()=>Y(h,ut(t().last_seen))),v(k),r(m,k)},$$slots:{default:!0}}),v(E),v(u),r(f,u)},body:f=>{var u=Dv(),I=c(u),E=l(c(I));v(I);var o=l(I,2),$=l(c(o));v(o);var m=l(o,2),T=l(c(m));K(()=>Y(T,` ${ut(t().exp)??""}`)),v(m);var k=l(m,2),h=l(c(k));K(()=>Y(h,` ${ut(t().last_seen)??""}`)),v(k);var y=l(k,2),w=l(c(y));v(y);var b=l(y,2),x=l(c(b));v(b);var p=l(b,2),S=l(c(p),2);ea(S,{get check(){return t().is_mfa}}),v(p),v(u),K(()=>{Y(E,` ${t().id??""}`),Y($,` ${t().user_id??""}`),Y(w,` ${t().state??""}`),Y(x,` ${t().remote_ip??""}`)}),r(f,u)},$$slots:{header:!0,body:!0}}),v(i),K(()=>Et(i,"expired",t().exp<d())),r(_,i),ne()}var Pv=A('<div class="svelte-80zd7k"><!></div>'),zv=A('<div class="svelte-80zd7k"><!></div>'),Ov=A('<div class="content"><div class="row svelte-80zd7k"><!> <div class="button svelte-80zd7k"><!></div></div> <div id="sessions" class="svelte-80zd7k"><!></div> <!></div>');function Mv(_,s){le(s,!0);let t=C(""),d=C(n([])),i=C(n([])),g=C(n([])),f=C(Date.now()/1e3),u=C(""),I=C(!1),E=C(15),o=C(""),$=C(1),m=[{label:"User ID",callback:(U,Q)=>{var M;return(M=U.user_id)==null?void 0:M.toLowerCase().includes(Q.toLowerCase())}},{label:"Session ID",callback:(U,Q)=>U.id.toLowerCase().includes(Q.toLowerCase())},{label:"IP",callback:(U,Q)=>{var M;return(M=U.remote_ip)==null?void 0:M.toLowerCase().includes(Q.toLowerCase())}}],T=[{label:"Expires",callback:(U,Q)=>U.exp-Q.exp},{label:"Last Seen",callback:(U,Q)=>U.last_seen-Q.last_seen},{label:"Session ID",callback:(U,Q)=>U.id.localeCompare(Q.id)},{label:"User ID",callback:(U,Q)=>{var M;return(M=U.user_id)==null?void 0:M.localeCompare(Q.user_id)}},{label:"State",callback:(U,Q)=>U.state.localeCompare(Q.state)},{label:"IP",callback:(U,Q)=>{var M;return(M=U.remote_ip)==null?void 0:M.localeCompare(Q.remote_ip)}}];Ne(()=>{k()});async function k(U,Q,M,W){let J;if(U===!0?M&&e($)===2?J=await Ja(W||e(E),Q,void 0,!1):J=await Ja(W||e(E),Q,e(o),M):J=await qr(),!J.ok)a(t,"Error fetching sessions: "+J.body.message);else{J.status===206?(a(E,n(Number.parseInt(J.headers.get("x-page-size"),10))),a(o,n(J.headers.get("x-continuation-token"))),a(u,"session")):a(u,"");let Z=await J.json();a(d,n([...Z])),a(i,n([...Z])),a(f,Date.now()/1e3)}}async function h(U,Q){await k(!0,U,Q),Q?a($,e($)-1):a($,e($)+1)}async function y(U){a(o,""),await k(!0,0,!1,U),a($,1)}async function w(){let U=await Gr();if(U.ok)Oa();else{let Q=await U.json();a(t,n(Q.message))}a(f,n(new Date))}var b=Ov(),x=c(b),p=c(x);Lt(p,{get items(){return e(d)},searchOptions:m,orderOptions:T,firstDirReverse:!0,get resItems(){return e(i)},set resItems(U){a(i,n(U))},get useServerSideIdx(){return e(u)},set useServerSideIdx(U){a(u,n(U))},get isSearchFiltered(){return e(I)},set isSearchFiltered(U){a(I,n(U))}});var S=l(p,2);oe(S,"margin-top","-10px");var L=c(S);Se(L,{level:3,$$events:{click:w},children:(U,Q)=>{q();var M=B("Invalidate All Sessions");r(U,M)},$$slots:{default:!0}}),v(S),v(x);var D=l(x),j=l(D),N=c(j);{var V=U=>{var Q=me(),M=ee(Q);We(M,19,()=>e(d),W=>W.id,(W,J,Z)=>{var re=Pv(),ve=c(re);ns(ve,{get session(){return e(d)[e(Z)]},set session(be){e(d)[e(Z)]=be},get now(){return e(f)},set now(be){a(f,n(be))}}),v(re),r(W,re)}),r(U,Q)},R=U=>{var Q=me(),M=ee(Q);We(M,19,()=>e(g),W=>W.id,(W,J,Z)=>{var re=zv(),ve=c(re);ns(ve,{get session(){return e(g)[e(Z)]},set session(be){e(g)[e(Z)]=be},get now(){return e(f)},set now(be){a(f,n(be))}}),v(re),r(W,re)}),r(U,Q)};P(N,U=>{e(u)&&!e(I)?U(V):U(R,!1)})}v(j);var F=l(j,2);{var z=U=>{as(U,{fetchPageCallback:h,sspPageSizeChange:y,get sspPage(){return e($)},set sspPage(Q){a($,n(Q))},get sspPageSize(){return e(E)},set sspPageSize(Q){a(E,n(Q))},get sspContinuationToken(){return e(o)},set sspContinuationToken(Q){a(o,n(Q))}})},O=U=>{jt(U,{get items(){return e(i)},set items(Q){a(i,n(Q))},get resItems(){return e(g)},set resItems(Q){a(g,n(Q))}})};P(F,U=>{e(u)&&!e(I)?U(z):U(O,!1)})}v(b),K(()=>Y(D,` ${e(t)??""} `)),r(_,b),ne()}var Uv=A('<div class="header font-label svelte-1mi5990">ADD NEW USER ATTRIBUTE</div>'),qv=A('<div class="mainErr err svelte-1mi5990"> </div>'),Gv=A('<div class="container svelte-1mi5990"><div class="desc svelte-1mi5990">You can add a new custom user attribute.<br> These attributes can be set for every user and mapped to an existing scope.<br> They are simple Key / JsonValue pairs.</div> <!> <!> <!> <!> <!></div>');function Wv(_,s){le(s,!0);let t=G(s,"idx",31,()=>-1),d=C(""),i=C(void 0),g=n({name:"",desc:""}),f=C(n({}));const u=He().shape({name:he().trim().required("Name is required").matches(Ma,"Invalid characters: [a-z0-9-_/]{2,32}"),desc:he().trim().matches(Ua,"Invalid characters: [a-zA-Z0-9\\-_/\\s]{0,128}")});async function I(){if(!await E())return;a(d,"");let o=await Br(g);if(o.ok)a(i,!1),s.onSave();else{let $=await o.json();a(d,n($.message))}}async function E(){try{return await u.validate(g,{abortEarly:!1}),a(f,n({})),!0}catch(o){return a(f,n(Ye(o))),!1}}ot(_,{get idx(){return t()},set idx(o){t(o)},get show(){return e(i)},set show(o){a(i,n(o))},header:o=>{var $=Uv();r(o,$)},body:o=>{var $=Gv(),m=l(c($),2);ie(m,{autocomplete:"off",placeholder:"Name",get value(){return g.name},set value(b){g.name=b},get error(){return e(f).name},set error(b){e(f).name=b},$$events:{input:E},children:(b,x)=>{q();var p=B("NAME");r(b,p)},$$slots:{default:!0}});var T=l(m,2);ie(T,{autocomplete:"off",placeholder:"Description",get value(){return g.desc},set value(b){g.desc=b},get error(){return e(f).desc},set error(b){e(f).desc=b},$$events:{input:E},children:(b,x)=>{q();var p=B("DESCRIPTION");r(b,p)},$$slots:{default:!0}});var k=l(T,2);Se(k,{level:1,$$events:{click:I},children:(b,x)=>{q();var p=B("SAVE");r(b,p)},$$slots:{default:!0}});var h=l(k,2);P(h,b=>{});var y=l(h,2);{var w=b=>{var x=qv(),p=c(x,!0);v(x),K(()=>Y(p,e(d))),r(b,x)};P(y,b=>{e(d)&&b(w)})}v($),r(o,$)},$$slots:{header:!0,body:!0}}),ne()}var Kv=A('<div class="success svelte-2o3w7i">Success</div>'),Fv=A('<div class="mainErr err svelte-2o3w7i"> </div>'),Vv=A('<div class="container svelte-2o3w7i"><!> <!> <!> <!> <!></div>');function Bv(_,s){le(s,!0);let t=G(s,"attr",19,()=>({})),d=C(""),i=C(!1),g=C(void 0);Te(()=>{e(i)&&a(g,n(setTimeout(()=>{a(i,!1),s.onSave()},2e3)))}),Ne(()=>()=>clearTimeout(e(g)));let f=C(n({})),u=n({});const I=He().shape({name:he().trim().required("Name is required").matches(Ma,"Valid characters: [a-z0-9-_/]{2,32}"),desc:he().nullable().trim().matches(Ua,"Valid characters: [a-zA-Z0-9\\-_/\\s]{0,128}")});Ne(()=>{u.name=t().name,u.desc=t().desc});async function E(){if(a(d,""),!await o()){a(d,"Invalid input");return}let x={name:u.name,desc:u.desc},p=await Jr(t().name,x);if(p.ok)a(i,!0);else{let S=await p.json();a(d,n(S.message))}}async function o(){try{return await I.validate(u,{abortEarly:!1}),a(f,n({})),!0}catch(x){return a(f,n(Ye(x))),!1}}var $=Vv(),m=c($);ie(m,{autocomplete:"off",placeholder:"Name",get value(){return u.name},set value(x){u.name=x},get error(){return e(f).name},set error(x){e(f).name=x},$$events:{input:o},children:(x,p)=>{q();var S=B("NAME");r(x,S)},$$slots:{default:!0}});var T=l(m,2);ie(T,{autocomplete:"off",placeholder:"Description",get value(){return u.desc},set value(x){u.desc=x},get error(){return e(f).desc},set error(x){e(f).desc=x},$$events:{input:o},children:(x,p)=>{q();var S=B("DESCRIPTION");r(x,S)},$$slots:{default:!0}});var k=l(T,2);Se(k,{level:1,width:"4rem",$$events:{click:E},children:(x,p)=>{q();var S=B("SAVE");r(x,S)},$$slots:{default:!0}});var h=l(k,2);{var y=x=>{var p=Kv();r(x,p)};P(h,x=>{e(i)&&x(y)})}var w=l(h,2);{var b=x=>{var p=Fv(),S=c(p,!0);v(p),K(()=>Y(S,e(d))),r(x,p)};P(w,x=>{e(d)&&x(b)})}v($),r(_,$),ne()}var Jv=A('<div class="err svelte-1jljqe9"> </div>'),Yv=A('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this custom attribute?</div> <!> <!></div>');function Hv(_,s){le(s,!0);let t=G(s,"attr",19,()=>({})),d=C(!1),i=C("");async function g(){a(i,""),a(d,!0);let o=await Yr(t().name);if(o.ok)s.onSave();else{let $=await o.json();a(i,n($.message))}a(d,!1)}var f=Yv(),u=l(c(f),2);Se(u,{level:1,get isLoading(){return e(d)},set isLoading(o){a(d,n(o))},$$events:{click:g},children:(o,$)=>{q();var m=B("DELETE");r(o,m)},$$slots:{default:!0}});var I=l(u,2);{var E=o=>{var $=Jv(),m=c($,!0);v($),K(()=>Y(m,e(i))),r(o,$)};P(I,o=>{e(i)&&o(E)})}v(f),r(_,f),ne()}var Xv=A('<div class="data svelte-115hohv"> </div>'),Zv=A('<div class="header svelte-115hohv"><!></div>'),Qv=A("<div><!></div>"),ed=A("<div><!></div>"),td=A("<div><!> <!></div>");function ad(_,s){le(s,!0);let t=G(s,"attr",27,()=>n({})),d=G(s,"onSave",15),i=C(void 0);const g=["Config","Delete"];let f=C(n(g[0]));const u=200,I=u/2;function E(){a(i,!1),d()()}ot(_,{get show(){return e(i)},set show(o){a(i,n(o))},header:o=>{var $=Zv(),m=c($);Ze(m,{text:"Custom Attribute Name",children:(T,k)=>{var h=Xv(),y=c(h,!0);v(h),K(()=>Y(y,t().name)),r(T,h)},$$slots:{default:!0}}),v($),r(o,$)},body:o=>{var $=td(),m=c($);Dt(m,{labels:g,get selected(){return e(f)},set selected(y){a(f,n(y))}});var T=l(m,2);{var k=y=>{var w=Qv(),b=c(w);Bv(b,{get attr(){return t()},get onSave(){return d()},set onSave(x){d(x)}}),v(w),ce(5,w,()=>_e,()=>({delay:I,duration:u})),ce(6,w,()=>_e,()=>({duration:u})),r(y,w)},h=y=>{var w=me(),b=ee(w);{var x=p=>{var S=ed(),L=c(S);Hv(L,{get attr(){return t()},onSave:E}),v(S),ce(5,S,()=>_e,()=>({delay:I,duration:u})),ce(6,S,()=>_e,()=>({duration:u})),r(p,S)};P(b,p=>{e(f)==="Delete"&&p(x)},!0)}r(y,w)};P(T,y=>{e(f)==="Config"?y(k):y(h,!1)})}v($),r(o,$)},$$slots:{header:!0,body:!0}}),ne()}var sd=A('<div class="svelte-1yl9ae5"><!></div>'),rd=A(' <div class="content"><!> <!> <div id="attrs" class="svelte-1yl9ae5"></div> <!> <div style="height: 20px"></div></div>',1);function id(_,s){le(s,!0);let t=C(""),d=C(n([])),i=C(n([])),g=C(n([])),f=C(""),u=[{label:"NAME",callback:(b,x)=>b.name.toLowerCase().includes(x.toLowerCase())}],I=[{label:"NAME",callback:(b,x)=>b.name.localeCompare(x.name)}];Ne(()=>{E()});async function E(){let b=await ma();if(!b.ok)a(t,"Error fetching user attr: "+b.body.message);else{let x=await b.json();a(d,n([...x.values]))}}function o(){e(d).length<2&&(a(d,n([])),a(i,n([])),a(g,n([]))),E(),a(f,"")}q();var $=rd(),m=ee($),T=l(m),k=c(T);Lt(k,{get items(){return e(d)},searchOptions:u,orderOptions:I,get resItems(){return e(i)},set resItems(b){a(i,n(b))},get search(){return e(f)},set search(b){a(f,n(b))}});var h=l(k,2);Wv(h,{onSave:o});var y=l(h,2);We(y,23,()=>e(g),b=>b.name,(b,x,p)=>{var S=sd(),L=c(S);ad(L,{onSave:o,get attr(){return e(g)[e(p)]},set attr(D){e(g)[e(p)]=D}}),v(S),r(b,S)}),v(y);var w=l(y,2);jt(w,{get items(){return e(i)},set items(b){a(i,n(b))},get resItems(){return e(g)},set resItems(b){a(g,n(b))}}),q(2),v(T),K(()=>Y(m,`${e(t)??""} `)),r(_,$),ne()}var ld=A('<div class="row svelte-151ox8b"><div class="columnWide svelte-151ox8b"> </div> <div class="column svelte-151ox8b"> </div> <div class="column svelte-151ox8b"> </div> <div class="column svelte-151ox8b"> </div></div>'),nd=A('<div class="container svelte-151ox8b"><div class="row svelte-151ox8b"><div class="columnWide svelte-151ox8b">Time Taken (ms)</div> <div class="column svelte-151ox8b">t_cost</div> <div class="column svelte-151ox8b">m_cost</div> <div class="column svelte-151ox8b">p_cost</div></div> <!> <div style="height: 20px"></div></div>');function od(_,s){let t=G(s,"res",19,()=>[]);var d=nd(),i=l(c(d),2);We(i,17,t,yt,(g,f)=>{var u=ld(),I=c(u),E=c(I,!0);v(I);var o=l(I,2),$=c(o,!0);v(o);var m=l(o,2),T=c(m,!0);v(m);var k=l(m,2),h=c(k,!0);v(k),v(u),K(()=>{Y(E,e(f).time_taken),Y($,e(f).t_cost),Y(T,e(f).m_cost),Y(h,e(f).p_cost)}),r(g,u)}),q(2),v(d),r(_,d)}var vd=A('<div class="result svelte-1digv30"><!></div>'),dd=A('<div class="wrapper svelte-1digv30"><div class="container svelte-1digv30"><!> <!> <!> <!></div> <!></div>');function cd(_,s){le(s,!0);const t="170px";let d=C(!1),i=C(!1),g=C(void 0),f=C(void 0),u=n({targetTime:1e3,mCost:32768,pCost:2}),I=C(n({}));const E=He().shape({targetTime:wt().required("Target Time is required").min(500,"Cannot be lower than 500").max(99999,"Cannot be higher than 99999"),mCost:wt().min(32768,"Cannot be lower than 32768").max(1048576,"Cannot be higher than 1048576"),pCost:wt().min(2,"Cannot be lower than 2").max(1024,"Cannot be higher than 1024")});Te(()=>{e(i)&&e(g)&&a(f,n(window.innerHeight))});function o(p){p.code==="Enter"&&$()}async function $(){try{await E.validate(u,{abortEarly:!1}),a(I,n({}))}catch(D){a(I,n(Ye(D)));return}a(d,!0),a(i,!1);const p={target_time:Number.parseInt(u.targetTime),m_cost:Number.parseInt(u.mCost),p_cost:Number.parseInt(u.pCost)},S=await Tr(p),L=await S.json();S.ok?(a(g,n(L.results)),a(i,!0)):L.message,a(d,!1)}var m=dd(),T=c(m),k=c(T);ie(k,{type:"number",autocomplete:"off",placeholder:"Target Time (ms)",width:t,get value(){return u.targetTime},set value(p){u.targetTime=p},get error(){return e(I).targetTime},set error(p){e(I).targetTime=p},$$events:{keypress:o},children:(p,S)=>{q();var L=B("TARGET TIME (ms)");r(p,L)},$$slots:{default:!0}});var h=l(k,2);ie(h,{type:"number",autocomplete:"off",placeholder:"m_cost (kB)",width:t,get value(){return u.mCost},set value(p){u.mCost=p},get error(){return e(I).mCost},set error(p){e(I).mCost=p},$$events:{keypress:o},children:(p,S)=>{q();var L=B("M_COST (kB)");r(p,L)},$$slots:{default:!0}});var y=l(h,2);ie(y,{type:"number",autocomplete:"off",placeholder:"p_cost",width:t,get value(){return u.pCost},set value(p){u.pCost=p},get error(){return e(I).pCost},set error(p){e(I).pCost=p},$$events:{keypress:o},children:(p,S)=>{q();var L=B("P_COST");r(p,L)},$$slots:{default:!0}});var w=l(y,2);Se(w,{get isLoading(){return e(d)},level:1,$$events:{click:$},children:(p,S)=>{q();var L=B("CALCULATE");r(p,L)},$$slots:{default:!0}}),v(T);var b=l(T,2);{var x=p=>{var S=vd(),L=c(S);od(L,{get res(){return e(g)}}),v(S),r(p,S)};P(b,p=>{e(i)&&p(x)})}v(m),Fs("y",()=>e(f),p=>a(f,n(p))),r(_,m),ne()}var ud=A(`<div class="container svelte-6927oe"><h3>Argon2ID - Password Hashing</h3> <p>This utility helps you find the best argon2id settings for your platform.<br> Argon2id is currently the safest available password hashing algorithm. To use it to its fullest potential, it
        has
        to be tuned for each deployment.</p> <p><b>Important:These values need to be tuned on the final architecture!</b><br> They change depending on the capabilities of the system. The more powerful the system, the more safe these
        values
        can be.</p> <p>If you want a detailed introduction to argon2id, many sources exist online. This guide will just give very short
        overview about the values.<br> Three of them need to be configured:</p> <ul><li><b>m cost</b> <p>The <code class="svelte-6927oe">m_cost</code> defines the amount of <b>memory (in kB)</b>, which is used for the hashing.<br> The higher the value, the better, of course. But you need to keep in mind the servers resources.<br> When you hash 4 passwords at the same time, for instance, the backend needs <code class="svelte-6927oe">4 x m_cost</code> during the
                hashing. These resources must be available.</p> <p>Tuning <code class="svelte-6927oe">m_cost</code> is pretty easy. If you can give rauthy 1GB of memory for hashing operations,
                give it
                1GB. If you can sacrifice 4GB, give it 4GB.</p> <p><b>Important: You should never go below an <code class="svelte-6927oe">m_cost</code> of <code class="svelte-6927oe">32768</code></b>.</p></li> <li><b>p cost</b> <p>The <code class="svelte-6927oe">p_cost</code> defines the amount of <b>parallelism</b> for hashing.<br> This value most often tops out at ~8, which is the default for Rauthy.<br> <code class="svelte-6927oe">p_cost</code> does not affect the time needed for the calculation, if the resources are available.</p> <p>The general rule is:<br> Set the <code class="svelte-6927oe">p_cost</code> to twice the size of cores your have available.<br> For instance, if you have 4 cores available, set the <code class="svelte-6927oe">p_cost</code> to <code class="svelte-6927oe">8</code>.<br></p></li> <li><b>t cost</b> <p>The <code class="svelte-6927oe">t_cost</code> defines the amount of <b>time</b> for hashing.<br> This value is actually the only one, that needs tuning, since <code class="svelte-6927oe">m_cost</code> and <code class="svelte-6927oe">p_cost</code> are
                basically given by the environment.</p> <p>Tuning is easy: Set <code class="svelte-6927oe">m_cost</code> and <code class="svelte-6927oe">p_cost</code> accordingly and then increase <code class="svelte-6927oe">t_cost</code> as long as you have not reached your hashing-time-goal.</p></li></ul> <br> <h3>A word about Login Time</h3> <p>Generally, users want everything as fast as possible. When doing a safe login though, a time between 500 - 1000
        ms
        should not be a problem.<br> The login time must not be too short, since it would lower the strength of the hash, of course.</p> <p>To provide as much safety by default as possible, this utility does not allow you to go below 500 ms for the
        login
        time.</p> <br> <h3>Current values</h3> <p>The current values from the backend are the following:</p> <div><div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>m_cost</b>:</div> </div> <div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>p_cost</b>:</div> </div> <div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>t_cost</b>:</div> </div> <br> <div class="valRow svelte-6927oe"><div class="label svelte-6927oe"><b>Login Time</b>:</div> </div> <p><i>Note:</i> The Login Time from the backend does only provide a good guideline after at least 5 successful
            logins, after
            rauthy has been started.<br> The base value is always 2000 ms after a fresh restart and will adjust over time with each successful login.</p> <b>Threads (p_cost) rauthy has access to</b> <br></div> <br> <h3>Parameter Calculation Utility</h3> <p>You can use this tool to approximate good values for your deployment.<br> Keep in mind, that this should be executed with rauthy in its final place with all final resources
        available.<br><br> You should execute this utility during load to not over tune.<br><br> <code class="svelte-6927oe">m_cost</code> is optional and the safe minimal value of <code class="svelte-6927oe">32768</code> would be chosen, if empty.<br> <code class="svelte-6927oe">p_cost</code> is optional and rauthy will utilize all threads it can see, if empty.<br></p> <!> <div style="height: 20px"></div></div>`);function hd(_,s){le(s,!0);let t=C(void 0),d=C(void 0),i=C(void 0);Ne(()=>{g()});async function g(){let x=await Ar(),p=await x.json();x.ok?(a(t,n(p.argon2_params)),a(d,n(p.login_time)),a(i,n(p.num_cpus))):p.message}var f=ud(),u=l(c(f),8);oe(u,"margin-left","-10px");var I=l(u,16),E=c(I),o=l(c(E));v(E);var $=l(E,2),m=l(c($));v($);var T=l($,2),k=l(c(T));v(T);var h=l(T,4),y=l(c(h));v(h);var w=l(h,5);q(),v(I);var b=l(I,8);cd(b,{}),q(2),v(f),K(()=>{var x,p,S;Y(o,` ${((x=e(t))==null?void 0:x.m_cost)??""}`),Y(m,` ${((p=e(t))==null?void 0:p.p_cost)??""}`),Y(k,` ${((S=e(t))==null?void 0:S.t_cost)??""}`),Y(y,` ${e(d)??""} ms`),Y(w,`: ${e(i)??""}`)}),r(_,f),ne()}var pd=A('<li class="font-mono"> </li>'),md=A('<div class="err svelte-3rk97c"> </div>'),gd=A('<div class="success svelte-3rk97c">Success</div>'),fd=A(`<div class="wrapper svelte-3rk97c"><div class="desc svelte-3rk97c"><h3>Secrets Encryption Keys</h3> <p>These Keys are used for an additional encryption at rest, independently from any data store technology used
            under
            the hood. They are configured statically, but can be rotated and migrated on this page manually to maybe get
            rid
            of an old key, which is currently still in use in some places.</p> <p>The active key is statically set in the Rauthy config file / environment variables. It cannot be changed
            here
            dynamically.<br> <b>All new JWK encryption's will always use the currently active key.</b></p> <div class="valRow svelte-3rk97c"><div class="label svelte-3rk97c">Active Key:</div> <div class="value font-mono"> </div></div> <div class="keysBlock svelte-3rk97c"><div>Available Keys:</div> <ul></ul></div> <div class="migrateBlock svelte-3rk97c"><p>If you migrate all existing secrets, it might take a few seconds to finish, if you have a big
                dataset.<br> Manually migrate all existing encryption in the backend to key:</p> <!></div></div> <div class="btn svelte-3rk97c"><!></div> <!> <!></div>`);function yd(_,s){le(s,!0);let t=C(""),d=C(!0),i=C(""),g=C(""),f=C(n([])),u=C(!1);Ne(async()=>{I()});async function I(){let N=await kr(),V=await N.json();N.ok?(a(i,n(V.active)),a(g,n(V.active)),a(f,n(V.keys))):a(t,n(V.message)),a(d,!1)}async function E(){a(d,!0),a(u,!1);let N={key_id:e(g)},V=await xr(N);if(V.ok)a(u,!0);else{let R=await V.json();a(t,n(R.message))}a(d,!1)}var o=fd(),$=c(o),m=l(c($),6),T=l(c(m),2),k=c(T,!0);v(T),v(m);var h=l(m,2),y=l(c(h),2);oe(y,"margin-left","-10px"),We(y,21,()=>e(f),yt,(N,V)=>{var R=pd(),F=c(R,!0);v(R),K(()=>Y(F,e(V))),r(N,R)}),v(y),v(h);var w=l(h,2),b=l(c(w),2);kt(b,{get options(){return e(f)},width:"186px",get value(){return e(g)},set value(N){a(g,n(N))}}),v(w),v($);var x=l($,2),p=c(x);Se(p,{get isLoading(){return e(d)},set isLoading(N){a(d,n(N))},$$events:{click:E},children:(N,V)=>{q();var R=B("MIGRATE");r(N,R)},$$slots:{default:!0}}),v(x);var S=l(x,2);{var L=N=>{var V=md(),R=c(V,!0);v(V),K(()=>Y(R,e(t))),r(N,V)};P(S,N=>{e(t)&&N(L)})}var D=l(S,2);{var j=N=>{var V=gd();r(N,V)};P(D,N=>{e(u)&&N(j)})}v(o),K(()=>Y(k,e(i))),r(_,o),ne()}var wd=A('<div class="success svelte-10h0sak">Success</div>'),bd=A('<div class="err svelte-10h0sak"> </div>'),$d=A('<div class="row svelte-10h0sak"><!> <!></div> <div class="row svelte-10h0sak"><!> <!></div> <div class="row svelte-10h0sak"><!> <!></div> <div class="desc svelte-10h0sak"><p>Validity for a new password.<br> Not Recently Used denied the last n used passwords.<br> Setting no value at all with disable the given option.</p></div> <div class="row svelte-10h0sak"><!> <!></div> <!> <!> <!>',1),_d=A('<div class="wrapper svelte-10h0sak"><div class="desc svelte-10h0sak"><h3>Password Policy</h3> <p>Configure the password policy.<br> The policy is being applied to all passwords being set from this moment on.</p></div> <!></div>');function kd(_,s){le(s,!0);const t="160px";let d=C(!1),i=C(""),g=C(!1),f=C(void 0),u=C(void 0),I=C(n({}));const E=He().shape({length_min:wt().required("Min Length is required").min(8,"Cannot be lower than 8").max(128,"Cannot be higher than 128"),length_max:wt().required("Max Length is required").min(8,"Cannot be lower than 8").max(128,"Cannot be higher than 128"),not_recently_used:wt().nullable().min(0,"Cannot be lower than 0").max(10,"Cannot be higher than 10"),valid_days:wt().nullable().min(0,"Cannot be lower than 0").max(3650,"Cannot be higher than 3650"),include_digits:wt().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32"),include_lower_case:wt().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32"),include_upper_case:wt().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32"),include_special:wt().nullable().min(0,"Cannot be lower than 0").max(32,"Cannot be higher than 32")});Te(()=>{e(g)&&a(f,n(setTimeout(()=>{a(g,!1)},3e3)))}),Ne(async()=>{if(!e(u)){let y=await ja(),w=await y.json();y.ok?(a(u,n(w)),e(u).length_min=w.length_min||0,e(u).length_max=w.length_max||0,e(u).include_digits=w.include_digits||0,e(u).include_lower_case=w.include_lower_case||0,e(u).include_upper_case=w.include_upper_case||0,e(u).include_special=w.include_special||0,e(u).length_max=w.length_max||0,e(u).valid_days=w.valid_days||0,e(u).not_recently_used=w.not_recently_used||0):a(i,n(w.message))}});function o(y){y.code==="Enter"&&$()}async function $(){if(!await m())return;a(i,""),a(d,!0);let y=e(u);y.not_recently_used===0&&(y.not_recently_used=null),y.valid_days===0&&(y.valid_days=null),y.include_digits===0&&(y.include_digits=null),y.include_lower_case===0&&(y.include_lower_case=null),y.include_upper_case===0&&(y.include_upper_case=null),y.include_special===0&&(y.include_special=null);let w=await Lr(y);if(w.ok)a(g,!0);else{let b=await w.json();a(i,n(b.message))}a(d,!1)}async function m(){try{return a(I,n({})),await E.validate(e(u),{abortEarly:!1}),e(u).length_min=Number.parseInt(e(u).length_min),e(u).length_max=Number.parseInt(e(u).length_max),e(u).include_digits=Number.parseInt(e(u).include_digits),e(u).include_lower_case=Number.parseInt(e(u).include_lower_case),e(u).include_upper_case=Number.parseInt(e(u).include_upper_case),e(u).include_special=Number.parseInt(e(u).include_special),e(u).length_max=Number.parseInt(e(u).length_max),e(u).valid_days=Number.parseInt(e(u).valid_days),e(u).not_recently_used=Number.parseInt(e(u).not_recently_used),e(u).length_max<e(u).length_min?(e(I).length_max="Max Length cannot be lower than Min Length",!1):e(u).include_digits+e(u).include_lower_case+e(u).include_upper_case+e(u).include_special>e(u).length_max?(e(I).length_max="The sum of all includes does not fit into Max Length",!1):!0}catch(y){return a(I,n(Ye(y))),!1}}var T=_d(),k=l(c(T),2);{var h=y=>{var w=$d(),b=ee(w),x=c(b);ie(x,{type:"number",autocomplete:"off",width:t,get value(){return e(u).length_min},set value(J){e(u).length_min=J},get error(){return e(I).length_min},set error(J){e(I).length_min=J},$$events:{keypress:o,input:m},children:(J,Z)=>{q();var re=B("MIN LENGTH");r(J,re)},$$slots:{default:!0}});var p=l(x,2);ie(p,{type:"number",autocomplete:"off",width:t,get value(){return e(u).length_max},set value(J){e(u).length_max=J},get error(){return e(I).length_max},set error(J){e(I).length_max=J},$$events:{keypress:o,input:m},children:(J,Z)=>{q();var re=B("MAX LENGTH");r(J,re)},$$slots:{default:!0}}),v(b);var S=l(b,2),L=c(S);ie(L,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_lower_case},set value(J){e(u).include_lower_case=J},get error(){return e(I).include_lower_case},set error(J){e(I).include_lower_case=J},$$events:{keypress:o,input:m},children:(J,Z)=>{q();var re=B("INCLUDE LOWERCASE");r(J,re)},$$slots:{default:!0}});var D=l(L,2);ie(D,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_upper_case},set value(J){e(u).include_upper_case=J},get error(){return e(I).include_upper_case},set error(J){e(I).include_upper_case=J},$$events:{keypress:o,input:m},children:(J,Z)=>{q();var re=B("INCLUDE UPPERCASE");r(J,re)},$$slots:{default:!0}}),v(S);var j=l(S,2),N=c(j);ie(N,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_digits},set value(J){e(u).include_digits=J},get error(){return e(I).include_digits},set error(J){e(I).include_digits=J},$$events:{keypress:o,input:m},children:(J,Z)=>{q();var re=B("INCLUDE DIGITS");r(J,re)},$$slots:{default:!0}});var V=l(N,2);ie(V,{type:"number",autocomplete:"off",width:t,get value(){return e(u).include_special},set value(J){e(u).include_special=J},get error(){return e(I).include_special},set error(J){e(I).include_special=J},$$events:{keypress:o,input:m},children:(J,Z)=>{q();var re=B("INCLUDE SPECIAL");r(J,re)},$$slots:{default:!0}}),v(j);var R=l(j,4),F=c(R);ie(F,{type:"number",autocomplete:"off",width:t,get value(){return e(u).not_recently_used},set value(J){e(u).not_recently_used=J},get error(){return e(I).not_recently_used},set error(J){e(I).not_recently_used=J},$$events:{keypress:o,input:m},children:(J,Z)=>{q();var re=B("NOT RECENTLY USED");r(J,re)},$$slots:{default:!0}});var z=l(F,2);ie(z,{type:"number",autocomplete:"off",width:t,get value(){return e(u).valid_days},set value(J){e(u).valid_days=J},get error(){return e(I).valid_days},set error(J){e(I).valid_days=J},$$events:{keypress:o,input:m},children:(J,Z)=>{q();var re=B("VALID FOR DAYS");r(J,re)},$$slots:{default:!0}}),v(R);var O=l(R,2);Se(O,{level:1,width:"4rem",get isLoading(){return e(d)},set isLoading(J){a(d,n(J))},$$events:{click:$},children:(J,Z)=>{q();var re=B("SAVE");r(J,re)},$$slots:{default:!0}});var U=l(O,2);{var Q=J=>{var Z=wd();r(J,Z)};P(U,J=>{e(g)&&J(Q)})}var M=l(U,2);{var W=J=>{var Z=bd(),re=c(Z,!0);v(Z),K(()=>Y(re,e(i))),r(J,Z)};P(M,J=>{e(i)&&J(W)})}r(y,w)};P(k,y=>{e(u)&&y(h)})}v(T),r(_,T),ne()}var xd=A('<div class="details svelte-2yt27i"><div class="detailsInner svelte-2yt27i"><textarea class="font-mono text svelte-2yt27i"></textarea></div></div>'),Ed=A('<div role="none" class="cert svelte-2yt27i"><div class="data font-mono svelte-2yt27i"> </div> <div class="data right svelte-2yt27i"> </div> <!></div>');function Id(_,s){le(s,!0);let t=C(!1);function d(){if(s.jwk.kty==="OKP")return s.jwk.crv;if(s.jwk.kty==="RSA"){let $;const m=s.jwk.n.length;return m>600?$=4096:m>400?$=3072:$=2048,`RSA ${$}`}return"unknown type"}var i=Ed(),g=c(i),f=c(g,!0);v(g);var u=l(g,2),I=c(u,!0);K(()=>Y(I,d())),v(u);var E=l(u,2);{var o=$=>{var m=xd(),T=c(m),k=c(T);pa(k),ue(k,"rows",10),ue(k,"cols",40),K(()=>Gs(k,JSON.stringify(s.jwk,null,2))),v(T),v(m),K(()=>ue(k,"name",s.jwk.kid)),ce(7,m,()=>ht),r($,m)};P(E,$=>{e(t)&&$(o)})}v(i),K(()=>Y(f,s.jwk.kid)),Me("mouseenter",i,()=>a(t,!0)),Me("mouseleave",i,()=>a(t,!1)),r(_,i),ne()}var Sd=A('<div class="success svelte-a4xw46">Success</div>'),Cd=A('<div class="err svelte-a4xw46"> </div>'),Ad=A(`<div class="wrapper svelte-a4xw46"><div class="desc svelte-a4xw46"><h3>Json Web Keys</h3> <p>These are the Json Web Keys (JWKs) used for token singing.</p> <p>You can rotate them and generate a full new set. Depending on your deployment, this could take a few
            seconds.<br> New tokens will always be signed with the new / latest ones. The old keys will be cleaned up automatically,
            when
            there cannot be a token anymore that used the old key to not
            break any current token validation.</p></div> <!> <!> <!> <!></div>`);function Td(_,s){le(s,!0);let t=C(n([])),d=C(!1),i=C(""),g=C(!1),f=C(void 0);Te(()=>{e(g)&&a(f,n(setTimeout(()=>{a(g,!1)},3e3)))}),Ne(()=>{e(t).length===0&&u()});async function u(){let y=await cr(),w=await y.json();y.ok?a(t,n([...w.keys])):a(i,n(w.message))}async function I(){a(i,""),a(d,!0);let y=await Ur();if(y.ok)u(),a(g,!0);else{let w=await y.json();a(i,n(w.message))}a(d,!1)}var E=Ad(),o=l(c(E),2);We(o,19,()=>e(t),y=>y.kid,(y,w,b)=>{Id(y,{get jwk(){return e(t)[e(b)]},set jwk(x){e(t)[e(b)]=x}})});var $=l(o,2);Se($,{level:1,get isLoading(){return e(d)},set isLoading(y){a(d,n(y))},$$events:{click:I},children:(y,w)=>{q();var b=B("ROTATE KEYS");r(y,b)},$$slots:{default:!0}});var m=l($,2);{var T=y=>{var w=Sd();r(y,w)};P(m,y=>{e(g)&&y(T)})}var k=l(m,2);{var h=y=>{var w=Cd(),b=c(w,!0);v(w),K(()=>Y(b,e(i))),r(y,w)};P(k,y=>{e(i)&&y(h)})}v(E),r(_,E),ne()}var Ld=A('<div class="content"><div class="container svelte-5h65jg"><!> <!></div></div>');function Nd(_){const s=["Password Policy","JWKS","Argon2 Parameter","Encryption Keys"];let t=C(n(s[0]));var d=Ld(),i=c(d),g=c(i);Dt(g,{labels:s,get selected(){return e(t)},set selected(E){a(t,n(E))}});var f=l(g,2);{var u=E=>{kd(E,{})},I=E=>{var o=me(),$=ee(o);{var m=k=>{Td(k,{})},T=k=>{var h=me(),y=ee(h);{var w=x=>{hd(x,{})},b=x=>{var p=me(),S=ee(p);{var L=D=>{yd(D,{})};P(S,D=>{e(t)==="Encryption Keys"&&D(L)},!0)}r(x,p)};P(y,x=>{e(t)==="Argon2 Parameter"?x(w):x(b,!1)},!0)}r(k,h)};P($,k=>{e(t)==="JWKS"?k(m):k(T,!1)},!0)}r(E,o)};P(f,E=>{e(t)==="Password Policy"?E(u):E(I,!1)})}v(i),v(d),r(_,d)}var Rd=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-2.25-2.25l3.276-3.276a4.5 4.5 0 00-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437l1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008z"></path></svg>');function Dd(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=Rd();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var jd=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"></path></svg>');function Pd(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=jd();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var zd=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"></path></svg>');function Od(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=zd();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var Md=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"></path></svg>');function Ud(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=Md();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var qd=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"></path></svg>');function Gd(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=qd();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var Wd=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"></path></svg>');function os(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=Wd();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var Kd=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"></path></svg>');function Fd(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=Kd();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var Vd=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5zm6-10.125a1.875 1.875 0 11-3.75 0 1.875 1.875 0 013.75 0zm1.294 6.336a6.721 6.721 0 01-3.17.789 6.721 6.721 0 01-3.168-.789 3.376 3.376 0 016.338 0z"></path></svg>');function Bd(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=Vd();ue(i,"stroke-width",1.5),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var Jd=Xe(`<svg width="100%" height="100%" viewBox="0 0 512 138" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"><g transform="matrix(1,0,0,1,0,-11)"><g transform="matrix(1,0,0,1,0,-176)"><g transform="matrix(0.920325,0,0,1.84151,45.9279,26.459)"><rect x="27.741" y="151.57" width="200.517" height="10.148" style="fill:rgb(4,7,11);"></rect></g><g transform="matrix(1.93472,0,0,1.82732,8.35618,28.7533)"><rect x="33.307" y="97.15" width="94.693" height="54.42" style="fill:rgb(4,7,11);stroke:rgb(4,7,11);stroke-width:1.06px;"></rect></g><g transform="matrix(1.82732,0,0,1.82732,-160.822,70.1806)"><g transform="matrix(72,0,0,72,227.174,123.417)"></g><text x="128.982px" y="123.417px" style="font-family:'Calibri-Bold', 'Calibri', sans-serif;font-weight:700;font-size:72px;fill:white;">r<tspan x="152.994px 188.537px " y="123.417px 123.417px ">au</tspan></text></g><g transform="matrix(1,0,0,1.01617,-1.42109e-14,-5.24492)"><path d="M440.936,322.643L439.204,324.266L255.482,324.266L255.482,305.721L440.936,305.721L440.936,322.643Z" style="fill:url(#_Linear1);"></path></g><g transform="matrix(0.920191,0,0,1.84121,46.2464,-91.3383)"><rect x="27.741" y="151.57" width="200.517" height="10.148" style="fill:url(#_Linear2);"></rect></g><g transform="matrix(1.97598,0,0,1.84619,190.187,26.062)"><rect x="33.307" y="97.15" width="94.693" height="54.42" style="fill:rgb(43,65,107);"></rect></g><path d="M439.204,187.734L440.557,189.007L440.557,206.279L256,206.279L256,187.734L439.204,187.734Z" style="fill:rgb(43,65,107);"></path><g transform="matrix(1.82732,0,0,1.82732,-154.661,70.1806)"><g transform="matrix(72,0,0,72,323.045,123.417)"></g><text x="226.646px" y="123.417px" style="font-family:'Calibri-Bold', 'Calibri', sans-serif;font-weight:700;font-size:72px;fill:white;">th<tspan x="288.943px " y="123.417px ">y</tspan></text></g><g transform="matrix(2,0,0,2,0,0)"><path d="M219.602,93.867L256,128L219.602,162.133L219.602,93.867Z" style="fill:rgb(43,65,107);"></path></g><g transform="matrix(2,0,0,1.95739,0,3.99997)"><path d="M36.398,93.867L0,93.867L35.908,128.524L0,163.619L36.398,163.619" style="fill:rgb(4,7,11);"></path></g></g></g><defs><linearGradient id="_Linear1" x1="0" y1="0" x2="1" y2="0" gradientUnits="userSpaceOnUse" gradientTransform="matrix(185.454,0,0,18.5443,255.482,314.994)"><stop offset="0" style="stop-color:rgb(4,7,11);stop-opacity:1"></stop><stop offset="1" style="stop-color:rgb(43,65,107);stop-opacity:1"></stop></linearGradient><linearGradient id="_Linear2" x1="0" y1="0" x2="1" y2="0" gradientUnits="userSpaceOnUse" gradientTransform="matrix(200.517,0,0,10.1483,27.7414,156.645)"><stop offset="0" style="stop-color:rgb(4,7,11);stop-opacity:1"></stop><stop offset="1" style="stop-color:rgb(43,65,107);stop-opacity:1"></stop></linearGradient></defs></svg>`);function Yd(_){var s=Jd();r(_,s)}var Hd=A(`<div class="content"><div class="container svelte-x4sug2"><h2>Documentation</h2> <p class="svelte-x4sug2">For general documentation about Rauthy itself, you should take a look at the <a href="https://sebadob.github.io/rauthy/" target="_blank" class="svelte-x4sug2">Rauthy Book</a></p> <p class="svelte-x4sug2">If you want to integrate an external application and use Rauthy's REST API, take a look at the <a href="/docs/v1/swagger-ui/" target="_blank" class="svelte-x4sug2">Swagger UI</a><br> <b>Note:</b> Depending on the backend configuration, the Swagger UI may not be exposed publicly at this point.
            It is however by default available via the internal <code>/metrics</code> HTTP server to not expose any information.</p> <p class="svelte-x4sug2">The source code can be found in <a href="https://github.com/sebadob/rauthy" target="_blank" class="svelte-x4sug2">Github</a></p></div></div>`);function Xd(_){var s=Hd();r(_,s)}var Zd=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"></path></svg>');function Qd(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=Zd();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var ec=A('<div class="col-typ svelte-a54rx3"> </div> <div class="col-ip svelte-a54rx3"> </div> <div class="col-text svelte-a54rx3"> </div>',1),tc=A('<div class="col-typ svelte-a54rx3"> </div> <div class="col-ip svelte-a54rx3"> </div>',1),ac=A('<div class="col-typ svelte-a54rx3"> </div> <div class="col-ip svelte-a54rx3"> </div>',1),sc=A('<div class="col-typ svelte-a54rx3"> </div> <div class="col-ip svelte-a54rx3"> </div> <div class="col-text svelte-a54rx3"><!></div>',1),rc=A('<div class="col-typ svelte-a54rx3"> </div> <div class="col-ip svelte-a54rx3"> </div> <div class="col-text svelte-a54rx3"> </div>',1),ic=A('<div class="col-typ svelte-a54rx3"> </div> <div class="col-ip svelte-a54rx3"></div> <div class="col-text svelte-a54rx3"> </div>',1),lc=A('<div class="col-typ svelte-a54rx3"> </div>'),nc=A('<div class="row svelte-a54rx3"><div class="col-ts svelte-a54rx3"> </div> <!></div>'),oc=A(" <br>",1),vc=A("<br> <!> ",1),dc=A(" <br> ",1),cc=A("<br> <br> <!>",1),uc=A("<br> <br> ",1),hc=A("<br> ",1),pc=A(" <br> <!>",1),mc=A('<div role="contentinfo"><!></div>');function vs(_,s){le(s,!0);let t=G(s,"collapsed",3,!0),d=C("event"),i=C(!1),g=Ke(()=>!t()&&!s.wide),f=Ke(()=>t()&&!s.wide&&!e(i)),u=Ke(()=>!t()&&s.wide),I=Ke(()=>e(f)?".5rem":".33rem");Ne(()=>{new Date().getTime()-1e3*30<s.event.timestamp&&(setTimeout(()=>{a(d,"eventNew")},100),setTimeout(()=>{a(d,"event")},2500))});function E(){switch(s.event.level){case"test":return"T";case"info":return"I";case"notice":return"N";case"warning":return"W";case"critical":return"C";default:return"U"}}function o(){return ut(s.event.timestamp/1e3)}var $=mc();const m=Ke(()=>`${e(I)} solid ${Gt(s.event.level)}`);var T=c($);{var k=y=>{var w=nc(),b=c(w),x=c(b,!0);K(()=>Y(x,o())),v(b);var p=l(b,2);{var S=D=>{var j=ec(),N=ee(j),V=c(N,!0);v(N);var R=l(N,2),F=c(R,!0);v(R);var z=l(R,2),O=c(z,!0);v(z),K(()=>{Y(V,s.event.typ),Y(F,s.event.ip),Y(O,s.event.text)}),r(D,j)},L=D=>{var j=me(),N=ee(j);{var V=F=>{var z=tc(),O=ee(z),U=c(O,!0);v(O);var Q=l(O,2),M=c(Q,!0);v(Q),K(()=>{Y(U,`${s.event.typ}: ${s.event.data}`),Y(M,s.event.ip)}),r(F,z)},R=F=>{var z=me(),O=ee(z);{var U=M=>{var W=ac(),J=ee(W),Z=c(J,!0);v(J);var re=l(J,2),ve=c(re,!0);v(re),K(()=>{Y(Z,s.event.typ),Y(ve,s.event.ip||"")}),r(M,W)},Q=M=>{var W=me(),J=ee(W);{var Z=ve=>{var be=sc(),$e=ee(be),pe=c($e,!0);v($e);var je=l($e,2),fe=c(je,!0);v(je);var de=l(je,2),ye=c(de);Wa(ye,()=>s.event.text.replace("@","<wbr/>@")),v(de),K(()=>{Y(pe,s.event.typ),Y(fe,s.event.ip||"")}),r(ve,be)},re=ve=>{var be=me(),$e=ee(be);{var pe=fe=>{var de=rc(),ye=ee(de),we=c(ye,!0);v(ye);var Pe=l(ye,2),Ce=c(Pe,!0);v(Pe);var xe=l(Pe,2),Re=c(xe,!0);K(()=>Y(Re,`Expires: ${ut(s.event.data)}`)),v(xe),K(()=>{Y(we,s.event.typ),Y(Ce,s.event.ip)}),r(fe,de)},je=fe=>{var de=me(),ye=ee(de);{var we=Ce=>{var xe=ic(),Re=ee(xe),H=c(Re,!0);v(Re);var Ie=l(Re,4),ge=c(Ie,!0);v(Ie),K(()=>{Y(H,s.event.typ),Y(ge,s.event.text)}),r(Ce,xe)},Pe=Ce=>{var xe=lc(),Re=c(xe,!0);v(xe),K(()=>Y(Re,s.event.typ)),r(Ce,xe)};P(ye,Ce=>{s.event.typ==="RauthyStarted"||s.event.typ==="RauthyHealthy"||s.event.typ==="RauthyUnhealthy"?Ce(we):Ce(Pe,!1)},!0)}r(fe,de)};P($e,fe=>{s.event.typ==="IpBlacklisted"?fe(pe):fe(je,!1)},!0)}r(ve,be)};P(J,ve=>{s.event.typ==="NewRauthyAdmin"||s.event.typ==="NewUserRegistered"||s.event.typ==="UserPasswordReset"||s.event.typ==="UserEmailChange"?ve(Z):ve(re,!1)},!0)}r(M,W)};P(O,M=>{s.event.typ==="SecretsMigrated"?M(U):M(Q,!1)},!0)}r(F,z)};P(N,F=>{s.event.typ==="InvalidLogins"?F(V):F(R,!1)},!0)}r(D,j)};P(p,D=>{s.event.typ==="Test"?D(S):D(L,!1)})}v(w),r(y,w)},h=y=>{var w=me(),b=ee(w);{var x=S=>{var L=pc(),D=ee(L,!0);K(()=>Y(D,o()));var j=l(D,2),N=l(j);{var V=F=>{var z=vc(),O=l(ee(z),2);{var U=M=>{var W=oc(),J=ee(W);q(),K(()=>Y(J,`${s.event.text??""} `)),r(M,W)};P(O,M=>{s.event.text&&M(U)})}var Q=l(O);K(()=>Y(Q,` ${s.event.ip??""}`)),r(F,z)},R=F=>{var z=me(),O=ee(z);{var U=M=>{var W=dc(),J=ee(W,!0),Z=l(J,2);K(()=>{Y(J,`: ${s.event.data}`),Y(Z,` ${s.event.ip??""}`)}),r(M,W)},Q=M=>{var W=me(),J=ee(W);{var Z=ve=>{var be=B();K(()=>Y(be,s.event.ip)),r(ve,be)},re=ve=>{var be=me(),$e=ee(be);{var pe=fe=>{var de=cc(),ye=l(ee(de)),we=l(ye,3);Wa(we,()=>s.event.text.replace("@","<wbr/>@")),K(()=>Y(ye,` ${(s.event.ip||"")??""} `)),r(fe,de)},je=fe=>{var de=me(),ye=ee(de);{var we=Ce=>{var xe=uc(),Re=l(ee(xe)),H=l(Re,2);K(()=>Y(H,` ${ut(s.event.data)??""}`)),K(()=>Y(Re,` ${s.event.ip??""} `)),r(Ce,xe)},Pe=Ce=>{var xe=me(),Re=ee(xe);{var H=Ie=>{var ge=hc(),Ue=l(ee(ge));K(()=>Y(Ue,` ${s.event.text??""}`)),r(Ie,ge)};P(Re,Ie=>{(s.event.typ==="RauthyStarted"||s.event.typ==="RauthyHealthy"||s.event.typ==="RauthyUnhealthy")&&Ie(H)},!0)}r(Ce,xe)};P(ye,Ce=>{s.event.typ==="IpBlacklisted"?Ce(we):Ce(Pe,!1)},!0)}r(fe,de)};P($e,fe=>{s.event.typ==="NewRauthyAdmin"||s.event.typ==="NewUserRegistered"||s.event.typ==="UserPasswordReset"||s.event.typ==="UserEmailChange"?fe(pe):fe(je,!1)},!0)}r(ve,be)};P(J,ve=>{s.event.typ==="SecretsMigrated"?ve(Z):ve(re,!1)},!0)}r(M,W)};P(O,M=>{s.event.typ==="InvalidLogins"?M(U):M(Q,!1)},!0)}r(F,z)};P(N,F=>{s.event.typ==="Test"?F(V):F(R,!1)})}K(()=>Y(j,` ${s.event.typ??""} `)),r(S,L)},p=S=>{var L=B();K(()=>Y(L,E())),r(S,L)};P(b,S=>{e(g)?S(x):S(p,!1)},!0)}r(y,w)};P(T,y=>{e(u)?y(k):y(h,!1)})}v($),K(()=>{Rt($,Nt(e(d)),"svelte-a54rx3"),Et($,"showCollapsed",e(f)),oe($,"border-left",e(m))}),Me("mouseenter",$,()=>a(i,!0)),Me("mouseleave",$,()=>a(i,!1)),r(_,$),ne()}var gc=A("<div><div><b>Legend</b></div> <div><div>TEST</div> <div>INFO</div> <div>NOTICE</div> <div>WARNING</div> <div>CRITICAL</div></div></div>");function fc(_,s){le(s,!0);var t=gc(),d=c(t),i=l(d,2),g=c(i);const f=Ke(()=>`.33rem solid ${Gt("test")}`);var u=l(g,2);const I=Ke(()=>`.33rem solid ${Gt("info")}`);var E=l(u,2);const o=Ke(()=>`.33rem solid ${Gt("notice")}`);var $=l(E,2);const m=Ke(()=>`.33rem solid ${Gt("warning")}`);var T=l($,2);const k=Ke(()=>`.33rem solid ${Gt("critical")}`);v(i),v(t),K(()=>{Rt(d,Nt(s.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(d,"border-left",".33rem solid var(--col-bg)"),Rt(i,Nt(s.wide?"legendWide":"legend"),"svelte-1imwz5t"),Rt(g,Nt(s.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(g,"border-left",e(f)),Rt(u,Nt(s.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(u,"border-left",e(I)),Rt(E,Nt(s.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(E,"border-left",e(o)),Rt($,Nt(s.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe($,"border-left",e(m)),Rt(T,Nt(s.wide?" legendEntryWide":"legendEntry"),"svelte-1imwz5t"),oe(T,"border-left",e(k))}),r(_,t),ne()}var yc=A('<div class="headerWideInner svelte-1ymfjrj"><b>Events</b> <!></div>'),wc=A("<b>Events</b>"),bc=A("<!> <!>",1),$c=A('<div class="opts svelte-1ymfjrj"><!></div>'),_c=A('<div role="contentinfo" id="events" class="svelte-1ymfjrj"><div class="upper"><div class="header svelte-1ymfjrj"><!></div> <!> <div></div></div> <!></div>');function kc(_,s){le(s,!0);let t=G(s,"collapsed",3,!0),d=G(s,"wide",15),i=50,g=C(void 0),f=C(n([])),u=C(n([])),I=C(void 0),E=C(!1);Ne(async()=>{a(I,n(await o()))});async function o(){return localStorage.getItem("eventLevel")||"Info"}async function $(R){localStorage.setItem("eventLevel",R)}async function m(){await Ps()}function T(){var R;console.log("opening SSE stream"),a(g,n(new EventSource(`/auth/v1/events/stream?latest=${i}&level=${((R=e(I))==null?void 0:R.toLowerCase())||"info"}`))),e(g).onopen=()=>{console.log("SSE Events Stream opened"),a(f,n([]))},e(g).onerror=()=>{console.error("SSE Events Stream closed")},e(g).onmessage=F=>{if(F.data){let z=JSON.parse(F.data);a(f,n([z,...e(f).slice(-499)]))}}}let k=Ke(()=>!t()&&!d()||e(E)),h=Ke(()=>t()&&!d()&&!e(E)),y=Ke(()=>!t()&&d());Te(()=>{if(e(f))switch(e(I)){case"Info":a(u,n(e(f)));break;case"Notice":a(u,n(e(f).filter(R=>R.typ==="Test"||R.level==="notice"||R.level==="warning"||R.level==="critical")));break;case"Warning":a(u,n(e(f).filter(R=>R.typ==="Test"||R.level==="warning"||R.level==="critical")));break;case"Critical":a(u,n(e(f).filter(R=>R.typ==="Test"||R.level==="critical")));break}}),Te(()=>{e(I)&&($(e(I)),e(g)&&e(g).readyState!==2&&e(g).close(),T())});var w=_c(),b=c(w),x=c(b),p=c(x);{var S=R=>{var F=bc(),z=ee(F);{var O=M=>{var W=yc(),J=l(c(W),2);kt(J,{options:da,get value(){return e(I)},set value(Z){a(I,n(Z))}}),v(W),r(M,W)},U=M=>{var W=wc();r(M,W)};P(z,M=>{e(y)?M(O):M(U,!1)})}var Q=l(z,2);Se(Q,{level:3,$$events:{click:m},children:(M,W)=>{q();var J=B("TEST");r(M,J)},$$slots:{default:!0}}),r(R,F)};P(p,R=>{e(h)||R(S)})}v(x);var L=l(x,2);{var D=R=>{var F=$c(),z=c(F);kt(z,{options:da,get value(){return e(I)},set value(O){a(I,n(O))}}),v(F),r(R,F)};P(L,R=>{e(y)||R(D)})}var j=l(L,2);We(j,23,()=>e(u),R=>R.id,(R,F,z)=>{var O=Ke(()=>t()&&!e(E));vs(R,{get collapsed(){return e(O)},get event(){return e(u)[e(z)]},set event(U){e(u)[e(z)]=U},get wide(){return d()},set wide(U){d(U)}})}),v(j),v(b);var N=l(b,2);{var V=R=>{fc(R,{get wide(){return d()},set wide(F){d(F)}})};P(N,R=>{(!t()||e(E))&&R(V)})}v(w),K(()=>{Et(w,"widthDefault",e(k)),Et(w,"widthCollapsed",e(h)),Et(w,"widthWide",e(y)),Rt(j,Nt(e(y)?"dataWide":e(h)?"dataCollapsed":"data"),"svelte-1ymfjrj")}),Me("mouseenter",w,()=>a(E,!0)),Me("mouseleave",w,()=>a(E,!1)),r(_,w),ne()}var xc=A('<div class="addNewInputs svelte-1a7hztb"><!> <!> <div class="saveBtn svelte-1a7hztb"><!></div> <div class="err svelte-1a7hztb"> </div></div>'),Ec=A('<div class="svelte-1a7hztb">No blacklisted IPs</div>'),Ic=(_,s,t)=>s(e(t).ip),Sc=A('<div role="button" tabindex="0" class="delete svelte-1a7hztb"><!></div>'),Cc=A('<div class="blacklisted svelte-1a7hztb"><div class="ip svelte-1a7hztb"> </div> <div class="exp svelte-1a7hztb"> </div> <!></div>'),Ac=A(' <div class="content"><div class="top svelte-1a7hztb"><!> <div class="addNew svelte-1a7hztb"><!></div></div> <!> <div id="blacklist" class="svelte-1a7hztb"><!></div> <!> <div style="height: 20px"></div></div>',1);function Tc(_,s){le(s,!0);let t=C(""),d=C(""),i=C(n([])),g=C(n([])),f=C(n([])),u=C(!1),I=n({ip:"",exp:""}),E=C(n({}));const o=He().shape({ip:he().required("IP is required").matches(zs,"Invalid IPv4")}),$=new Date().toISOString().split(".")[0],m=[{label:"IP",callback:(M,W)=>M.ip.includes(W)}];let T=[{label:"IP",callback:(M,W)=>M.ip.localeCompare(W.ip)}];Te(()=>{e(u)&&(a(d,""),I.exp=new Date().toISOString().split(".")[0])}),Ne(()=>{k()});async function k(){let M=await si(),W=await M.json();M.ok?a(i,n(W.ips)):a(t,n(W.message))}async function h(){if(a(d,""),!await w())return;let M=Ot(I.exp);if(!M){a(d,"Invalid Date Input: User Expires");return}let W={ip:I.ip,exp:M},J=await ri(W);if(J.ok)a(u,!1),I.ip="",await k();else{let Z=await J.json();a(d,n(Z.message))}}async function y(M){(await ii(M)).ok&&await k()}async function w(){try{return await o.validate(I,{abortEarly:!1}),a(E,n({})),!0}catch(M){return a(E,n(Ye(M))),!1}}q();var b=Ac(),x=ee(b),p=l(x),S=c(p),L=c(S);Lt(L,{get items(){return e(i)},searchOptions:m,orderOptions:T,get resItems(){return e(g)},set resItems(M){a(g,n(M))}});var D=l(L,2),j=c(D);Se(j,{level:3,$$events:{click:()=>a(u,!e(u))},children:(M,W)=>{q();var J=B("BLACKLIST IP");r(M,J)},$$slots:{default:!0}}),v(D),v(S);var N=l(S,2);{var V=M=>{var W=xc(),J=c(W);ie(J,{width:"9.5rem",autocomplete:"off",placeholder:"IP",get value(){return I.ip},set value(pe){I.ip=pe},get error(){return e(E).ip},set error(pe){e(E).ip=pe},children:(pe,je)=>{q();var fe=B("IP");r(pe,fe)},$$slots:{default:!0}});var Z=l(J,2);ie(Z,{type:"datetime-local",step:"60",width:"18rem",min:$,max:"2099-01-01T00:00",get value(){return I.exp},set value(pe){I.exp=pe},children:(pe,je)=>{q();var fe=B("EXPIRES");r(pe,fe)},$$slots:{default:!0}});var re=l(Z,2),ve=c(re);Se(ve,{level:1,$$events:{click:h},children:(pe,je)=>{q();var fe=B("SAVE");r(pe,fe)},$$slots:{default:!0}}),v(re);var be=l(re,2),$e=c(be,!0);v(be),v(W),K(()=>Y($e,e(d))),ce(3,W,()=>_e),r(M,W)};P(N,M=>{e(u)&&M(V)})}var R=l(N,2),F=c(R);{var z=M=>{var W=Ec();r(M,W)},O=M=>{var W=me(),J=ee(W);We(J,17,()=>e(f),Z=>Z.ip,(Z,re)=>{var ve=Cc(),be=c(ve),$e=c(be,!0);v(be);var pe=l(be,2),je=c(pe,!0);K(()=>Y(je,ut(e(re).exp))),v(pe);var fe=l(pe,2);Ze(fe,{text:"Delete IP",children:(de,ye)=>{var we=Sc();we.__click=[Ic,y,re];var Pe=c(we);Qt(Pe,{color:"var(--col-err)"}),v(we),Me("keypress",we,()=>y(e(re).ip)),r(de,we)},$$slots:{default:!0}}),v(ve),K(()=>Y($e,e(re).ip)),r(Z,ve)}),r(M,W)};P(F,M=>{e(i).length===0?M(z):M(O,!1)})}v(R);var U=l(R,2);{var Q=M=>{jt(M,{get items(){return e(g)},set items(W){a(g,n(W))},get resItems(){return e(f)},set resItems(W){a(f,n(W))}})};P(U,M=>{e(i).length>0&&M(Q)})}q(2),v(p),K(()=>Y(x,`${e(t)??""} `)),r(_,b),ne()}pt(["click"]);var Lc=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"></path></svg>');function Nc(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=Lc();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var Rc=A('<div role="button" tabindex="0" class="cell pointer svelte-lgl56a"> </div>'),Dc=A('<div class="cell svelte-lgl56a"><input class="pointer svelte-lgl56a" type="checkbox"></div>'),jc=A('<div class="mr svelte-lgl56a"><div role="button" tabindex="0" class="label pointer svelte-lgl56a"> </div> <!></div>'),Pc=A('<div class="matrix svelte-lgl56a"><b>Access Rights</b> <div class="mr svelte-lgl56a"><div class="label svelte-lgl56a"></div> <!></div> <!></div>');function ds(_,s){le(s,!0);let t=G(s,"accessMatrix",15);G(s,"finalize",15)(E);const d=["Blacklist","Clients","Events","Generic","Groups","Roles","Secrets","Sessions","Scopes","UserAttributes","Users"],i=["create","read","update","delete"];let g=new Array(d.length).fill(!1),f=new Array(i.length).fill(!1);Ne(()=>{var w;u(),(w=s.apiKey)!=null&&w.access&&I()});function u(){let w=new Array(d.length);for(let b=0;b<d.length;b++){w[b]={group:d[b]};for(let x of i)w[b][x]=!1}t(w)}function I(){for(let w of s.apiKey.access){let b=d.findIndex(x=>x===w.group);for(let x of w.access_rights){let p=i.findIndex(S=>S===x);t(t()[b][i[p]]=!0,!0)}}}function E(){let w=[];for(let b=0;b<d.length;b++){let x=[];for(let p of i)t()[b][p]&&x.push(p);x.length>0&&w.push({group:d[b],access_rights:x})}return w}function o(w){g[w]=!g[w];const b=g[w];let x=t()[w];for(let p=0;p<i.length;p++)for(let S of Object.keys(x))S!=="group"&&(x[S]=b);t(t()[w]=x,!0)}function $(w){f[w]=!f[w];const b=f[w];for(let x=0;x<d.length;x++)t(t()[x][i[w]]=b,!0)}var m=Pc(),T=l(c(m),2),k=l(c(T),2);We(k,17,()=>i,yt,(w,b,x)=>{var p=Rc(),S=Ke(()=>$.bind(this,x));p.__click=function(...j){var N;(N=e(S))==null||N.apply(this,j)};var L=Ke(()=>$.bind(this,x)),D=c(p,!0);v(p),K(()=>Y(D,i[x])),Me("keypress",p,function(...j){var N;(N=e(L))==null||N.apply(this,j)}),r(w,p)}),v(T);var h=l(T,2);{var y=w=>{var b=me(),x=ee(b);We(x,17,()=>d,yt,(p,S,L)=>{var D=jc(),j=c(D),N=Ke(()=>o.bind(this,L));j.__click=function(...z){var O;(O=e(N))==null||O.apply(this,z)};var V=Ke(()=>o.bind(this,L)),R=c(j,!0);v(j);var F=l(j,2);We(F,17,()=>i,yt,(z,O)=>{var U=Dc(),Q=c(U);nt(Q),v(U),Vs(Q,()=>t()[L][e(O)],M=>t(t()[L][e(O)]=M,!0)),r(z,U)}),v(D),K(()=>Y(R,d[L])),Me("keypress",j,function(...z){var O;(O=e(V))==null||O.apply(this,z)}),r(p,D)}),r(w,b)};P(h,w=>{t()&&w(y)})}return v(m),r(_,m),ne({finalizeMatrix:E})}pt(["click"]);var zc=A("<div><!></div>"),Oc=A('<div class="container svelte-ubtepy"><!> <div class="switch svelte-ubtepy">Key Expires: <!></div> <!> <!> <div class="saveBtn svelte-ubtepy"><!></div> <div class="err svelte-ubtepy"> </div></div>');function Mc(_,s){le(s,!0);const t=new Date().toISOString().split(".")[0];let d=G(s,"apiKeys",19,()=>[]),i=G(s,"onSave",3,()=>{}),g=C(""),f=C(!1),u=C(void 0),I=C(void 0),E=n({name:"",exp:""}),o=C(n({}));const $=He().shape({name:he().required("Name is required").min(2).max(24).matches(Os,"Format: [a-zA-Z0-9_/-]{2,24}")});Te(()=>{e(f)&&(E.exp=new Date().toISOString().split(".")[0])});async function m(){if(a(g,""),!await T())return;let N={name:E.name,access:e(u)()};if(N.access.length===0){a(g,"Grant the new API Key at least one permission");return}if(e(f)){let R=Ot(E.exp);if(!R){a(g,"Invalid Date Input: User Expires");return}N.exp=R}let V=await Qr(N);if(V.ok)i()();else{let R=await V.json();a(g,n(R.message))}}async function T(){try{await $.validate(E,{abortEarly:!1}),a(o,n({}))}catch(N){return a(o,n(Ye(N))),!1}for(let N of d())if(N.name===E.name)return e(o).name="Name already exists",!1;return!0}var k=Oc(),h=c(k);ie(h,{width:"18rem",autocomplete:"off",placeholder:"Name",get value(){return E.name},set value(N){E.name=N},get error(){return e(o).name},set error(N){e(o).name=N},children:(N,V)=>{q();var R=B("NAME");r(N,R)},$$slots:{default:!0}});var y=l(h,2),w=l(c(y));Be(w,{get selected(){return e(f)},set selected(N){a(f,n(N))}}),v(y);var b=l(y,2);{var x=N=>{var V=zc(),R=c(V);ie(R,{type:"datetime-local",step:"60",width:"18rem",min:t,max:"2099-01-01T00:00",get value(){return E.exp},set value(F){E.exp=F},children:(F,z)=>{q();var O=B("EXPIRES");r(F,O)},$$slots:{default:!0}}),v(V),ce(3,V,()=>_e),r(N,V)};P(b,N=>{e(f)&&N(x)})}var p=l(b,2);ds(p,{get accessMatrix(){return e(I)},set accessMatrix(N){a(I,n(N))},get finalize(){return e(u)},set finalize(N){a(u,n(N))}});var S=l(p,2),L=c(S);Se(L,{level:1,$$events:{click:m},children:(N,V)=>{q();var R=B("SAVE");r(N,R)},$$slots:{default:!0}}),v(S);var D=l(S,2),j=c(D,!0);v(D),v(k),K(()=>Y(j,e(g))),r(_,k),ne()}var Uc=A("<div><!></div>"),qc=A('<div class="success svelte-1a3jnb3">Success</div>'),Gc=A('<div class="mainErr err svelte-1a3jnb3"> </div>'),Wc=A('<div class="container svelte-1a3jnb3"><div class="unit svelte-1a3jnb3"><div class="label svelte-1a3jnb3">Name</div> <div class="value svelte-1a3jnb3"> </div></div> <div class="switch svelte-1a3jnb3">Key Expires: <!></div> <!> <!> <!> <!> <!></div>');function Kc(_,s){le(s,!0);const t=new Date().toISOString().split(".")[0];let d=G(s,"apiKey",27,()=>n({})),i=C(""),g=C(!1),f=C(void 0),u=C(!!d().expires),I=C(void 0),E=C(void 0);Te(()=>{e(g)&&a(f,n(setTimeout(()=>{a(g,!1),s.onSave()},2e3)))}),Ne(()=>()=>clearTimeout(e(f)));let o=n({exp:""});Te(()=>{e(u)&&(o.exp=new Date().toISOString().split(".")[0])});async function $(){a(i,"");let V={name:d().name,access:e(E)()};if(V.access.length===0){a(i,"Grant the API Key at least one permission");return}if(e(u)){let F=Ot(o.exp);if(!F){a(i,"Invalid Date Input: User Expires");return}V.exp=F}let R=await ei(V);if(R.ok)s.onSave(),a(g,!0);else{let F=await R.json();a(i,n(F.message))}}var m=Wc(),T=c(m),k=l(c(T),2),h=c(k,!0);v(k),v(T);var y=l(T,2),w=l(c(y));Be(w,{get selected(){return e(u)},set selected(V){a(u,n(V))}}),v(y);var b=l(y,2);{var x=V=>{var R=Uc(),F=c(R);ie(F,{type:"datetime-local",step:"60",width:"18rem",min:t,max:"2099-01-01T00:00",get value(){return o.exp},set value(z){o.exp=z},children:(z,O)=>{q();var U=B("EXPIRES");r(z,U)},$$slots:{default:!0}}),v(R),ce(3,R,()=>_e),r(V,R)};P(b,V=>{e(u)&&V(x)})}var p=l(b,2);ds(p,{get apiKey(){return d()},get accessMatrix(){return e(I)},set accessMatrix(V){a(I,n(V))},get finalize(){return e(E)},set finalize(V){a(E,n(V))}});var S=l(p,2);Se(S,{level:1,width:"4rem",$$events:{click:$},children:(V,R)=>{q();var F=B("SAVE");r(V,F)},$$slots:{default:!0}});var L=l(S,2);{var D=V=>{var R=qc();r(V,R)};P(L,V=>{e(g)&&V(D)})}var j=l(L,2);{var N=V=>{var R=Gc(),F=c(R,!0);v(R),K(()=>Y(F,e(i))),r(V,R)};P(j,V=>{e(i)&&V(N)})}v(m),K(()=>Y(h,d().name)),r(_,m),ne()}var Fc=A('<div class="err svelte-1jljqe9"> </div>'),Vc=A('<div class="container svelte-1jljqe9"><div class="label svelte-1jljqe9">Are you sure, you want to delete this ApiKey?</div> <!> <!></div>');function Bc(_,s){le(s,!0);let t=G(s,"apiKey",19,()=>({})),d=C("");async function i(){a(d,"");let E=await ti(t().name);if(E.ok)s.onSave();else{let o=await E.json();a(d,n(o.message))}}var g=Vc(),f=l(c(g),2);Se(f,{level:1,$$events:{click:i},children:(E,o)=>{q();var $=B("DELETE");r(E,$)},$$slots:{default:!0}});var u=l(f,2);{var I=E=>{var o=Fc(),$=c(o,!0);v(o),K(()=>Y($,e(d))),r(E,o)};P(u,E=>{e(d)&&E(I)})}v(g),r(_,g),ne()}var Jc=A('<div><div class="iconsOuter svelte-s24qr4"><div class="iconsInner svelte-s24qr4"><div role="button" tabindex="0" class="show svelte-s24qr4"><!></div> <div role="button" tabindex="0"><!></div></div></div> <textarea></textarea></div>');function cs(_,s){le(s,!0);let t=G(s,"value",3,""),d=G(s,"rows",3,10),i=G(s,"cols",3,60),g=G(s,"name",3,"default"),f=G(s,"show",15,!1),u=G(s,"width",3,"40rem"),I=Jt(s,["$$slots","$$events","$$legacy","value","rows","cols","name","show","width"]),E=C(""),o=C("");Te(()=>{f()?a(o,t()):a(o,n(e(E)))}),Ne(()=>{for(let j=0;j<t().length;j++)a(E,e(E)+"*");a(o,n(e(E)))});function $(){navigator.clipboard.writeText(t())}function m(){f(!f())}var T=Jc(),k=c(T),h=c(k),y=c(h);y.__click=m;var w=c(y);{var b=j=>{Va(j,{width:22})},x=j=>{Fa(j,{width:22})};P(w,j=>{f()?j(b):j(x,!1)})}v(y);var p=l(y,2);p.__click=$;var S=c(p);Xs(S,{}),v(p),v(h),v(k);var L=l(k,2);pa(L);let D;v(T),K(()=>{oe(T,"width",`${u()}`),D=ha(L,D,{disabled:!0,name:g(),rows:d(),cols:i(),...I},"svelte-s24qr4"),oe(L,"width",`${u()}`),oe(L,"padding-right","2.75rem")}),Me("keypress",y,m),Me("keypress",p,$),dt(L,()=>e(o),j=>a(o,j)),r(_,T),ne()}pt(["click"]);var Yc=A(`<div class="secret font-mono svelte-1vixcxf"><!></div> <p class="svelte-1vixcxf">An API Key must be provided in the HTTP <span class="headerCodeSmall svelte-1vixcxf"><code>Authorization</code></span> header in the following format:</p> <p class="svelte-1vixcxf"><span class="headerCode svelte-1vixcxf"><b><code>API-Key YourSecretApiKeyHere</code></b></span></p> <p class="svelte-1vixcxf">You can use the following <code>curl</code> request to test your new Key:</p> <!> <p class="svelte-1vixcxf">If you don't have <code>jq</code> installed and the above fails:</p> <!>`,1),Hc=A(`<div class="container svelte-1vixcxf"><p class="svelte-1vixcxf">You Can generate a new secret for this API Key here.</p> <p class="svelte-1vixcxf">You will only see this secret once after the generation.
        When a new one has been generated, the old secret will be overridden permanently.
        This operation cannot be reverted!</p> <!> <!> <div class="err svelte-1vixcxf"> </div></div>`);function Xc(_,s){le(s,!0);let t=C(""),d=C(""),i=C(""),g=C("");async function f(){let k=await ai(s.apiKey.name);if(k.ok)a(d,n(await k.text())),a(i,`curl -s -H 'Authorization: API-Key ${e(d)}' ${window.location.origin}/auth/v1/api_keys/${s.apiKey.name}/test`),a(g,`${e(i)} | jq`);else{let h=await k.json();a(t,n(h.message))}}var u=Hc(),I=l(c(u),4),E=Ke(()=>e(d)?3:1);Se(I,{get level(){return e(E)},width:"130px",$$events:{click:f},children:(k,h)=>{q();var y=B("GENERATE NEW");r(k,y)},$$slots:{default:!0}});var o=l(I,2);{var $=k=>{var h=Yc(),y=ee(h),w=c(y);Wt(w,{autocomplete:"off",disabled:!0,showCopy:!0,width:"inherit",maxWidth:"800px",get value(){return e(d)},set value(p){a(d,n(p))},children:(p,S)=>{q();var L=B("API KEY");r(p,L)},$$slots:{default:!0}}),v(y);var b=l(y,8);cs(b,{name:"id",rows:3,get value(){return e(g)}});var x=l(b,4);cs(x,{name:"id",rows:3,get value(){return e(i)}}),ce(3,y,()=>_e),r(k,h)};P(o,k=>{e(d)&&k($)})}var m=l(o,2),T=c(m,!0);v(m),v(u),K(()=>Y(T,e(t))),r(_,u),ne()}var Zc=A('<div class="data svelte-115hohv"> </div>'),Qc=A('<div class="header svelte-115hohv"><div class="data svelte-115hohv"> </div> <!></div>'),eu=A("<div><!></div>"),tu=A("<div><!></div>"),au=A("<div><!></div>"),su=A("<div><!> <!></div>");function ru(_,s){le(s,!0);let t=G(s,"apiKey",31,()=>n({})),d=G(s,"onSave",11,()=>{}),i=C(void 0);const g=["Config","Secret","Delete"];let f=C(n(g[0]));const u=200,I=u/2;function E(){a(i,!1),d()()}ot(_,{get show(){return e(i)},set show(o){a(i,n(o))},header:o=>{var $=Qc(),m=c($),T=c(m,!0);v(m);var k=l(m,2);{var h=y=>{Ze(y,{text:"Expiry",children:(w,b)=>{var x=Zc(),p=c(x,!0);K(()=>Y(p,ut(t().expires))),v(x),r(w,x)},$$slots:{default:!0}})};P(k,y=>{t().expires&&y(h)})}v($),K(()=>Y(T,t().name)),r(o,$)},body:o=>{var $=su(),m=c($);Dt(m,{labels:g,get selected(){return e(f)},set selected(y){a(f,n(y))}});var T=l(m,2);{var k=y=>{var w=eu(),b=c(w);Kc(b,{get onSave(){return d()},get apiKey(){return t()},set apiKey(x){t(x)}}),v(w),ce(1,w,()=>_e,()=>({delay:I,duration:u})),ce(2,w,()=>_e,()=>({duration:u})),r(y,w)},h=y=>{var w=me(),b=ee(w);{var x=S=>{var L=tu(),D=c(L);Xc(D,{get apiKey(){return t()}}),v(L),ce(1,L,()=>_e,()=>({delay:I,duration:u})),ce(2,L,()=>_e,()=>({duration:u})),r(S,L)},p=S=>{var L=me(),D=ee(L);{var j=N=>{var V=au(),R=c(V);Bc(R,{get apiKey(){return t()},onSave:E}),v(V),ce(1,V,()=>_e,()=>({delay:I,duration:u})),ce(2,V,()=>_e,()=>({duration:u})),r(N,V)};P(D,N=>{e(f)==="Delete"&&N(j)},!0)}r(S,L)};P(b,S=>{e(f)==="Secret"?S(x):S(p,!1)},!0)}r(y,w)};P(T,y=>{e(f)==="Config"?y(k):y(h,!1)})}v($),r(o,$)},$$slots:{header:!0,body:!0}}),ne()}var iu=A("<div><!></div>"),lu=A('<div class="svelte-1hg1l4q">No Api Keys</div>'),nu=A(' <div class="content"><div class="top svelte-1hg1l4q"><!> <div class="addNew svelte-1hg1l4q"><!></div></div> <!> <div id="keys" class="svelte-1hg1l4q"><!></div> <!> <div style="height: 20px"></div></div>',1);function ou(_,s){le(s,!0);let t=C(""),d=C(n([])),i=C(n([])),g=C(n([])),f=C(!1);const u=[{label:"Name",callback:(N,V)=>N.name.includes(V)}];let I=[{label:"Name",callback:(N,V)=>N.name.localeCompare(V.name)}];Ne(()=>{E()});async function E(){let N=await Zr(),V=await N.json();N.ok?(a(d,n(V.keys)),a(f,!1)):a(t,n(V.message))}q();var o=nu(),$=ee(o),m=l($),T=c(m),k=c(T);Lt(k,{get items(){return e(d)},searchOptions:u,orderOptions:I,get resItems(){return e(i)},set resItems(N){a(i,n(N))}});var h=l(k,2),y=c(h);Se(y,{level:3,$$events:{click:()=>a(f,!e(f))},children:(N,V)=>{q();var R=B("NEW KEY");r(N,R)},$$slots:{default:!0}}),v(h),v(T);var w=l(T,2);{var b=N=>{var V=iu(),R=c(V);Mc(R,{onSave:E,get apiKeys(){return e(d)}}),v(V),ce(3,V,()=>_e),r(N,V)};P(w,N=>{e(f)&&N(b)})}var x=l(w,2),p=c(x);{var S=N=>{var V=lu();r(N,V)},L=N=>{var V=me(),R=ee(V);We(R,19,()=>e(g),F=>F.name,(F,z,O)=>{ru(F,{onSave:E,get apiKey(){return e(g)[e(O)]},set apiKey(U){e(g)[e(O)]=U}})}),r(N,V)};P(p,N=>{e(d).length===0?N(S):N(L,!1)})}v(x);var D=l(x,2);{var j=N=>{jt(N,{get items(){return e(i)},set items(V){a(i,n(V))},get resItems(){return e(g)},set resItems(V){a(g,n(V))}})};P(D,N=>{e(d).length>0&&N(j)})}q(2),v(m),K(()=>Y($,`${e(t)??""} `)),r(_,o),ne()}var vu=A('<div class="row svelte-hjwmgw">No events found</div>'),du=A('<div class="content"><div class="row svelte-hjwmgw"><!></div> <div class="row filter svelte-hjwmgw"><!> <!></div> <div class="row filterOpts svelte-hjwmgw"><div><!></div> Filter <!> <!></div> <!></div>');function cu(_,s){le(s,!0);let t=C(n([])),d=C(n([])),i=C(n(Da(new Date(new Date().getTime()-3600*1e3)))),g=C(void 0),f=C("Info"),u=C(!1),I=C(n(qa[0])),E=[{label:"IP",callback:(R,F)=>{var z;return(z=R.ip)==null?void 0:z.includes(F)}},{label:"Content",callback:(R,F)=>{var z,O;return(O=(z=R.text)==null?void 0:z.toLowerCase())==null?void 0:O.includes(F.toLowerCase())}}],o=[{label:"Timestamp",callback:(R,F)=>R.timestamp-F.timestamp},{label:"Level",callback:(R,F)=>R.level.localeCompare(F.level)},{label:"Type",callback:(R,F)=>R.typ.localeCompare(F.typ)}];ws(()=>{$()});async function $(){let R={from:Ot(e(i)),level:e(f).toLowerCase()};e(g)&&(R.until=Ot(e(g))),e(u)&&(R.typ=e(I));let F=await Er(R),z=await F.json();F.ok?a(t,n(z)):z.message}var m=du(),T=c(m),k=c(T);Lt(k,{get items(){return e(t)},searchOptions:E,orderOptions:o,firstDirReverse:!0,get resItems(){return e(d)},set resItems(R){a(d,n(R))}}),v(T);var h=l(T,2),y=c(h);ie(y,{type:"datetime-local",step:"60",width:"17.5rem",max:"2099-01-01T00:00",get value(){return e(i)},set value(R){a(i,n(R))},children:(R,F)=>{q();var z=B("FROM");r(R,z)},$$slots:{default:!0}});var w=l(y,2);ie(w,{type:"datetime-local",step:"60",width:"17rem",max:"2099-01-01T00:00",get value(){return e(g)},set value(R){a(g,n(R))},children:(R,F)=>{q();var z=B("UNTIL");r(R,z)},$$slots:{default:!0}}),v(h);var b=l(h,2),x=c(b);oe(x,"margin","0 5.5rem 0 .25rem");var p=c(x);kt(p,{options:da,get value(){return e(f)},set value(R){a(f,n(R))}}),v(x);var S=l(x,2);Be(S,{get selected(){return e(u)},set selected(R){a(u,n(R))}});var L=l(S,2);{var D=R=>{kt(R,{options:qa,get value(){return e(I)},set value(F){a(I,n(F))}})};P(L,R=>{e(u)&&R(D)})}v(b);var j=l(b,2);{var N=R=>{var F=vu();r(R,F)},V=R=>{var F=me(),z=ee(F);We(z,19,()=>e(d),O=>O.id,(O,U,Q)=>{vs(O,{collapsed:!1,wide:!0,get event(){return e(d)[e(Q)]},set event(M){e(d)[e(Q)]=M}})}),r(R,F)};P(j,R=>{e(d).length===0?R(N):R(V,!1)})}v(m),r(_,m),ne()}var uu=Xe('<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"></path></svg>');function hu(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=uu();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var pu=Xe(`<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15a4.5 4.5 0 0 0 4.5 4.5H18a3.75 3.75 0 0 0 1.332-7.257 3 3 0 0 0-3.758-3.848 5.25 5.25 0 0
            0-10.233 2.33A4.502 4.502 0 0 0 2.25 15Z"></path></svg>`);function mu(_,s){let t=G(s,"opacity",3,.9),d=G(s,"width",3,24);var i=pu();ue(i,"stroke-width",2),K(()=>{ue(i,"width",d()),ue(i,"opacity",t())}),r(_,i)}var gu=A(`<div class="desc svelte-i817w5"><h4 class="svelte-i817w5">ID token claim mappings</h4> <p class="svelte-i817w5">Values from the ID token after a successful upstream login can be mapped automatically.</p> <p class="svelte-i817w5">The <code class="svelte-i817w5">path</code> needs to be given in a regex like syntax. It can resolve to
        single JSON values or resolve to a value in a JSON object or array.</p> <p class="svelte-i817w5"><code class="svelte-i817w5">$.</code> marks the start of the JSON object</p> <p class="svelte-i817w5"><code class="svelte-i817w5">*</code> can be used as a wildcard in your path</p> <p class="svelte-i817w5"><code class="svelte-i817w5">$.roles</code> would target <code class="svelte-i817w5">&#123;"roles": "value"&#125;</code></p> <p class="svelte-i817w5"><code class="svelte-i817w5">$.roles.*</code> can target a value inside an object or array like<br> <code class="svelte-i817w5">&#123;"roles": ["value", "notMyValue"]&#125;</code></p></div>`);function us(_){var s=gu();r(_,s)}var fu=A('<div class="err font-label svelte-w61ts0"> </div>'),yu=A('<div class="container svelte-w61ts0"><div class="label svelte-w61ts0"><div class="labelInner font-label noselect svelte-w61ts0"><label><!></label></div></div> <textarea></textarea> <!></div>');function wa(_,s){le(s,!0);let t=G(s,"rows",3,10),d=G(s,"cols",3,10),i=G(s,"name",19,Mt),g=G(s,"disabled",3,!1),f=G(s,"error",3,""),u=G(s,"value",15),I=G(s,"width",3,"32rem"),E=G(s,"fixed",3,!0),o=Jt(s,["$$slots","$$events","$$legacy","rows","cols","name","disabled","error","value","width","fixed","children"]);const $=na();async function m(j){await Bt(),u(j.target.value),$("input",u())}function T(){$("focus",!0)}function k(){$("blur",!0)}var h=yu(),y=c(h),w=c(y),b=c(w),x=c(b);At(x,()=>s.children??Ct),v(b),v(w),v(y);var p=l(y,2);pa(p);let S;var L=l(p,2);{var D=j=>{var N=fu(),V=c(N,!0);v(N),K(()=>{oe(N,"width",I()),Y(V,f())}),ce(7,N,()=>_e,()=>({duration:250})),r(j,N)};P(L,j=>{f()&&j(D)})}v(h),K(()=>{oe(h,"width",`calc(${I()??""} + 12px)`),oe(w,"background",g()?"var(--col-gmid)":"var(--col-bg)"),ue(b,"for",i()),S=ha(p,S,{name:i(),disabled:g(),value:u(),rows:t(),cols:d(),...o,oninput:m,onfocus:T,onblur:k},"svelte-w61ts0"),oe(p,"resize",E()?"none":""),oe(p,"width",I())}),r(_,h),ne()}var wu=A('<div class="header font-label svelte-1m46su9">ADD NEW AUTHENTICATION PROVIDER</div>'),bu=A('<div class="header svelte-1m46su9">Allow insecure TLS certificates</div> <div class="ml mb svelte-1m46su9"><!></div>',1),$u=A('<div class="header svelte-1m46su9">Custom Root CA PEM</div> <div class="ml mb svelte-1m46su9"><!></div> <!>',1),_u=A("<!> <!>",1),ku=A("<!> <!>",1),xu=A('<div class="header svelte-1m46su9">Allow insecure TLS certificates</div> <div class="ml mb svelte-1m46su9"><!></div>',1),Eu=A(`<!> <!> <!> <!> <!> <div class="header svelte-1m46su9">Use PKCE</div> <div class="ml svelte-1m46su9"><!></div> <div class="desc svelte-1m46su9">The scope the client should use when redirecting to the login.<br> Provide the values separated by space.</div> <!> <div class="desc svelte-1m46su9">Client name for the Rauthy login form</div> <!> <div class="desc svelte-1m46su9">Client ID given by the auth provider</div> <!> <div class="desc svelte-1m46su9">Client Secret given by the auth provider.<br> At least a client secret or PKCE is required.</div> <!> <div class="desc svelte-1m46su9"><p class="svelte-1m46su9">The authentication method to use on the <code>/token</code> endpoint.<br> Most providers should work with <code>basic</code>, some only with <code>post</code>.
                        In rare situations, you need both, while it can lead to errors with others.</p></div> <div class="switchRow svelte-1m46su9"><div>client_secret_basic</div> <!></div> <div class="switchRow svelte-1m46su9"><div>client_secret_post</div> <!></div> <!> <div class="desc svelte-1m46su9"><p class="svelte-1m46su9">You can map a user to be a rauthy admin depending on an upstream ID claim.</p></div> <!> <!> <div class="desc svelte-1m46su9"><p class="svelte-1m46su9">If your provider issues a claim indicating that the user has used at least 2FA during
                        login, you can specify the mfa claim path.</p></div> <!> <!> <!> <!>`,1),Iu=A('<div class="success svelte-1m46su9">Success</div>'),Su=A('<div class="err svelte-1m46su9"> </div>'),Cu=A('<div class="container svelte-1m46su9"><div class="header svelte-1m46su9">Type</div> <div class="ml mb svelte-1m46su9"><!></div> <!> <!> <!> <!></div>');function Au(_,s){le(s,!0);let t=G(s,"idx",31,()=>-1);const d="25rem";let i=C(!1),g=C(!1),f=C(""),u=C(!1),I=C(!1),E=C(void 0),o=C(!1),$=C(n({issuer:null,metadata_url:null,danger_allow_insecure:!1,root_pem:null})),m=C(n({enabled:!0,typ:"oidc",issuer:"",danger_allow_insecure:!1,authorization_endpoint:"",token_endpoint:"",token_auth_method_basic:!1,userinfo_endpoint:"",use_pkce:!0,client_secret_basic:!0,client_secret_post:!1,name:"",client_id:"",client_secret:"",scope:"",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:null,mfa_claim_value:null})),T=["OIDC","Auto","Custom","Github","Google"],k=C(n(T[0])),h=C(n({}));const y=He().shape({issuer:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128").required("Required"),authorization_endpoint:he().url().required("Required"),token_endpoint:he().url().required("Required"),userinfo_endpoint:he().url().required("Required"),name:he().trim().matches(Xt,"Can only contain: 'a-zA-Z0-9\xC0-\xFF- ', length max: 128").not(["atproto"],"Cannot be reserved").required("Required"),client_id:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128").required("Required"),client_secret:he().trim().max(256,"Max 256 characters"),scope:he().trim().matches(Ga,"Can only contain: 'a-zA-Z0-9-_/ ', length max: 128").required("Required"),root_pem:he().trim().nullable().matches(ca,"Invalid PEM certificate"),admin_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),admin_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128")}),w=He().shape({issuer:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),metadata_url:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),root_pem:he().trim().nullable().matches(ca,"Valid PEM certificate")});Ne(()=>()=>{a(i,!1),clearTimeout(e(E))});async function b(){if(!await S())return;if(!e(m).use_pkce&&!e(m).client_secret){a(f,"Must at least be a confidential client or use PKCE");return}a(f,""),a(g,!0),e(m).root_pem&&(e(m).danger_allow_insecure=!1,e(m).root_pem=e(m).root_pem.trim()),e(D)?e(m).typ="custom":e(m).typ=e(k).toLowerCase(),e(m).scope=e(m).scope.trim();let R=await Dr(e(m));if(R.ok)a(I,!0);else{let F=await R.json();F.message.includes("InvalidCertificate")?a(f,"Insecure connection not allowed"):a(f,n(F.message))}a(g,!1)}async function x(){if(!await L()){a(f,"Invalid input");return}a(f,""),a(g,!0);let R=await Mr(e($));if(R.ok){const F=await R.json();e(m).issuer=F.issuer,e(m).authorization_endpoint=F.authorization_endpoint,e(m).danger_allow_insecure=F.danger_allow_insecure,e(m).token_endpoint=F.token_endpoint,e(m).userinfo_endpoint=F.userinfo_endpoint,e(m).token_auth_method_basic=F.token_auth_method_basic,e(m).use_pkce=F.use_pkce,e(m).client_secret_basic=F.client_secret_basic,e(m).client_secret_post=!F.client_secret_basic&&F.client_secret_post,e(m).scope=F.scope,e(m).root_pem=F.root_pem,a(u,!0)}else{let F=await R.json();F.message.includes("InvalidCertificate")?a(f,"Insecure connection not allowed"):a(f,n(F.message))}a(g,!1)}function p(){a($,n({issuer:null,metadata_url:null,danger_allow_insecure:!1,root_pem:null})),a(m,n({enabled:!0,issuer:"",danger_allow_insecure:!1,authorization_endpoint:"",token_endpoint:"",userinfo_endpoint:"",use_pkce:!0,client_secret_basic:!0,client_secret_post:!1,scope:"",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:null,mfa_claim_value:null})),a(u,!1),a(o,!1)}async function S(){a(h,n({}));try{return await y.validate(e(m),{abortEarly:!1}),e(m).client_secret&&!(e(m).client_secret_basic||e(m).client_secret_post)?(a(f,"You have given a client secret, but no client auth method is active"),!1):(a(f,"Invalid input"),!0)}catch(R){return a(h,n(Ye(R))),R="Invalid input",!1}}async function L(){a(h,n({}));try{return await w.validate(e($),{abortEarly:!1}),!e($).issuer&&!e($).metadata_url?(e(h).issuer="Required",e(h).metadata_url=e(h).issuer,!1):!0}catch(R){return a(h,n(Ye(R))),!1}}let D=Ke(()=>e(k)===T[1]),j=Ke(()=>e(k)===T[2]),N=Ke(()=>e(k)===T[0]),V=Ke(()=>!e(D)&&!e(j)&&!e(N));Te(()=>{if(e(k))switch(a(u,!1),a(h,n({})),a($,n({issuer:null,metadata_url:null,danger_allow_insecure:!1,root_pem:null})),e(k)){case"Github":a(m,n({enabled:!0,issuer:"github.com",danger_allow_insecure:!1,authorization_endpoint:"https://github.com/login/oauth/authorize",token_endpoint:"https://github.com/login/oauth/access_token",token_auth_method_basic:!1,userinfo_endpoint:"https://api.github.com/user",use_pkce:!1,name:"Github",client_id:"",client_secret:"",scope:"user:email",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:"$.two_factor_authentication",mfa_claim_value:"true"}));break;case"Google":a($,n({issuer:"accounts.google.com",metadata_url:null,danger_allow_insecure:!1,root_pem:null})),x();break;default:a(m,n({enabled:!0,typ:"oidc",issuer:"",danger_allow_insecure:!1,authorization_endpoint:"",token_endpoint:"",token_auth_method_basic:!1,userinfo_endpoint:"",use_pkce:!0,name:"",client_id:"",client_secret:"",scope:"",root_pem:null,admin_claim_path:null,admin_claim_value:null,mfa_claim_path:null,mfa_claim_value:null}))}}),Te(()=>{e(I)&&a(E,n(setTimeout(()=>{s.onSave(),a(I,!1),a(i,!1),p()},1500)))}),ot(_,{get idx(){return t()},set idx(R){t(R)},get show(){return e(i)},set show(R){a(i,n(R))},header:R=>{var F=wu();r(R,F)},body:R=>{var F=Cu(),z=l(c(F),2),O=c(z);kt(O,{options:T,get value(){return e(k)},set value($e){a(k,n($e))}}),v(z);var U=l(z,2);{var Q=$e=>{var pe=$u(),je=l(ee(pe),2),fe=c(je);Be(fe,{get selected(){return e(o)},set selected(Pe){a(o,n(Pe))}}),v(je);var de=l(je,2);{var ye=Pe=>{wa(Pe,{rows:17,name:"rootPem",placeholder:`-----BEGIN CERTIFICATE-----
    -----END CERTIFICATE-----`,get error(){return e(h).root_pem},get value(){return e($).root_pem},set value(Ce){e($).root_pem=Ce},children:(Ce,xe)=>{q();var Re=B("Root Certificate in PEM format");r(Ce,Re)},$$slots:{default:!0}})},we=Pe=>{var Ce=bu(),xe=l(ee(Ce),2),Re=c(xe);Be(Re,{get selected(){return e($).danger_allow_insecure},set selected(H){e($).danger_allow_insecure=H}}),v(xe),r(Pe,Ce)};P(de,Pe=>{e(o)?Pe(ye):Pe(we,!1)})}r($e,pe)};P(U,$e=>{e(u)||$e(Q)})}var M=l(U,2);{var W=$e=>{var pe=_u(),je=ee(pe);ie(je,{type:"url",name:"issuer",placeholder:"Issuer URL",width:d,get value(){return e($).issuer},set value(de){e($).issuer=de},get error(){return e(h).issuer},set error(de){e(h).issuer=de},$$events:{input:L,enter:x},children:(de,ye)=>{q();var we=B("ISSUER URL");r(de,we)},$$slots:{default:!0}});var fe=l(je,2);Se(fe,{level:1,width:"6rem",get isLoading(){return e(g)},set isLoading(de){a(g,n(de))},$$events:{click:x},children:(de,ye)=>{q();var we=B("LOOKUP");r(de,we)},$$slots:{default:!0}}),r($e,pe)},J=$e=>{var pe=me(),je=ee(pe);{var fe=ye=>{var we=ku(),Pe=ee(we);ie(Pe,{type:"url",name:"metadata",placeholder:".../.well-known/openid-configuration",width:d,get value(){return e($).metadata_url},set value(xe){e($).metadata_url=xe},get error(){return e(h).metadata_url},set error(xe){e(h).metadata_url=xe},$$events:{input:L,enter:x},children:(xe,Re)=>{q();var H=B("METADATA URL");r(xe,H)},$$slots:{default:!0}});var Ce=l(Pe,2);Se(Ce,{level:1,width:"6rem",get isLoading(){return e(g)},set isLoading(xe){a(g,n(xe))},$$events:{click:x},children:(xe,Re)=>{q();var H=B("LOOKUP");r(xe,H)},$$slots:{default:!0}}),r(ye,we)},de=ye=>{var we=me(),Pe=ee(we);{var Ce=xe=>{var Re=Eu(),H=ee(Re);{var Ie=ae=>{wa(ae,{rows:17,name:"rootPem",placeholder:`-----BEGIN CERTIFICATE-----
    -----END CERTIFICATE-----`,get error(){return e(h).root_pem},get disabled(){return e(u)},get value(){return e(m).root_pem},set value(Ge){e(m).root_pem=Ge},children:(Ge,Oe)=>{q();var Ut=B("Root Certificate in PEM format");r(Ge,Ut)},$$slots:{default:!0}})},ge=ae=>{var Ge=xu(),Oe=l(ee(Ge),2),Ut=c(Oe);{var Ht=Pt=>{ea(Pt,{get check(){return e(m).danger_allow_insecure}})},Ft=Pt=>{Be(Pt,{get selected(){return e(m).danger_allow_insecure},set selected(Vt){e(m).danger_allow_insecure=Vt}})};P(Ut,Pt=>{e(u)?Pt(Ht):Pt(Ft,!1)})}v(Oe),r(ae,Ge)};P(H,ae=>{e(o)?ae(Ie):ae(ge,!1)})}var Ue=l(H,2);ie(Ue,{type:"url",name:"issuer",placeholder:"Issuer URL",width:d,get disabled(){return e(u)},get value(){return e(m).issuer},set value(ae){e(m).issuer=ae},get error(){return e(h).issuer},set error(ae){e(h).issuer=ae},$$events:{input:L},children:(ae,Ge)=>{q();var Oe=B("ISSUER URL");r(ae,Oe)},$$slots:{default:!0}});var Je=l(Ue,2);ie(Je,{type:"url",name:"auth_endpoint",placeholder:"Authorization Endpoint",width:d,get disabled(){return e(u)},get value(){return e(m).authorization_endpoint},set value(ae){e(m).authorization_endpoint=ae},get error(){return e(h).authorization_endpoint},set error(ae){e(h).authorization_endpoint=ae},$$events:{input:L},children:(ae,Ge)=>{q();var Oe=B("AUTHORIZATION ENDPOINT");r(ae,Oe)},$$slots:{default:!0}});var rt=l(Je,2);ie(rt,{type:"url",name:"token_endpoint",placeholder:"Token Endpoint",width:d,get disabled(){return e(u)},get value(){return e(m).token_endpoint},set value(ae){e(m).token_endpoint=ae},get error(){return e(h).token_endpoint},set error(ae){e(h).token_endpoint=ae},$$events:{input:L},children:(ae,Ge)=>{q();var Oe=B("TOKEN ENDPOINT");r(ae,Oe)},$$slots:{default:!0}});var vt=l(rt,2);ie(vt,{type:"url",name:"userinfo_endpoint",placeholder:"Userinfo Endpoint",width:d,get disabled(){return e(u)},get value(){return e(m).userinfo_endpoint},set value(ae){e(m).userinfo_endpoint=ae},get error(){return e(h).userinfo_endpoint},set error(ae){e(h).userinfo_endpoint=ae},$$events:{input:L},children:(ae,Ge)=>{q();var Oe=B("USERINFO ENDPOINT");r(ae,Oe)},$$slots:{default:!0}});var qe=l(vt,4),Fe=c(qe);{var lt=ae=>{ea(ae,{get check(){return e(m).use_pkce}})},xt=ae=>{Be(ae,{get selected(){return e(m).use_pkce},set selected(Ge){e(m).use_pkce=Ge}})};P(Fe,ae=>{e(u)?ae(lt):ae(xt,!1)})}v(qe);var $t=l(qe,4);ie($t,{name:"scope",placeholder:"openid profile email",width:d,get value(){return e(m).scope},set value(ae){e(m).scope=ae},get error(){return e(h).scope},set error(ae){e(h).scope=ae},$$events:{input:S},children:(ae,Ge)=>{q();var Oe=B("SCOPE");r(ae,Oe)},$$slots:{default:!0}});var Qe=l($t,4);ie(Qe,{name:"client_name",placeholder:"Client Name",width:d,get value(){return e(m).name},set value(ae){e(m).name=ae},get error(){return e(h).name},set error(ae){e(h).name=ae},$$events:{input:S},children:(ae,Ge)=>{q();var Oe=B("CLIENT NAME");r(ae,Oe)},$$slots:{default:!0}});var et=l(Qe,4);ie(et,{name:"client_id",autocomplete:"off",placeholder:"Client ID",width:d,get value(){return e(m).client_id},set value(ae){e(m).client_id=ae},get error(){return e(h).client_id},set error(ae){e(h).client_id=ae},$$events:{input:S},children:(ae,Ge)=>{q();var Oe=B("CLIENT ID");r(ae,Oe)},$$slots:{default:!0}});var gt=l(et,4);Wt(gt,{name:"client_secret",get error(){return e(h).client_secret},autocomplete:"off",placeholder:"Client Secret",width:d,get value(){return e(m).client_secret},set value(ae){e(m).client_secret=ae},$$events:{input:S},children:(ae,Ge)=>{q();var Oe=B("CLIENT SECRET");r(ae,Oe)},$$slots:{default:!0}});var ct=l(gt,4),It=l(c(ct),2);Be(It,{get selected(){return e(m).client_secret_basic},set selected(ae){e(m).client_secret_basic=ae}}),v(ct);var at=l(ct,2),st=l(c(at),2);Be(st,{get selected(){return e(m).client_secret_post},set selected(ae){e(m).client_secret_post=ae}}),v(at);var se=l(at,2);us(se);var Ae=l(se,4);ie(Ae,{name:"admin_claim_path",placeholder:"$.roles.*",width:d,get value(){return e(m).admin_claim_path},set value(ae){e(m).admin_claim_path=ae},get error(){return e(h).admin_claim_path},set error(ae){e(h).admin_claim_path=ae},$$events:{input:S},children:(ae,Ge)=>{q();var Oe=B("ADMIN CLAIM PATH");r(ae,Oe)},$$slots:{default:!0}});var ze=l(Ae,2);ie(ze,{name:"admin_claim_value",placeholder:"rauthy_admin",width:d,get value(){return e(m).admin_claim_value},set value(ae){e(m).admin_claim_value=ae},get error(){return e(h).admin_claim_value},set error(ae){e(h).admin_claim_value=ae},$$events:{input:S},children:(ae,Ge)=>{q();var Oe=B("ADMIN CLAIM VALUE");r(ae,Oe)},$$slots:{default:!0}});var X=l(ze,4);ie(X,{name:"mfa_claim_path",placeholder:"$.amr.*",width:d,get value(){return e(m).mfa_claim_path},set value(ae){e(m).mfa_claim_path=ae},get error(){return e(h).mfa_claim_path},set error(ae){e(h).mfa_claim_path=ae},$$events:{input:S},children:(ae,Ge)=>{q();var Oe=B("MFA CLAIM PATH");r(ae,Oe)},$$slots:{default:!0}});var Ee=l(X,2);ie(Ee,{name:"mfa_claim_value",placeholder:"mfa",width:d,get value(){return e(m).mfa_claim_value},set value(ae){e(m).mfa_claim_value=ae},get error(){return e(h).mfa_claim_value},set error(ae){e(h).mfa_claim_value=ae},$$events:{input:S},children:(ae,Ge)=>{q();var Oe=B("MFA CLAIM VALUE");r(ae,Oe)},$$slots:{default:!0}});var Le=l(Ee,2);Se(Le,{level:1,width:"6rem",get isLoading(){return e(g)},set isLoading(ae){a(g,n(ae))},$$events:{click:b},children:(ae,Ge)=>{q();var Oe=B("SAVE");r(ae,Oe)},$$slots:{default:!0}});var St=l(Le,2);Se(St,{level:4,width:"6rem",get isLoading(){return e(g)},set isLoading(ae){a(g,n(ae))},$$events:{click:p},children:(ae,Ge)=>{q();var Oe=B("RESET");r(ae,Oe)},$$slots:{default:!0}}),r(xe,Re)};P(Pe,xe=>{(e(V)||e(j)||e(u))&&xe(Ce)},!0)}r(ye,we)};P(je,ye=>{e(D)&&!e(u)?ye(fe):ye(de,!1)},!0)}r($e,pe)};P(M,$e=>{e(N)&&!e(u)?$e(W):$e(J,!1)})}var Z=l(M,2);{var re=$e=>{var pe=Iu();r($e,pe)};P(Z,$e=>{e(I)&&$e(re)})}var ve=l(Z,2);{var be=$e=>{var pe=Su(),je=c(pe,!0);v(pe),K(()=>Y(je,e(f))),r($e,pe)};P(ve,$e=>{e(f)&&$e(be)})}v(F),r(R,F)},$$slots:{header:!0,body:!0}}),ne()}var Tu=A('<img alt="No Logo Available">');function Lu(_,s){le(s,!0);var t=Tu();K(()=>ue(t,"src",`/auth/v1/providers/${s.providerId}/img?${Mt(6)}`)),ue(t,"width",20),ue(t,"height",20),r(_,t),ne()}var Nu=A('<div class="header svelte-19hes5">Allow insecure TLS certificates</div> <div class="ml mb svelte-19hes5"><!></div>',1),Ru=A('<div class="success svelte-19hes5">Success</div>'),Du=A('<div class="mainErr err svelte-19hes5"> </div>'),ju=A("<!> <!> <!>",1),Pu=A(`<div class="container svelte-19hes5"><div class="unit svelte-19hes5"><div class="label font-label svelte-19hes5">ID</div> <div class="value font-mono svelte-19hes5"> </div></div> <div class="separator"></div> <div class="header svelte-19hes5">Enabled</div> <div class="ml mb svelte-19hes5"><!></div> <div class="header svelte-19hes5">Custom Root CA PEM</div> <div class="ml mb svelte-19hes5"><!></div> <!> <!> <!> <!> <!> <div class="header svelte-19hes5">Use PKCE</div> <div class="ml mb svelte-19hes5"><!></div> <div class="desc svelte-19hes5">The scope the client should use when redirecting to the login.<br> Provide the values separated by space.</div> <!> <div class="desc svelte-19hes5">Client name for the Rauthy login form</div> <!> <div class="desc svelte-19hes5">Client ID given by the auth provider</div> <!> <div class="desc svelte-19hes5">Client Secret given by the auth provider.<br> At least a client secret or PKCE is required.</div> <!> <div class="desc svelte-19hes5"><p class="svelte-19hes5">The authentication method to use on the <code>/token</code> endpoint.<br> Most providers should work with <code>basic</code>, some only with <code>post</code>.
            In rare situations, you need both, while it can lead to errors with others.</p></div> <div class="switchRow svelte-19hes5"><div>client_secret_basic</div> <!></div> <div class="switchRow svelte-19hes5"><div>client_secret_post</div> <!></div> <!> <div class="desc svelte-19hes5"><p class="svelte-19hes5">You can map a user to be a rauthy admin depending on an upstream ID claim.</p></div> <!> <!> <div class="desc svelte-19hes5"><p class="svelte-19hes5">If your provider issues a claim indicating that the user has used at least 2FA during
            login, you can specify the mfa claim path.</p></div> <!> <!> <div class="logo svelte-19hes5"><!> <!></div> <!></div>`);function zu(_,s){le(s,!0);let t=G(s,"provider",31,()=>n({}));const d="25rem";let i=C(!1),g=C(""),f=C(!1),u=C(void 0),I=C(n(t().root_pem)),E=C(void 0);Ne(()=>()=>clearTimeout(e(u)));let o=C(n({}));const $=He().shape({issuer:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128"),authorization_endpoint:he().url(),token_endpoint:he().url(),userinfo_endpoint:he().url(),name:he().trim().matches(Xt,"Can only contain: 'a-zA-Z0-9\xC0-\xFF- ', length max: 128").not(["atproto"],"Cannot be reserved"),client_id:he().trim().matches(tt,"Can only contain URI safe characters, length max: 128"),client_secret:he().trim().max(256,"Max 256 characters"),scope:he().trim().matches(Ga,"Can only contain: 'a-zA-Z0-9-_/ ', length max: 128"),admin_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),admin_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_path:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128"),mfa_claim_value:he().trim().nullable().matches(tt,"Can only contain URI safe characters, length max: 128")});async function m(){if(e(I)||t(t().root_pem=void 0,!0),!await k())return;if(!t().use_pkce&&!t().client_secret){a(g,"Must at least be a confidential client or use PKCE");return}a(g,""),a(i,!0),t().root_pem?(t(t().danger_allow_insecure=!1,!0),t(t().root_pem=t().root_pem.trim(),!0)):t(t().root_pem=void 0,!0);let H=await jr(t().id,t());if(H.ok)a(f,!0);else{let Ie=await H.json();a(g,n(Ie.message))}a(i,!1)}async function T(H){a(i,!0);let Ie=await Or(t().id,H);if(!Ie.ok){let ge=await Ie.json();console.error(ge.message)}a(i,!1)}async function k(){a(o,n({}));try{return await $.validate(t(),{abortEarly:!1}),t().client_secret&&!(t().client_secret_basic||t().client_secret_post)?(a(g,"You have given a client secret, but no client auth method is active"),!1):(t().root_pem&&t().root_pem.length>0?ca.test(t().root_pem.trim())||(e(o).root_pem="Invalid PEM certificate"):a(g,"Invalid input"),!0)}catch(H){return a(o,n(Ye(H))),!1}}Te(()=>{e(f)&&a(u,n(setTimeout(()=>{a(f,!1),s.onSave()},2e3)))}),Te(()=>{t().scope&&t(t().scope=t().scope.replaceAll("+"," "),!0)}),Te(()=>{e(E)&&T(e(E))});var h=Pu(),y=c(h),w=l(c(y),2),b=c(w,!0);v(w),v(y);var x=l(y,6),p=c(x);Be(p,{get selected(){return t().enabled},set selected(H){t(t().enabled=H,!0)}}),v(x);var S=l(x,4),L=c(S);Be(L,{get selected(){return e(I)},set selected(H){a(I,n(H))}}),v(S);var D=l(S,2);{var j=H=>{wa(H,{rows:17,name:"rootPem",placeholder:`-----BEGIN CERTIFICATE-----
-----END CERTIFICATE-----`,get error(){return e(o).root_pem},get value(){return t().root_pem},set value(Ie){t(t().root_pem=Ie,!0)},children:(Ie,ge)=>{q();var Ue=B("Root Certificate in PEM format");r(Ie,Ue)},$$slots:{default:!0}})},N=H=>{var Ie=Nu(),ge=l(ee(Ie),2),Ue=c(ge);Be(Ue,{get selected(){return t().danger_allow_insecure},set selected(Je){t(t().danger_allow_insecure=Je,!0)}}),v(ge),r(H,Ie)};P(D,H=>{e(I)?H(j):H(N,!1)})}var V=l(D,2);ie(V,{autocomplete:"off",placeholder:"Issuer URL",width:d,get value(){return t().issuer},set value(H){t(t().issuer=H,!0)},get error(){return e(o).issuer},set error(H){e(o).issuer=H},$$events:{input:k},children:(H,Ie)=>{q();var ge=B("ISSUER URL");r(H,ge)},$$slots:{default:!0}});var R=l(V,2);ie(R,{autocomplete:"off",placeholder:"Authorization Endpoint",width:d,get value(){return t().authorization_endpoint},set value(H){t(t().authorization_endpoint=H,!0)},get error(){return e(o).authorization_endpoint},set error(H){e(o).authorization_endpoint=H},$$events:{input:k},children:(H,Ie)=>{q();var ge=B("AUTHORIZATION ENDPOINT");r(H,ge)},$$slots:{default:!0}});var F=l(R,2);ie(F,{autocomplete:"off",placeholder:"Token Endpoint",width:d,get value(){return t().token_endpoint},set value(H){t(t().token_endpoint=H,!0)},get error(){return e(o).token_endpoint},set error(H){e(o).token_endpoint=H},$$events:{input:k},children:(H,Ie)=>{q();var ge=B("TOKEN ENDPOINT");r(H,ge)},$$slots:{default:!0}});var z=l(F,2);ie(z,{autocomplete:"off",placeholder:"Userinfo Endpoint",width:d,get value(){return t().userinfo_endpoint},set value(H){t(t().userinfo_endpoint=H,!0)},get error(){return e(o).userinfo_endpoint},set error(H){e(o).userinfo_endpoint=H},$$events:{input:k},children:(H,Ie)=>{q();var ge=B("USERINFO ENDPOINT");r(H,ge)},$$slots:{default:!0}});var O=l(z,4),U=c(O);Be(U,{get selected(){return t().use_pkce},set selected(H){t(t().use_pkce=H,!0)}}),v(O);var Q=l(O,4);ie(Q,{autocomplete:"off",placeholder:"openid profile email",width:d,get value(){return t().scope},set value(H){t(t().scope=H,!0)},get error(){return e(o).scope},set error(H){e(o).scope=H},$$events:{input:k},children:(H,Ie)=>{q();var ge=B("SCOPE");r(H,ge)},$$slots:{default:!0}});var M=l(Q,4);ie(M,{autocomplete:"off",placeholder:"Client Name",width:d,get value(){return t().name},set value(H){t(t().name=H,!0)},get error(){return e(o).name},set error(H){e(o).name=H},$$events:{input:k},children:(H,Ie)=>{q();var ge=B("CLIENT NAME");r(H,ge)},$$slots:{default:!0}});var W=l(M,4);ie(W,{autocomplete:"off",placeholder:"Client ID",width:d,get value(){return t().client_id},set value(H){t(t().client_id=H,!0)},get error(){return e(o).client_id},set error(H){e(o).client_id=H},$$events:{input:k},children:(H,Ie)=>{q();var ge=B("CLIENT ID");r(H,ge)},$$slots:{default:!0}});var J=l(W,4);Wt(J,{get error(){return e(o).client_secret},autocomplete:"off",placeholder:"Client Secret",width:d,get value(){return t().client_secret},set value(H){t(t().client_secret=H,!0)},$$events:{input:k},children:(H,Ie)=>{q();var ge=B("CLIENT SECRET");r(H,ge)},$$slots:{default:!0}});var Z=l(J,4),re=l(c(Z),2);Be(re,{get selected(){return t().client_secret_basic},set selected(H){t(t().client_secret_basic=H,!0)}}),v(Z);var ve=l(Z,2),be=l(c(ve),2);Be(be,{get selected(){return t().client_secret_post},set selected(H){t(t().client_secret_post=H,!0)}}),v(ve);var $e=l(ve,2);us($e);var pe=l($e,4);ie(pe,{autocomplete:"off",placeholder:"$.roles.*",width:d,get value(){return t().admin_claim_path},set value(H){t(t().admin_claim_path=H,!0)},get error(){return e(o).admin_claim_path},set error(H){e(o).admin_claim_path=H},$$events:{input:k},children:(H,Ie)=>{q();var ge=B("ADMIN CLAIM PATH");r(H,ge)},$$slots:{default:!0}});var je=l(pe,2);ie(je,{autocomplete:"off",placeholder:"rauthy_admin",width:d,get value(){return t().admin_claim_value},set value(H){t(t().admin_claim_value=H,!0)},get error(){return e(o).admin_claim_value},set error(H){e(o).admin_claim_value=H},$$events:{input:k},children:(H,Ie)=>{q();var ge=B("ADMIN CLAIM VALUE");r(H,ge)},$$slots:{default:!0}});var fe=l(je,4);ie(fe,{autocomplete:"off",placeholder:"$.amr.*",width:d,get value(){return t().mfa_claim_path},set value(H){t(t().mfa_claim_path=H,!0)},get error(){return e(o).mfa_claim_path},set error(H){e(o).mfa_claim_path=H},$$events:{input:k},children:(H,Ie)=>{q();var ge=B("MFA CLAIM PATH");r(H,ge)},$$slots:{default:!0}});var de=l(fe,2);ie(de,{autocomplete:"off",placeholder:"mfa",width:d,get value(){return t().mfa_claim_value},set value(H){t(t().mfa_claim_value=H,!0)},get error(){return e(o).mfa_claim_value},set error(H){e(o).mfa_claim_value=H},$$events:{input:k},children:(H,Ie)=>{q();var ge=B("MFA CLAIM VALUE");r(H,ge)},$$slots:{default:!0}});var ye=l(de,2),we=c(ye);ls(we,{get image(){return e(E)},set image(H){a(E,n(H))}});var Pe=l(we,2);{var Ce=H=>{Lu(H,{get providerId(){return t().id}})};P(Pe,H=>{e(i)||H(Ce)})}v(ye);var xe=l(ye,2);{var Re=H=>{var Ie=ju(),ge=ee(Ie);Se(ge,{level:1,width:"4rem",get isLoading(){return e(i)},set isLoading(qe){a(i,n(qe))},$$events:{click:m},children:(qe,Fe)=>{q();var lt=B("SAVE");r(qe,lt)},$$slots:{default:!0}});var Ue=l(ge,2);{var Je=qe=>{var Fe=Ru();r(qe,Fe)};P(Ue,qe=>{e(f)&&qe(Je)})}var rt=l(Ue,2);{var vt=qe=>{var Fe=Du(),lt=c(Fe,!0);v(Fe),K(()=>Y(lt,e(g))),r(qe,Fe)};P(rt,qe=>{e(g)&&qe(vt)})}r(H,Ie)};P(xe,H=>{H(Re)})}v(h),K(()=>Y(b,t().id)),r(_,h),ne()}var Ou=A("<p> </p>"),Mu=A(`<div class="label svelte-1tncxap"><p>This provider is in use by active users.</p> <p>You can force delete it, but users without a local password or passkey
                will not be able to log in anymore.</p> <details><summary>Linked Users</summary> <!></details></div> <div class="label svelte-1tncxap"><p>Are you sure you want to delete this provider?</p> <div class="forceDelete svelte-1tncxap">FORCE DELETE <!></div></div> <!>`,1),Uu=A('<div class="label svelte-1tncxap">Are you sure, you want to delete this provider?</div> <!>',1),qu=A('<div class="err svelte-1tncxap"> </div>'),Gu=A('<div class="container svelte-1tncxap"><!> <!></div>');function Wu(_,s){le(s,!0);let t=G(s,"provider",19,()=>({})),d=C(!0),i=C(""),g=C(!1),f=C(n([]));Ne(async()=>{let k=await zr(t().id),h=await k.json();k.status===406?a(f,n(h)):a(i,n(h.message)),a(d,!1)});async function u(){a(i,""),a(d,!0);let k=await Pr(t().id);if(k.ok)s.onSave();else{let h=await k.json();a(i,n(h.message))}a(d,!1)}var I=Gu(),E=c(I);{var o=k=>{var h=Mu(),y=ee(h),w=l(c(y),4),b=l(c(w),2);We(b,17,()=>e(f),j=>j.id,(j,N)=>{var V=Ou(),R=c(V);v(V),K(()=>Y(R,`${e(N).id??""} ${e(N).email??""}`)),r(j,V)}),v(w),v(y);var x=l(y,2),p=l(c(x),2),S=l(c(p));Be(S,{get selected(){return e(g)},set selected(j){a(g,n(j))}}),v(p),v(x);var L=l(x,2);{var D=j=>{Se(j,{level:1,get isLoading(){return e(d)},set isLoading(N){a(d,n(N))},$$events:{click:u},children:(N,V)=>{q();var R=B("DELETE");r(N,R)},$$slots:{default:!0}})};P(L,j=>{e(g)&&j(D)})}r(k,h)},$=k=>{var h=Uu(),y=l(ee(h),2);Se(y,{level:1,get isLoading(){return e(d)},set isLoading(w){a(d,n(w))},$$events:{click:u},children:(w,b)=>{q();var x=B("DELETE");r(w,x)},$$slots:{default:!0}}),r(k,h)};P(E,k=>{e(f).length>0?k(o):k($,!1)})}var m=l(E,2);{var T=k=>{var h=qu(),y=c(h,!0);v(h),K(()=>Y(y,e(i))),r(k,h)};P(m,k=>{e(i)&&k(T)})}v(I),r(_,I),ne()}var Ku=A('<div class="data font-mono svelte-115hohv"> </div>'),Fu=A('<div class="data svelte-115hohv"> </div>'),Vu=A('<div class="header svelte-115hohv"><!> <!></div>'),Bu=A("<div><!></div>"),Ju=A("<div><!></div>"),Yu=A("<div><!> <!></div>");function Hu(_,s){le(s,!0);let t=G(s,"provider",31,()=>n({})),d=G(s,"onSave",15),i=C(void 0);const g=["Config","Delete"];let f=C(n(g[0]));const u=200,I=u/2;ot(_,{get show(){return e(i)},set show(E){a(i,n(E))},header:E=>{var o=Vu(),$=c(o);Ze($,{text:"Provider ID",children:(T,k)=>{var h=Ku(),y=c(h,!0);v(h),K(()=>Y(y,t().id)),r(T,h)},$$slots:{default:!0}});var m=l($,2);Ze(m,{text:"Provider Name",children:(T,k)=>{var h=Fu(),y=c(h,!0);v(h),K(()=>Y(y,t().name)),r(T,h)},$$slots:{default:!0}}),v(o),r(E,o)},body:E=>{var o=Yu(),$=c(o);Dt($,{labels:g,get selected(){return e(f)},set selected(h){a(f,n(h))}});var m=l($,2);{var T=h=>{var y=Bu(),w=c(y);zu(w,{get provider(){return t()},set provider(b){t(b)},get onSave(){return d()},set onSave(b){d(b)}}),v(y),ce(1,y,()=>_e,()=>({delay:I,duration:u})),ce(2,y,()=>_e,()=>({duration:u})),r(h,y)},k=h=>{var y=me(),w=ee(y);{var b=x=>{var p=Ju(),S=c(p);Wu(S,{get provider(){return t()},set provider(L){t(L)},get onSave(){return d()},set onSave(L){d(L)}}),v(p),ce(1,p,()=>_e,()=>({delay:I,duration:u})),ce(2,p,()=>_e,()=>({duration:u})),r(x,p)};P(w,x=>{e(f)==="Delete"&&x(b)},!0)}r(h,y)};P(m,h=>{e(f)==="Config"?h(T):h(k,!1)})}v(o),r(E,o)},$$slots:{header:!0,body:!0}}),ne()}var Xu=A('<div class="svelte-a0i4pk"><!></div>'),Zu=A(' <div class="content"><!> <div id="federation" class="svelte-a0i4pk"></div> <div style="height: 20px"></div></div>',1);function Qu(_,s){le(s,!0);let t=C(""),d=C(n([]));Ne(()=>{i()});async function i(){let $=await Rr(),m=await $.json();$.ok?a(d,n([...m])):a(t,n(m.message))}function g(){i()}q();var f=Zu(),u=ee(f),I=l(u),E=c(I);Au(E,{onSave:g});var o=l(E,2);We(o,23,()=>e(d),$=>$.id,($,m,T)=>{var k=Xu(),h=c(k);Hu(h,{onSave:g,get provider(){return e(d)[e(T)]},set provider(y){e(d)[e(T)]=y}}),v(k),r($,k)}),v(o),q(2),v(I),K(()=>Y(u,`${e(t)??""} `)),r(_,f),ne()}var eh=A("<div><div><!></div></div>"),th=A("<div><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div>"),ah=A('<main class="svelte-1a52j8o"><!> <div class="inner svelte-1a52j8o"><!> <!></div></main>');function sh(_,s){le(s,!0);let t=G(s,"selected",15,"Users"),d=C("Rauthy Admin"),i=C(!0),g=C(!0),f=C(!1),u=C(void 0);Te(()=>{e(u)&&(a(i,e(u)>1050),a(g,e(u)<1050),a(f,e(u)>1450))}),Te(()=>{if(t())switch(t()){case"Users":{window.history.pushState("Users","","/auth/v1/admin/users"),a(d,"Users");break}case"Attributes":{window.history.pushState("Attributes","","/auth/v1/admin/attributes"),a(d,"Attributes");break}case"Clients":{window.history.pushState("Clients","","/auth/v1/admin/clients"),a(d,"Clients");break}case"Roles":{window.history.pushState("Roles","","/auth/v1/admin/roles"),a(d,"Roles");break}case"Groups":{window.history.pushState("Groups","","/auth/v1/admin/groups"),a(d,"Groups");break}case"Scopes":{window.history.pushState("Scopes","","/auth/v1/admin/scopes"),a(d,"Scopes");break}case"Sessions":{window.history.pushState("Sessions","","/auth/v1/admin/sessions"),a(d,"Sessions");break}case"Events":{window.history.pushState("Sessions","","/auth/v1/admin/events"),a(d,"Events");break}case"Blacklist":{window.history.pushState("Blacklist","","/auth/v1/admin/blacklist"),a(d,"Blacklist");break}case"ApiKeys":{window.history.pushState("ApiKeys","","/auth/v1/admin/api_keys"),a(d,"ApiKeys");break}case"Providers":{window.history.pushState("Providers","","/auth/v1/admin/providers"),a(d,"Providers");break}case"Config":{window.history.pushState("Config","","/auth/v1/admin/config"),a(d,"Config");break}case"Docs":{window.history.pushState("Docs","","/auth/v1/admin/docs"),a(d,"Docs");break}case"Logout":Ms();break}}),Ne(()=>(window.addEventListener("popstate",E),I(window.innerWidth),()=>window.removeEventListener("popstate",E)));function I(b){a(i,b>1050),a(g,b<1050),a(f,b>1450)}function E(b){t(b.state)}var o=ah();Ta(b=>{K(()=>Aa.title=e(d))});var $=c(o);or($,{widthExpanded:150,widthCollapsed:70,get selected(){return t()},set selected(b){t(b)},get isExpanded(){return e(i)},set isExpanded(b){a(i,n(b))},logo:b=>{var x=eh(),p=c(x),S=c(p);Yd(S),v(p),v(x),K(()=>{oe(p,"width",e(i)?"120px":"55px"),oe(p,"margin-top",e(i)?"32px":"40px"),oe(p,"margin-bottom",e(i)?"13px":"22px")}),r(b,x)},entries:b=>{var x=th(),p=c(x);mt(p,{label:"Users",children:(W,J)=>{Pd(W,{})},$$slots:{default:!0}});var S=l(p,2);mt(S,{label:"Attributes",children:(W,J)=>{Gd(W,{})},$$slots:{default:!0}});var L=l(S,2);mt(L,{label:"Clients",children:(W,J)=>{Od(W,{})},$$slots:{default:!0}});var D=l(L,2);mt(D,{label:"Roles",children:(W,J)=>{os(W,{})},$$slots:{default:!0}});var j=l(D,2);mt(j,{label:"Groups",children:(W,J)=>{Ud(W,{})},$$slots:{default:!0}});var N=l(j,2);mt(N,{label:"Scopes",children:(W,J)=>{Bd(W,{})},$$slots:{default:!0}});var V=l(N,2);mt(V,{label:"Sessions",children:(W,J)=>{os(W,{})},$$slots:{default:!0}});var R=l(V,2);mt(R,{label:"Events",children:(W,J)=>{hu(W,{})},$$slots:{default:!0}});var F=l(R,2);mt(F,{label:"Blacklist",children:(W,J)=>{Qt(W,{width:24})},$$slots:{default:!0}});var z=l(F,2);mt(z,{label:"ApiKeys",children:(W,J)=>{Nc(W,{})},$$slots:{default:!0}});var O=l(z,2);mt(O,{label:"Providers",children:(W,J)=>{mu(W,{})},$$slots:{default:!0}});var U=l(O,2);mt(U,{label:"Config",children:(W,J)=>{Dd(W,{})},$$slots:{default:!0}});var Q=l(U,2);mt(Q,{label:"Docs",children:(W,J)=>{Qd(W,{})},$$slots:{default:!0}});var M=l(Q,2);mt(M,{label:"Logout",children:(W,J)=>{Fd(W,{})},$$slots:{default:!0}}),v(x),r(b,x)},$$slots:{logo:!0,entries:!0}});var m=l($,2),T=c(m);{var k=b=>{bt(b,{get eventsWide(){return e(f)},set eventsWide(x){a(f,n(x))},get eventsCollapsed(){return e(g)},set eventsCollapsed(x){a(g,n(x))},children:(x,p)=>{an(x,{})},$$slots:{default:!0}})},h=b=>{var x=me(),p=ee(x);{var S=D=>{bt(D,{get eventsWide(){return e(f)},set eventsWide(j){a(f,n(j))},get eventsCollapsed(){return e(g)},set eventsCollapsed(j){a(g,n(j))},children:(j,N)=>{id(j,{})},$$slots:{default:!0}})},L=D=>{var j=me(),N=ee(j);{var V=F=>{bt(F,{get eventsWide(){return e(f)},set eventsWide(z){a(f,n(z))},get eventsCollapsed(){return e(g)},set eventsCollapsed(z){a(g,n(z))},children:(z,O)=>{Av(z,{})},$$slots:{default:!0}})},R=F=>{var z=me(),O=ee(z);{var U=M=>{bt(M,{get eventsWide(){return e(f)},set eventsWide(W){a(f,n(W))},get eventsCollapsed(){return e(g)},set eventsCollapsed(W){a(g,n(W))},children:(W,J)=>{Cn(W,{})},$$slots:{default:!0}})},Q=M=>{var W=me(),J=ee(W);{var Z=ve=>{bt(ve,{get eventsWide(){return e(f)},set eventsWide(be){a(f,n(be))},get eventsCollapsed(){return e(g)},set eventsCollapsed(be){a(g,n(be))},children:(be,$e)=>{Hn(be,{})},$$slots:{default:!0}})},re=ve=>{var be=me(),$e=ee(be);{var pe=fe=>{bt(fe,{get eventsWide(){return e(f)},set eventsWide(de){a(f,n(de))},get eventsCollapsed(){return e(g)},set eventsCollapsed(de){a(g,n(de))},children:(de,ye)=>{xo(de,{})},$$slots:{default:!0}})},je=fe=>{var de=me(),ye=ee(de);{var we=Ce=>{bt(Ce,{get eventsWide(){return e(f)},set eventsWide(xe){a(f,n(xe))},get eventsCollapsed(){return e(g)},set eventsCollapsed(xe){a(g,n(xe))},children:(xe,Re)=>{Mv(xe,{})},$$slots:{default:!0}})},Pe=Ce=>{var xe=me(),Re=ee(xe);{var H=ge=>{bt(ge,{get eventsWide(){return e(f)},set eventsWide(Ue){a(f,n(Ue))},get eventsCollapsed(){return e(g)},set eventsCollapsed(Ue){a(g,n(Ue))},children:(Ue,Je)=>{cu(Ue,{})},$$slots:{default:!0}})},Ie=ge=>{var Ue=me(),Je=ee(Ue);{var rt=qe=>{bt(qe,{get eventsWide(){return e(f)},set eventsWide(Fe){a(f,n(Fe))},get eventsCollapsed(){return e(g)},set eventsCollapsed(Fe){a(g,n(Fe))},children:(Fe,lt)=>{Tc(Fe,{})},$$slots:{default:!0}})},vt=qe=>{var Fe=me(),lt=ee(Fe);{var xt=Qe=>{bt(Qe,{get eventsWide(){return e(f)},set eventsWide(et){a(f,n(et))},get eventsCollapsed(){return e(g)},set eventsCollapsed(et){a(g,n(et))},children:(et,gt)=>{ou(et,{})},$$slots:{default:!0}})},$t=Qe=>{var et=me(),gt=ee(et);{var ct=at=>{bt(at,{get eventsWide(){return e(f)},set eventsWide(st){a(f,n(st))},get eventsCollapsed(){return e(g)},set eventsCollapsed(st){a(g,n(st))},children:(st,se)=>{Qu(st,{})},$$slots:{default:!0}})},It=at=>{var st=me(),se=ee(st);{var Ae=X=>{bt(X,{get eventsWide(){return e(f)},set eventsWide(Ee){a(f,n(Ee))},get eventsCollapsed(){return e(g)},set eventsCollapsed(Ee){a(g,n(Ee))},children:(Ee,Le)=>{Nd(Ee)},$$slots:{default:!0}})},ze=X=>{var Ee=me(),Le=ee(Ee);{var St=ae=>{bt(ae,{get eventsWide(){return e(f)},set eventsWide(Ge){a(f,n(Ge))},get eventsCollapsed(){return e(g)},set eventsCollapsed(Ge){a(g,n(Ge))},children:(Ge,Oe)=>{Xd(Ge)},$$slots:{default:!0}})};P(Le,ae=>{t()==="Docs"&&ae(St)},!0)}r(X,Ee)};P(se,X=>{t()==="Config"?X(Ae):X(ze,!1)},!0)}r(at,st)};P(gt,at=>{t()==="Providers"?at(ct):at(It,!1)},!0)}r(Qe,et)};P(lt,Qe=>{t()==="ApiKeys"?Qe(xt):Qe($t,!1)},!0)}r(qe,Fe)};P(Je,qe=>{t()==="Blacklist"?qe(rt):qe(vt,!1)},!0)}r(ge,Ue)};P(Re,ge=>{t()==="Events"?ge(H):ge(Ie,!1)},!0)}r(Ce,xe)};P(ye,Ce=>{t()==="Sessions"?Ce(we):Ce(Pe,!1)},!0)}r(fe,de)};P($e,fe=>{t()==="Scopes"?fe(pe):fe(je,!1)},!0)}r(ve,be)};P(J,ve=>{t()==="Groups"?ve(Z):ve(re,!1)},!0)}r(M,W)};P(O,M=>{t()==="Roles"?M(U):M(Q,!1)},!0)}r(F,z)};P(N,F=>{t()==="Clients"?F(V):F(R,!1)},!0)}r(D,j)};P(p,D=>{t()==="Attributes"?D(S):D(L,!1)},!0)}r(b,x)};P(T,b=>{t()==="Users"?b(k):b(h,!1)})}var y=l(T,2);{var w=b=>{kc(b,{get collapsed(){return e(g)},get wide(){return e(f)}})};P(y,b=>{e(u)!==void 0&&b(w)})}v(m),v(o),Bs("innerWidth",b=>a(u,n(b))),r(_,o),ne()}var rh=A('<div class="noAdmin svelte-mia078"><div class="text svelte-mia078">A rauthy admin account must have <b>MFA enabled.</b><br> Please navigate to your <b>account</b> and activate MFA.<br> Afterwards, you need to do a logout and log back in.</div> <!></div>'),ih=A('<div class="noAdmin svelte-mia078"><div class="text svelte-mia078">You are not assigned to the <b>rauthy_admin</b> role.<br> You do not have access to the admin panel.</div> <!></div>');function lh(_,s){le(s,!0);let t=G(s,"selected",15,"Users"),d=C(void 0),i=C(!1),g=C(!1);Ne(async()=>{let o=await Us();if(o.ok){let $=await o.json(),m=await qs();m.ok?(a(d,n($)),a(i,!0)):m.status===406?(a(g,!0),a(d,n({}))):a(d,n({}))}else Oa()});var f=me();Ta(o=>{Aa.title="Admin"});var u=ee(f);{var I=o=>{ua(o,{})},E=o=>{var $=me(),m=ee($);{var T=h=>{var y=rh(),w=l(c(y),2);Se(w,{$$events:{click:()=>window.location.href="/auth/v1/account"},children:(b,x)=>{q();var p=B("ACCOUNT");r(b,p)},$$slots:{default:!0}}),v(y),r(h,y)},k=h=>{var y=me(),w=ee(y);{var b=p=>{var S=ih(),L=l(c(S),2);Se(L,{$$events:{click:()=>window.location.href="/auth/v1/"},children:(D,j)=>{q();var N=B("GO BACK");r(D,N)},$$slots:{default:!0}}),v(S),r(p,S)},x=p=>{sh(p,{get selected(){return t()},set selected(S){t(S)}})};P(w,p=>{e(i)?p(x,!1):p(b)},!0)}r(h,y)};P(m,h=>{e(g)?h(T):h(k,!1)},!0)}r(o,$)};P(u,o=>{!e(d)&&!e(g)?o(I):o(E,!1)})}r(_,f),ne()}export{lh as A};
